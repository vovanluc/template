/**
 * @license almond 0.3.1 Copyright (c) 2011-2014, The Dojo Foundation All Rights Reserved.
 * Available via the MIT or new BSD license.
 * see: http://github.com/jrburke/almond for details
 */

//     (c) 2010-2011 Jeremy Ashkenas, DocumentCloud Inc.

//     (c) 2011-2013 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors

//     Backbone may be freely distributed under the MIT license.

// Copyright (c)2014 Derick Bailey, Muted Solutions, LLC.

// Distributed under MIT license

/*!
 * Includes BabySitter
 * https://github.com/marionettejs/backbone.babysitter/
 *
 * Includes Wreqr
 * https://github.com/marionettejs/backbone.wreqr/
 */

/** @license
 *
 * SoundManager 2: JavaScript Sound for the Web
 * ----------------------------------------------
 * http://schillmania.com/projects/soundmanager2/
 *
 * Copyright (c) 2007, Scott Schiller. All rights reserved.
 * Code provided under the BSD License:
 * http://schillmania.com/projects/soundmanager2/license.txt
 *
 * V2.97a.20150601
 */

/**
 * @license RequireJS text 2.0.10 Copyright (c) 2010-2012, The Dojo Foundation All Rights Reserved.
 * Available via the MIT or new BSD license.
 * see: http://github.com/requirejs/text for details
 */

/*! Copyright (c) 2013 Brandon Aaron (http://brandon.aaron.sh)
 * Licensed under the MIT License (LICENSE.txt).
 *
 * Version: 3.1.9
 *
 * Requires: jQuery 1.2.2+
 */

/*!
 * jScrollPane - v2.0.19 - 2013-11-16
 * http://jscrollpane.kelvinluck.com/
 *
 * Copyright (c) 2013 Kelvin Luck
 * Dual licensed under the MIT or GPL licenses.
 */

// Copyright (c) 2013 Kelvin Luck

// Dual licensed under the MIT or GPL Version 2 licenses.

!function(){function t(t,e,n){t.fn.jScrollPane||(t.fn.jScrollPane=function(i){function s(i,s){function a(e){var s,o,p,c,d,h,g=!1,v=!1;if(q=e,V===n)d=i.scrollTop(),h=i.scrollLeft(),i.css({overflow:"hidden",padding:0}),z=i.innerWidth()+_e,N=i.innerHeight(),i.width(z),V=t('<div class="jspPane" />').css("padding",ye).append(i.children()),U=t('<div class="jspContainer" />').css({width:z+"px",height:N+"px"}).append(V).appendTo(i);else{if(i.css("width",""),g=q.stickToBottom&&O(),v=q.stickToRight&&E(),c=i.innerWidth()+_e!=z||i.outerHeight()!=N,c&&(z=i.innerWidth()+_e,N=i.innerHeight(),U.css({width:z+"px",height:N+"px"})),!c&&we==X&&V.outerHeight()==W)return void i.width(z);we=X,V.css("width",""),i.width(z),U.find(">.jspVerticalBar,>.jspHorizontalBar").remove().end()}V.css("overflow","auto"),X=e.contentWidth?e.contentWidth:V[0].scrollWidth,W=V[0].scrollHeight,V.css("overflow",""),Y=X/z,Q=W/N,G=Q>1,J=Y>1,J||G?(i.addClass("jspScrollable"),s=q.maintainPosition&&(te||ie),s&&(o=P(),p=T()),r(),l(),u(),s&&(M(v?X-z:o,!1),C(g?W-N:p,!1)),I(),j(),B(),q.enableKeyboardNavigation&&R(),q.clickOnTrack&&f(),L(),q.hijackInternalLinks&&D()):(i.removeClass("jspScrollable"),V.css({top:0,left:0,width:U.width()-_e}),S(),$(),H(),m()),q.autoReinitialise&&!ve?ve=setInterval(function(){a(q)},q.autoReinitialiseDelay):!q.autoReinitialise&&ve&&clearInterval(ve),d&&i.scrollTop(0)&&C(d,!1),h&&i.scrollLeft(0)&&M(h,!1),i.trigger("jsp-initialised",[J||G])}function r(){G&&(U.append(t('<div class="jspVerticalBar" />').append(t('<div class="jspCap jspCapTop" />'),t('<div class="jspTrack" />').append(t('<div class="jspDrag" />').append(t('<div class="jspDragTop" />'),t('<div class="jspDragBottom" />'))),t('<div class="jspCap jspCapBottom" />'))),se=U.find(">.jspVerticalBar"),ae=se.find(">.jspTrack"),K=ae.find(">.jspDrag"),q.showArrows&&(pe=t('<a class="jspArrow jspArrowUp" />').bind("mousedown.jsp",d(0,-1)).bind("click.jsp",A),ue=t('<a class="jspArrow jspArrowDown" />').bind("mousedown.jsp",d(0,1)).bind("click.jsp",A),q.arrowScrollOnHover&&(pe.bind("mouseover.jsp",d(0,-1,pe)),ue.bind("mouseover.jsp",d(0,1,ue))),c(ae,q.verticalArrowPositions,pe,ue)),oe=N,U.find(">.jspVerticalBar>.jspCap:visible,>.jspVerticalBar>.jspArrow").each(function(){oe-=t(this).outerHeight()}),K.hover(function(){K.addClass("jspHover")},function(){K.removeClass("jspHover")}).bind("mousedown.jsp",function(e){t("html").bind("dragstart.jsp selectstart.jsp",A),K.addClass("jspActive");var n=e.pageY-K.position().top;return t("html").bind("mousemove.jsp",function(t){v(t.pageY-n,!1)}).bind("mouseup.jsp mouseleave.jsp",g),!1}),o())}function o(){ae.height(oe+"px"),te=0,re=q.verticalGutter+ae.outerWidth(),V.width(z-re-_e);try{0===se.position().left&&V.css("margin-left",re+"px")}catch(t){}}function l(){J&&(U.append(t('<div class="jspHorizontalBar" />').append(t('<div class="jspCap jspCapLeft" />'),t('<div class="jspTrack" />').append(t('<div class="jspDrag" />').append(t('<div class="jspDragLeft" />'),t('<div class="jspDragRight" />'))),t('<div class="jspCap jspCapRight" />'))),ce=U.find(">.jspHorizontalBar"),de=ce.find(">.jspTrack"),ee=de.find(">.jspDrag"),q.showArrows&&(me=t('<a class="jspArrow jspArrowLeft" />').bind("mousedown.jsp",d(-1,0)).bind("click.jsp",A),ge=t('<a class="jspArrow jspArrowRight" />').bind("mousedown.jsp",d(1,0)).bind("click.jsp",A),q.arrowScrollOnHover&&(me.bind("mouseover.jsp",d(-1,0,me)),ge.bind("mouseover.jsp",d(1,0,ge))),c(de,q.horizontalArrowPositions,me,ge)),ee.hover(function(){ee.addClass("jspHover")},function(){ee.removeClass("jspHover")}).bind("mousedown.jsp",function(e){t("html").bind("dragstart.jsp selectstart.jsp",A),ee.addClass("jspActive");var n=e.pageX-ee.position().left;return t("html").bind("mousemove.jsp",function(t){_(t.pageX-n,!1)}).bind("mouseup.jsp mouseleave.jsp",g),!1}),he=U.innerWidth(),p())}function p(){U.find(">.jspHorizontalBar>.jspCap:visible,>.jspHorizontalBar>.jspArrow").each(function(){he-=t(this).outerWidth()}),de.width(he+"px"),ie=0}function u(){if(J&&G){var e=de.outerHeight(),n=ae.outerWidth();oe-=e,t(ce).find(">.jspCap:visible,>.jspArrow").each(function(){he+=t(this).outerWidth()}),he-=n,N-=n,z-=e,de.parent().append(t('<div class="jspCorner" />').css("width",e+"px")),o(),p()}J&&V.width(U.outerWidth()-_e+"px"),W=V.outerHeight(),Q=W/N,J&&(fe=Math.ceil(1/Y*he),fe>q.horizontalDragMaxWidth?fe=q.horizontalDragMaxWidth:fe<q.horizontalDragMinWidth&&(fe=q.horizontalDragMinWidth),ee.width(fe+"px"),ne=he-fe,w(ie)),G&&(le=Math.ceil(1/Q*oe),le>q.verticalDragMaxHeight?le=q.verticalDragMaxHeight:le<q.verticalDragMinHeight&&(le=q.verticalDragMinHeight),K.height(le+"px"),Z=oe-le,y(te))}function c(t,e,n,i){var s,a="before",r="after";"os"==e&&(e=/Mac/.test(navigator.platform)?"after":"split"),e==a?r=e:e==r&&(a=e,s=n,n=i,i=s),t[a](n)[r](i)}function d(t,e,n){return function(){return h(t,e,this,n),this.blur(),!1}}function h(e,n,i,s){i=t(i).addClass("jspActive");var a,r,o=!0,l=function(){0!==e&&be.scrollByX(e*q.arrowButtonSpeed),0!==n&&be.scrollByY(n*q.arrowButtonSpeed),r=setTimeout(l,o?q.initialDelay:q.arrowRepeatFreq),o=!1};l(),a=s?"mouseout.jsp":"mouseup.jsp",s=s||t("html"),s.bind(a,function(){i.removeClass("jspActive"),r&&clearTimeout(r),r=null,s.unbind(a)})}function f(){m(),G&&ae.bind("mousedown.jsp",function(e){if(e.originalTarget===n||e.originalTarget==e.currentTarget){var i,s=t(this),a=s.offset(),r=e.pageY-a.top-te,o=!0,l=function(){var t=s.offset(),n=e.pageY-t.top-le/2,a=N*q.scrollPagePercent,u=Z*a/(W-N);if(0>r)te-u>n?be.scrollByY(-a):v(n);else{if(!(r>0))return void p();n>te+u?be.scrollByY(a):v(n)}i=setTimeout(l,o?q.initialDelay:q.trackClickRepeatFreq),o=!1},p=function(){i&&clearTimeout(i),i=null,t(document).unbind("mouseup.jsp",p)};return l(),t(document).bind("mouseup.jsp",p),!1}}),J&&de.bind("mousedown.jsp",function(e){if(e.originalTarget===n||e.originalTarget==e.currentTarget){var i,s=t(this),a=s.offset(),r=e.pageX-a.left-ie,o=!0,l=function(){var t=s.offset(),n=e.pageX-t.left-fe/2,a=z*q.scrollPagePercent,u=ne*a/(X-z);if(0>r)ie-u>n?be.scrollByX(-a):_(n);else{if(!(r>0))return void p();n>ie+u?be.scrollByX(a):_(n)}i=setTimeout(l,o?q.initialDelay:q.trackClickRepeatFreq),o=!1},p=function(){i&&clearTimeout(i),i=null,t(document).unbind("mouseup.jsp",p)};return l(),t(document).bind("mouseup.jsp",p),!1}})}function m(){de&&de.unbind("mousedown.jsp"),ae&&ae.unbind("mousedown.jsp")}function g(){t("html").unbind("dragstart.jsp selectstart.jsp mousemove.jsp mouseup.jsp mouseleave.jsp"),K&&K.removeClass("jspActive"),ee&&ee.removeClass("jspActive")}function v(t,e){G&&(0>t?t=0:t>Z&&(t=Z),e===n&&(e=q.animateScroll),e?be.animate(K,"top",t,y):(K.css("top",t),y(t)))}function y(t){t===n&&(t=K.position().top),U.scrollTop(0),te=t;var e=0===te,s=te==Z,a=t/Z,r=-a*(W-N);(ke!=e||Me!=s)&&(ke=e,Me=s,i.trigger("jsp-arrow-change",[ke,Me,Ce,xe])),b(e,s),V.css("top",r),i.trigger("jsp-scroll-y",[-r,e,s]).trigger("scroll")}function _(t,e){J&&(0>t?t=0:t>ne&&(t=ne),e===n&&(e=q.animateScroll),e?be.animate(ee,"left",t,w):(ee.css("left",t),w(t)))}function w(t){t===n&&(t=ee.position().left),U.scrollTop(0),ie=t;var e=0===ie,s=ie==ne,a=t/ne,r=-a*(X-z);(Ce!=e||xe!=s)&&(Ce=e,xe=s,i.trigger("jsp-arrow-change",[ke,Me,Ce,xe])),k(e,s),V.css("left",r),i.trigger("jsp-scroll-x",[-r,e,s]).trigger("scroll")}function b(t,e){q.showArrows&&(pe[t?"addClass":"removeClass"]("jspDisabled"),ue[e?"addClass":"removeClass"]("jspDisabled"))}function k(t,e){q.showArrows&&(me[t?"addClass":"removeClass"]("jspDisabled"),ge[e?"addClass":"removeClass"]("jspDisabled"))}function C(t,e){var n=t/(W-N);v(n*Z,e)}function M(t,e){var n=t/(X-z);_(n*ne,e)}function x(e,n,i){var s,a,r,o,l,p,u,c,d,h=0,f=0;try{s=t(e)}catch(m){return}for(a=s.outerHeight(),r=s.outerWidth(),U.scrollTop(0),U.scrollLeft(0);!s.is(".jspPane");)if(h+=s.position().top,f+=s.position().left,s=s.offsetParent(),/^body|html$/i.test(s[0].nodeName))return;o=T(),p=o+N,o>h||n?c=h-q.horizontalGutter:h+a>p&&(c=h-N+a+q.horizontalGutter),isNaN(c)||C(c,i),l=P(),u=l+z,l>f||n?d=f-q.horizontalGutter:f+r>u&&(d=f-z+r+q.horizontalGutter),isNaN(d)||M(d,i)}function P(){return-V.position().left}function T(){return-V.position().top}function O(){var t=W-N;return t>20&&t-T()<10}function E(){var t=X-z;return t>20&&t-P()<10}function j(){U.unbind(Te).bind(Te,function(t,e,n,i){var s=ie,a=te,r=t.deltaFactor||q.mouseWheelSpeed;return be.scrollBy(n*r,-i*r,!1),s==ie&&a==te})}function S(){U.unbind(Te)}function A(){return!1}function I(){V.find(":input,a").unbind("focus.jsp").bind("focus.jsp",function(t){x(t.target,!1)})}function $(){V.find(":input,a").unbind("focus.jsp")}function R(){function e(){var t=ie,e=te;switch(n){case 40:be.scrollByY(q.keyboardSpeed,!1);break;case 38:be.scrollByY(-q.keyboardSpeed,!1);break;case 34:case 32:be.scrollByY(N*q.scrollPagePercent,!1);break;case 33:be.scrollByY(-N*q.scrollPagePercent,!1);break;case 39:be.scrollByX(q.keyboardSpeed,!1);break;case 37:be.scrollByX(-q.keyboardSpeed,!1)}return s=t!=ie||e!=te}var n,s,a=[];J&&a.push(ce[0]),G&&a.push(se[0]),V.focus(function(){i.focus()}),i.attr("tabindex",0).unbind("keydown.jsp keypress.jsp").bind("keydown.jsp",function(i){if(i.target===this||a.length&&t(i.target).closest(a).length){var r=ie,o=te;switch(i.keyCode){case 40:case 38:case 34:case 32:case 33:case 39:case 37:n=i.keyCode,e();break;case 35:C(W-N),n=null;break;case 36:C(0),n=null}return s=i.keyCode==n&&r!=ie||o!=te,!s}}).bind("keypress.jsp",function(t){return t.keyCode==n&&e(),!s}),q.hideFocus?(i.css("outline","none"),"hideFocus"in U[0]&&i.attr("hideFocus",!0)):(i.css("outline",""),"hideFocus"in U[0]&&i.attr("hideFocus",!1))}function H(){i.attr("tabindex","-1").removeAttr("tabindex").unbind("keydown.jsp keypress.jsp")}function L(){if(location.hash&&location.hash.length>1){var e,n,i=escape(location.hash.substr(1));try{e=t("#"+i+', a[name="'+i+'"]')}catch(s){return}e.length&&V.find(i)&&(0===U.scrollTop()?n=setInterval(function(){U.scrollTop()>0&&(x(e,!0),t(document).scrollTop(U.position().top),clearInterval(n))},50):(x(e,!0),t(document).scrollTop(U.position().top)))}}function D(){t(document.body).data("jspHijack")||(t(document.body).data("jspHijack",!0),t(document.body).delegate("a[href*=#]","click",function(n){var i,s,a,r,o,l,p=this.href.substr(0,this.href.indexOf("#")),u=location.href;if(-1!==location.href.indexOf("#")&&(u=location.href.substr(0,location.href.indexOf("#"))),p===u){i=escape(this.href.substr(this.href.indexOf("#")+1));try{s=t("#"+i+', a[name="'+i+'"]')}catch(c){return}s.length&&(a=s.closest(".jspScrollable"),r=a.data("jsp"),r.scrollToElement(s,!0),a[0].scrollIntoView&&(o=t(e).scrollTop(),l=s.offset().top,(o>l||l>o+t(e).height())&&a[0].scrollIntoView()),n.preventDefault())}}))}function B(){var t,e,n,i,s,a=!1;U.unbind("touchstart.jsp touchmove.jsp touchend.jsp click.jsp-touchclick").bind("touchstart.jsp",function(r){var o=r.originalEvent.touches[0];t=P(),e=T(),n=o.pageX,i=o.pageY,s=!1,a=!0}).bind("touchmove.jsp",function(r){if(a){var o=r.originalEvent.touches[0],l=ie,p=te;return be.scrollTo(t+n-o.pageX,e+i-o.pageY),s=s||Math.abs(n-o.pageX)>5||Math.abs(i-o.pageY)>5,l==ie&&p==te}}).bind("touchend.jsp",function(){a=!1}).bind("click.jsp-touchclick",function(){return s?(s=!1,!1):void 0})}function F(){var t=T(),e=P();i.removeClass("jspScrollable").unbind(".jsp"),i.replaceWith(Pe.append(V.children())),Pe.scrollTop(t),Pe.scrollLeft(e),ve&&clearInterval(ve)}var q,V,z,N,U,X,W,Y,Q,G,J,K,Z,te,ee,ne,ie,se,ae,re,oe,le,pe,ue,ce,de,he,fe,me,ge,ve,ye,_e,we,be=this,ke=!0,Ce=!0,Me=!1,xe=!1,Pe=i.clone(!1,!1).empty(),Te=t.fn.mwheelIntent?"mwheelIntent.jsp":"mousewheel.jsp";"border-box"===i.css("box-sizing")?(ye=0,_e=0):(ye=i.css("paddingTop")+" "+i.css("paddingRight")+" "+i.css("paddingBottom")+" "+i.css("paddingLeft"),_e=(parseInt(i.css("paddingLeft"),10)||0)+(parseInt(i.css("paddingRight"),10)||0)),t.extend(be,{reinitialise:function(e){e=t.extend({},q,e),a(e)},scrollToElement:function(t,e,n){x(t,e,n)},scrollTo:function(t,e,n){M(t,n),C(e,n)},scrollToX:function(t,e){M(t,e)},scrollToY:function(t,e){C(t,e)},scrollToPercentX:function(t,e){M(t*(X-z),e)},scrollToPercentY:function(t,e){C(t*(W-N),e)},scrollBy:function(t,e,n){be.scrollByX(t,n),be.scrollByY(e,n)},scrollByX:function(t,e){var n=P()+Math[0>t?"floor":"ceil"](t),i=n/(X-z);_(i*ne,e)},scrollByY:function(t,e){var n=T()+Math[0>t?"floor":"ceil"](t),i=n/(W-N);v(i*Z,e)},positionDragX:function(t,e){_(t,e)},positionDragY:function(t,e){v(t,e)},animate:function(t,e,n,i){var s={};s[e]=n,t.animate(s,{duration:q.animateDuration,easing:q.animateEase,queue:!1,step:i})},getContentPositionX:function(){return P()},getContentPositionY:function(){return T()},getContentWidth:function(){return X},getContentHeight:function(){return W},getPercentScrolledX:function(){return P()/(X-z)},getPercentScrolledY:function(){return T()/(W-N)},getIsScrollableH:function(){return J},getIsScrollableV:function(){return G},getContentPane:function(){return V},scrollToBottom:function(t){v(Z,t)},hijackInternalLinks:t.noop,destroy:function(){F()}}),a(s)}return i=t.extend({},t.fn.jScrollPane.defaults,i),t.each(["arrowButtonSpeed","trackClickSpeed","keyboardSpeed"],function(){i[this]=i[this]||i.speed}),this.each(function(){var e=t(this),n=e.data("jsp");n?n.reinitialise(i):(t("script",e).filter('[type="text/javascript"],:not([type])').remove(),n=new s(e,i),e.data("jsp",n))})},t.fn.jScrollPane.defaults={showArrows:!1,maintainPosition:!0,stickToBottom:!1,stickToRight:!1,clickOnTrack:!0,autoReinitialise:!1,autoReinitialiseDelay:500,verticalDragMinHeight:0,verticalDragMaxHeight:99999,horizontalDragMinWidth:0,horizontalDragMaxWidth:99999,contentWidth:n,animateScroll:!1,animateDuration:300,animateEase:"linear",hijackInternalLinks:!1,verticalGutter:4,horizontalGutter:4,mouseWheelSpeed:3,arrowButtonSpeed:0,arrowRepeatFreq:50,arrowScrollOnHover:!1,trackClickSpeed:0,trackClickRepeatFreq:70,verticalArrowPositions:"split",horizontalArrowPositions:"split",enableKeyboardNavigation:!0,hideFocus:!1,keyboardSpeed:0,initialDelay:300,speed:30,scrollPagePercent:.8})}function e(t){if(!t.fn.cssExtended){var e=function(t){return t.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")},n=!!CSSStyleDeclaration.prototype.getPropertyValue;n||(CSSStyleDeclaration.prototype.getPropertyValue=function(t){return this.getAttribute(t)},CSSStyleDeclaration.prototype.setProperty=function(t,n,i){this.setAttribute(t,n);var i="undefined"!=typeof i?i:"";if(""!=i){var s=new RegExp(e(t)+"\\s*:\\s*"+e(n)+"(\\s*;)?","gmi");this.cssText=this.cssText.replace(s,t+": "+n+" !"+i+";")}},CSSStyleDeclaration.prototype.removeProperty=function(t){return this.removeAttribute(t)},CSSStyleDeclaration.prototype.getPropertyPriority=function(t){var n=new RegExp(e(t)+"\\s*:\\s*[^\\s]*\\s*!important(\\s*;)?","gmi");return n.test(this.cssText)?"important":""}),t.fn.cssExtended=function(t,e,n){var i=this.get(0);if("undefined"==typeof i)return this;var s=this.get(0).style;return"undefined"!=typeof t?"undefined"!=typeof e?(n="undefined"!=typeof n?n:"",s.setProperty(t,e,n),this):s.getPropertyValue(t):s}}}function n(t){var e=/(\b(https?|ftp|file):\/\/[-A-Z0-9+&@#\/%?=~_|!:,.;]*[-A-Z0-9+&@#\/%=~_|])/gi;return t.replace(e,"<a href='$1' target='_blank'>$1</a>")}function i(t,e){for(var n=t+"";n.length<e;)n="0"+n;return n}var s,a,r;!function(t){function e(t,e){return w.call(t,e)}function n(t,e){var n,i,s,a,r,o,l,p,u,c,d,h=e&&e.split("/"),f=y.map,m=f&&f["*"]||{};if(t&&"."===t.charAt(0))if(e){for(t=t.split("/"),r=t.length-1,y.nodeIdCompat&&k.test(t[r])&&(t[r]=t[r].replace(k,"")),t=h.slice(0,h.length-1).concat(t),u=0;u<t.length;u+=1)if(d=t[u],"."===d)t.splice(u,1),u-=1;else if(".."===d){if(1===u&&(".."===t[2]||".."===t[0]))break;u>0&&(t.splice(u-1,2),u-=2)}t=t.join("/")}else 0===t.indexOf("./")&&(t=t.substring(2));if((h||m)&&f){for(n=t.split("/"),u=n.length;u>0;u-=1){if(i=n.slice(0,u).join("/"),h)for(c=h.length;c>0;c-=1)if(s=f[h.slice(0,c).join("/")],s&&(s=s[i])){a=s,o=u;break}if(a)break;!l&&m&&m[i]&&(l=m[i],p=u)}!a&&l&&(a=l,o=p),a&&(n.splice(0,o,a),t=n.join("/"))}return t}function i(e,n){return function(){var i=b.call(arguments,0);return"string"!=typeof i[0]&&1===i.length&&i.push(null),h.apply(t,i.concat([e,n]))}}function o(t){return function(e){return n(e,t)}}function l(t){return function(e){g[t]=e}}function p(n){if(e(v,n)){var i=v[n];delete v[n],_[n]=!0,d.apply(t,i)}if(!e(g,n)&&!e(_,n))throw new Error("No "+n);return g[n]}function u(t){var e,n=t?t.indexOf("!"):-1;return n>-1&&(e=t.substring(0,n),t=t.substring(n+1,t.length)),[e,t]}function c(t){return function(){return y&&y.config&&y.config[t]||{}}}var d,h,f,m,g={},v={},y={},_={},w=Object.prototype.hasOwnProperty,b=[].slice,k=/\.js$/;f=function(t,e){var i,s=u(t),a=s[0];return t=s[1],a&&(a=n(a,e),i=p(a)),a?t=i&&i.normalize?i.normalize(t,o(e)):n(t,e):(t=n(t,e),s=u(t),a=s[0],t=s[1],a&&(i=p(a))),{f:a?a+"!"+t:t,n:t,pr:a,p:i}},m={require:function(t){return i(t)},exports:function(t){var e=g[t];return"undefined"!=typeof e?e:g[t]={}},module:function(t){return{id:t,uri:"",exports:g[t],config:c(t)}}},d=function(n,s,a,r){var o,u,c,d,h,y,w=[],b=typeof a;if(r=r||n,"undefined"===b||"function"===b){for(s=!s.length&&a.length?["require","exports","module"]:s,h=0;h<s.length;h+=1)if(d=f(s[h],r),u=d.f,"require"===u)w[h]=m.require(n);else if("exports"===u)w[h]=m.exports(n),y=!0;else if("module"===u)o=w[h]=m.module(n);else if(e(g,u)||e(v,u)||e(_,u))w[h]=p(u);else{if(!d.p)throw new Error(n+" missing "+u);d.p.load(d.n,i(r,!0),l(u),{}),w[h]=g[u]}c=a?a.apply(g[n],w):void 0,n&&(o&&o.exports!==t&&o.exports!==g[n]?g[n]=o.exports:c===t&&y||(g[n]=c))}else n&&(g[n]=a)},s=a=h=function(e,n,i,s,a){if("string"==typeof e)return m[e]?m[e](n):p(f(e,n).f);if(!e.splice){if(y=e,y.deps&&h(y.deps,y.callback),!n)return;n.splice?(e=n,n=i,i=null):e=t}return n=n||function(){},"function"==typeof i&&(i=s,s=a),s?d(t,e,n,i):setTimeout(function(){d(t,e,n,i)},4),h},h.config=function(t){return h(t)},s._defined=g,r=function(t,n,i){if("string"!=typeof t)throw new Error("See almond README: incorrect module build, no module name");n.splice||(i=n,n=[]),e(g,t)||e(v,t)||(v[t]=[t,n,i])},r.amd={jQuery:!0}}(),r("vendor/almond",function(){}),function(t,e){"undefined"!=typeof exports?e(t,exports,a("underscore")):"function"==typeof r&&r.amd?r("backbone",["underscore","jquery","exports"],function(n,i,s){t.Backbone=e(t,s,n,i)}):t.Backbone=e(t,{},t._,t.jQuery||t.Zepto||t.ender||t.$)}(this,function(t,e,n,i){{var s=t.Backbone,a=[],r=(a.push,a.slice);a.splice}e.VERSION="1.1.0",e.$=i,e.noConflict=function(){return t.Backbone=s,this},e.emulateHTTP=!1,e.emulateJSON=!1;var o=e.Events={on:function(t,e,n){if(!p(this,"on",t,[e,n])||!e)return this;this._events||(this._events={});var i=this._events[t]||(this._events[t]=[]);return i.push({callback:e,context:n,ctx:n||this}),this},once:function(t,e,i){if(!p(this,"once",t,[e,i])||!e)return this;var s=this,a=n.once(function(){s.off(t,a),e.apply(this,arguments)});return a._callback=e,this.on(t,a,i)},off:function(t,e,i){var s,a,r,o,l,u,c,d;if(!this._events||!p(this,"off",t,[e,i]))return this;if(!t&&!e&&!i)return this._events={},this;for(o=t?[t]:n.keys(this._events),l=0,u=o.length;u>l;l++)if(t=o[l],r=this._events[t]){if(this._events[t]=s=[],e||i)for(c=0,d=r.length;d>c;c++)a=r[c],(e&&e!==a.callback&&e!==a.callback._callback||i&&i!==a.context)&&s.push(a);s.length||delete this._events[t]}return this},trigger:function(t){if(!this._events)return this;var e=r.call(arguments,1);if(!p(this,"trigger",t,e))return this;var n=this._events[t],i=this._events.all;return n&&u(n,e),i&&u(i,arguments),this},stopListening:function(t,e,i){var s=this._listeningTo;if(!s)return this;var a=!e&&!i;i||"object"!=typeof e||(i=this),t&&((s={})[t._listenId]=t);for(var r in s)t=s[r],t.off(e,i,this),(a||n.isEmpty(t._events))&&delete this._listeningTo[r];return this}},l=/\s+/,p=function(t,e,n,i){if(!n)return!0;if("object"==typeof n){for(var s in n)t[e].apply(t,[s,n[s]].concat(i));return!1}if(l.test(n)){for(var a=n.split(l),r=0,o=a.length;o>r;r++)t[e].apply(t,[a[r]].concat(i));return!1}return!0},u=function(t,e){var n,i=-1,s=t.length,a=e[0],r=e[1],o=e[2];switch(e.length){case 0:for(;++i<s;)(n=t[i]).callback.call(n.ctx);return;case 1:for(;++i<s;)(n=t[i]).callback.call(n.ctx,a);return;case 2:for(;++i<s;)(n=t[i]).callback.call(n.ctx,a,r);return;case 3:for(;++i<s;)(n=t[i]).callback.call(n.ctx,a,r,o);return;default:for(;++i<s;)(n=t[i]).callback.apply(n.ctx,e)}},c={listenTo:"on",listenToOnce:"once"};n.each(c,function(t,e){o[e]=function(e,i,s){var a=this._listeningTo||(this._listeningTo={}),r=e._listenId||(e._listenId=n.uniqueId("l"));return a[r]=e,s||"object"!=typeof i||(s=this),e[t](i,s,this),this}}),o.bind=o.on,o.unbind=o.off,n.extend(e,o);var d=e.Model=function(t,e){var i=t||{};e||(e={}),this.cid=n.uniqueId("c"),this.attributes={},e.collection&&(this.collection=e.collection),e.parse&&(i=this.parse(i,e)||{}),i=n.defaults({},i,n.result(this,"defaults")),this.set(i,e),this.changed={},this.initialize.apply(this,arguments)};n.extend(d.prototype,o,{changed:null,validationError:null,idAttribute:"id",initialize:function(){},toJSON:function(){return n.clone(this.attributes)},sync:function(){return e.sync.apply(this,arguments)},get:function(t){return this.attributes[t]},escape:function(t){return n.escape(this.get(t))},has:function(t){return null!=this.get(t)},set:function(t,e,i){var s,a,r,o,l,p,u,c;if(null==t)return this;if("object"==typeof t?(a=t,i=e):(a={})[t]=e,i||(i={}),!this._validate(a,i))return!1;r=i.unset,l=i.silent,o=[],p=this._changing,this._changing=!0,p||(this._previousAttributes=n.clone(this.attributes),this.changed={}),c=this.attributes,u=this._previousAttributes,this.idAttribute in a&&(this.id=a[this.idAttribute]);for(s in a)e=a[s],n.isEqual(c[s],e)||o.push(s),n.isEqual(u[s],e)?delete this.changed[s]:this.changed[s]=e,r?delete c[s]:c[s]=e;if(!l){o.length&&(this._pending=!0);for(var d=0,h=o.length;h>d;d++)this.trigger("change:"+o[d],this,c[o[d]],i)}if(p)return this;if(!l)for(;this._pending;)this._pending=!1,this.trigger("change",this,i);return this._pending=!1,this._changing=!1,this},unset:function(t,e){return this.set(t,void 0,n.extend({},e,{unset:!0}))},clear:function(t){var e={};for(var i in this.attributes)e[i]=void 0;return this.set(e,n.extend({},t,{unset:!0}))},hasChanged:function(t){return null==t?!n.isEmpty(this.changed):n.has(this.changed,t)},changedAttributes:function(t){if(!t)return this.hasChanged()?n.clone(this.changed):!1;var e,i=!1,s=this._changing?this._previousAttributes:this.attributes;for(var a in t)n.isEqual(s[a],e=t[a])||((i||(i={}))[a]=e);return i},previous:function(t){return null!=t&&this._previousAttributes?this._previousAttributes[t]:null},previousAttributes:function(){return n.clone(this._previousAttributes)},fetch:function(t){t=t?n.clone(t):{},void 0===t.parse&&(t.parse=!0);var e=this,i=t.success;return t.success=function(n){return e.set(e.parse(n,t),t)?(i&&i(e,n,t),void e.trigger("sync",e,n,t)):!1},L(this,t),this.sync("read",this,t)},save:function(t,e,i){var s,a,r,o=this.attributes;if(null==t||"object"==typeof t?(s=t,i=e):(s={})[t]=e,i=n.extend({validate:!0},i),s&&!i.wait){if(!this.set(s,i))return!1}else if(!this._validate(s,i))return!1;s&&i.wait&&(this.attributes=n.extend({},o,s)),void 0===i.parse&&(i.parse=!0);var l=this,p=i.success;return i.success=function(t){l.attributes=o;var e=l.parse(t,i);return i.wait&&(e=n.extend(s||{},e)),n.isObject(e)&&!l.set(e,i)?!1:(p&&p(l,t,i),void l.trigger("sync",l,t,i))},L(this,i),a=this.isNew()?"create":i.patch?"patch":"update","patch"===a&&(i.attrs=s),r=this.sync(a,this,i),s&&i.wait&&(this.attributes=o),r},destroy:function(t){t=t?n.clone(t):{};var e=this,i=t.success,s=function(){e.trigger("destroy",e,e.collection,t)};if(t.success=function(n){(t.wait||e.isNew())&&s(),i&&i(e,n,t),e.isNew()||e.trigger("sync",e,n,t)},this.isNew())return t.success(),!1;L(this,t);var a=this.sync("delete",this,t);return t.wait||s(),a},url:function(){var t=n.result(this,"urlRoot")||n.result(this.collection,"url")||H();return this.isNew()?t:t+("/"===t.charAt(t.length-1)?"":"/")+encodeURIComponent(this.id)},parse:function(t){return t},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return null==this.id},isValid:function(t){return this._validate({},n.extend(t||{},{validate:!0}))},_validate:function(t,e){if(!e.validate||!this.validate)return!0;t=n.extend({},this.attributes,t);var i=this.validationError=this.validate(t,e)||null;return i?(this.trigger("invalid",this,i,n.extend(e,{validationError:i})),!1):!0}});var h=["keys","values","pairs","invert","pick","omit"];n.each(h,function(t){d.prototype[t]=function(){var e=r.call(arguments);return e.unshift(this.attributes),n[t].apply(n,e)}});var f=e.Collection=function(t,e){e||(e={}),e.model&&(this.model=e.model),void 0!==e.comparator&&(this.comparator=e.comparator),this._reset(),this.initialize.apply(this,arguments),t&&this.reset(t,n.extend({silent:!0},e))},m={add:!0,remove:!0,merge:!0},g={add:!0,remove:!1};n.extend(f.prototype,o,{model:d,initialize:function(){},toJSON:function(t){return this.map(function(e){return e.toJSON(t)})},sync:function(){return e.sync.apply(this,arguments)},add:function(t,e){return this.set(t,n.extend({merge:!1},e,g))},remove:function(t,e){var i=!n.isArray(t);t=i?[t]:n.clone(t),e||(e={});var s,a,r,o;for(s=0,a=t.length;a>s;s++)o=t[s]=this.get(t[s]),o&&(delete this._byId[o.id],delete this._byId[o.cid],r=this.indexOf(o),this.models.splice(r,1),this.length--,e.silent||(e.index=r,o.trigger("remove",o,this,e)),this._removeReference(o));return i?t[0]:t},set:function(t,e){e=n.defaults({},e,m),e.parse&&(t=this.parse(t,e));var i=!n.isArray(t);t=i?t?[t]:[]:n.clone(t);var s,a,r,o,l,p,u,c=e.at,h=this.model,f=this.comparator&&null==c&&e.sort!==!1,g=n.isString(this.comparator)?this.comparator:null,v=[],y=[],_={},w=e.add,b=e.merge,k=e.remove,C=!f&&w&&k?[]:!1;for(s=0,a=t.length;a>s;s++){if(l=t[s],r=l instanceof d?o=l:l[h.prototype.idAttribute],p=this.get(r))k&&(_[p.cid]=!0),b&&(l=l===o?o.attributes:l,e.parse&&(l=p.parse(l,e)),p.set(l,e),f&&!u&&p.hasChanged(g)&&(u=!0)),t[s]=p;else if(w){if(o=t[s]=this._prepareModel(l,e),!o)continue;v.push(o),o.on("all",this._onModelEvent,this),this._byId[o.cid]=o,null!=o.id&&(this._byId[o.id]=o)}C&&C.push(p||o)}if(k){for(s=0,a=this.length;a>s;++s)_[(o=this.models[s]).cid]||y.push(o);y.length&&this.remove(y,e)}if(v.length||C&&C.length)if(f&&(u=!0),this.length+=v.length,null!=c)for(s=0,a=v.length;a>s;s++)this.models.splice(c+s,0,v[s]);else{C&&(this.models.length=0);var M=C||v;for(s=0,a=M.length;a>s;s++)this.models.push(M[s])}if(u&&this.sort({silent:!0}),!e.silent){for(s=0,a=v.length;a>s;s++)(o=v[s]).trigger("add",o,this,e);(u||C&&C.length)&&this.trigger("sort",this,e)}return i?t[0]:t},reset:function(t,e){e||(e={});for(var i=0,s=this.models.length;s>i;i++)this._removeReference(this.models[i]);return e.previousModels=this.models,this._reset(),t=this.add(t,n.extend({silent:!0},e)),e.silent||this.trigger("reset",this,e),t},push:function(t,e){return this.add(t,n.extend({at:this.length},e))},pop:function(t){var e=this.at(this.length-1);return this.remove(e,t),e},unshift:function(t,e){return this.add(t,n.extend({at:0},e))},shift:function(t){var e=this.at(0);return this.remove(e,t),e},slice:function(){return r.apply(this.models,arguments)},get:function(t){return null==t?void 0:this._byId[t.id]||this._byId[t.cid]||this._byId[t]},at:function(t){return this.models[t]},where:function(t,e){return n.isEmpty(t)?e?void 0:[]:this[e?"find":"filter"](function(e){for(var n in t)if(t[n]!==e.get(n))return!1;return!0})},findWhere:function(t){return this.where(t,!0)},sort:function(t){if(!this.comparator)throw new Error("Cannot sort a set without a comparator");return t||(t={}),n.isString(this.comparator)||1===this.comparator.length?this.models=this.sortBy(this.comparator,this):this.models.sort(n.bind(this.comparator,this)),t.silent||this.trigger("sort",this,t),this},pluck:function(t){return n.invoke(this.models,"get",t)},fetch:function(t){t=t?n.clone(t):{},void 0===t.parse&&(t.parse=!0);var e=t.success,i=this;return t.success=function(n){var s=t.reset?"reset":"set";i[s](n,t),e&&e(i,n,t),i.trigger("sync",i,n,t)},L(this,t),this.sync("read",this,t)},create:function(t,e){if(e=e?n.clone(e):{},!(t=this._prepareModel(t,e)))return!1;e.wait||this.add(t,e);var i=this,s=e.success;return e.success=function(t,e,n){n.wait&&i.add(t,n),s&&s(t,e,n)},t.save(null,e),t},parse:function(t){return t},clone:function(){return new this.constructor(this.models)},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(t,e){if(t instanceof d)return t.collection||(t.collection=this),t;e=e?n.clone(e):{},e.collection=this;var i=new this.model(t,e);return i.validationError?(this.trigger("invalid",this,i.validationError,e),!1):i},_removeReference:function(t){this===t.collection&&delete t.collection,t.off("all",this._onModelEvent,this)},_onModelEvent:function(t,e,n,i){("add"!==t&&"remove"!==t||n===this)&&("destroy"===t&&this.remove(e,i),e&&t==="change:"+e.idAttribute&&(delete this._byId[e.previous(e.idAttribute)],null!=e.id&&(this._byId[e.id]=e)),this.trigger.apply(this,arguments))}});var v=["forEach","each","map","collect","reduce","foldl","inject","reduceRight","foldr","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","max","min","toArray","size","first","head","take","initial","rest","tail","drop","last","without","difference","indexOf","shuffle","lastIndexOf","isEmpty","chain"];n.each(v,function(t){f.prototype[t]=function(){var e=r.call(arguments);return e.unshift(this.models),n[t].apply(n,e)}});var y=["groupBy","countBy","sortBy"];n.each(y,function(t){f.prototype[t]=function(e,i){var s=n.isFunction(e)?e:function(t){return t.get(e)};return n[t](this.models,s,i)}});var _=e.View=function(t){this.cid=n.uniqueId("view"),t||(t={}),n.extend(this,n.pick(t,b)),this._ensureElement(),this.initialize.apply(this,arguments),this.delegateEvents()},w=/^(\S+)\s*(.*)$/,b=["model","collection","el","id","attributes","className","tagName","events"];n.extend(_.prototype,o,{tagName:"div",$:function(t){return this.$el.find(t)},initialize:function(){},render:function(){return this},remove:function(){return this.$el.remove(),this.stopListening(),this},setElement:function(t,n){return this.$el&&this.undelegateEvents(),this.$el=t instanceof e.$?t:e.$(t),this.el=this.$el[0],n!==!1&&this.delegateEvents(),this},delegateEvents:function(t){if(!t&&!(t=n.result(this,"events")))return this;this.undelegateEvents();for(var e in t){var i=t[e];if(n.isFunction(i)||(i=this[t[e]]),i){var s=e.match(w),a=s[1],r=s[2];i=n.bind(i,this),a+=".delegateEvents"+this.cid,""===r?this.$el.on(a,i):this.$el.on(a,r,i)}}return this},undelegateEvents:function(){return this.$el.off(".delegateEvents"+this.cid),this},_ensureElement:function(){if(this.el)this.setElement(n.result(this,"el"),!1);else{var t=n.extend({},n.result(this,"attributes"));this.id&&(t.id=n.result(this,"id")),this.className&&(t["class"]=n.result(this,"className"));var i=e.$("<"+n.result(this,"tagName")+">").attr(t);this.setElement(i,!1)}}}),e.sync=function(t,i,s){var a=C[t];n.defaults(s||(s={}),{emulateHTTP:e.emulateHTTP,emulateJSON:e.emulateJSON});var r={type:a,dataType:"json"};if(s.url||(r.url=n.result(i,"url")||H()),null!=s.data||!i||"create"!==t&&"update"!==t&&"patch"!==t||(r.contentType="application/json",r.data=JSON.stringify(s.attrs||i.toJSON(s))),s.emulateJSON&&(r.contentType="application/x-www-form-urlencoded",r.data=r.data?{model:r.data}:{}),s.emulateHTTP&&("PUT"===a||"DELETE"===a||"PATCH"===a)){r.type="POST",s.emulateJSON&&(r.data._method=a);var o=s.beforeSend;s.beforeSend=function(t){return t.setRequestHeader("X-HTTP-Method-Override",a),o?o.apply(this,arguments):void 0}}"GET"===r.type||s.emulateJSON||(r.processData=!1),"PATCH"===r.type&&k&&(r.xhr=function(){return new ActiveXObject("Microsoft.XMLHTTP")});var l=s.xhr=e.ajax(n.extend(r,s));return i.trigger("request",i,l,s),l};var k=!("undefined"==typeof window||!window.ActiveXObject||window.XMLHttpRequest&&(new XMLHttpRequest).dispatchEvent),C={create:"POST",update:"PUT",patch:"PATCH","delete":"DELETE",read:"GET"};
e.ajax=function(){return e.$.ajax.apply(e.$,arguments)};var M=e.Router=function(t){t||(t={}),t.routes&&(this.routes=t.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},x=/\((.*?)\)/g,P=/(\(\?)?:\w+/g,T=/\*\w+/g,O=/[\-{}\[\]+?.,\\\^$|#\s]/g;n.extend(M.prototype,o,{initialize:function(){},route:function(t,i,s){n.isRegExp(t)||(t=this._routeToRegExp(t)),n.isFunction(i)&&(s=i,i=""),s||(s=this[i]);var a=this;return e.history.route(t,function(n){var r=a._extractParameters(t,n);s&&s.apply(a,r),a.trigger.apply(a,["route:"+i].concat(r)),a.trigger("route",i,r),e.history.trigger("route",a,i,r)}),this},navigate:function(t,n){return e.history.navigate(t,n),this},_bindRoutes:function(){if(this.routes){this.routes=n.result(this,"routes");for(var t,e=n.keys(this.routes);null!=(t=e.pop());)this.route(t,this.routes[t])}},_routeToRegExp:function(t){return t=t.replace(O,"\\$&").replace(x,"(?:$1)?").replace(P,function(t,e){return e?t:"([^/]+)"}).replace(T,"(.*?)"),new RegExp("^"+t+"$")},_extractParameters:function(t,e){var i=t.exec(e).slice(1);return n.map(i,function(t){return t?decodeURIComponent(t):null})}});var E=e.History=function(){this.handlers=[],n.bindAll(this,"checkUrl"),"undefined"!=typeof window&&(this.location=window.location,this.history=window.history)},j=/^[#\/]|\s+$/g,S=/^\/+|\/+$/g,A=/msie [\w.]+/,I=/\/$/,$=/[?#].*$/;E.started=!1,n.extend(E.prototype,o,{interval:50,getHash:function(t){var e=(t||this).location.href.match(/#(.*)$/);return e?e[1]:""},getFragment:function(t,e){if(null==t)if(this._hasPushState||!this._wantsHashChange||e){t=this.location.pathname;var n=this.root.replace(I,"");t.indexOf(n)||(t=t.slice(n.length))}else t=this.getHash();return t.replace(j,"")},start:function(t){if(E.started)throw new Error("Backbone.history has already been started");E.started=!0,this.options=n.extend({root:"/"},this.options,t),this.root=this.options.root,this._wantsHashChange=this.options.hashChange!==!1,this._wantsPushState=!!this.options.pushState,this._hasPushState=!!(this.options.pushState&&this.history&&this.history.pushState);var i=this.getFragment(),s=document.documentMode,a=A.exec(navigator.userAgent.toLowerCase())&&(!s||7>=s);this.root=("/"+this.root+"/").replace(S,"/"),a&&this._wantsHashChange&&(this.iframe=e.$('<iframe src="javascript:0" tabindex="-1" />').hide().appendTo("body")[0].contentWindow,this.navigate(i)),this._hasPushState?e.$(window).on("popstate",this.checkUrl):this._wantsHashChange&&"onhashchange"in window&&!a?e.$(window).on("hashchange",this.checkUrl):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),this.fragment=i;var r=this.location,o=r.pathname.replace(/[^\/]$/,"$&/")===this.root;if(this._wantsHashChange&&this._wantsPushState){if(!this._hasPushState&&!o)return this.fragment=this.getFragment(null,!0),this.location.replace(this.root+this.location.search+"#"+this.fragment),!0;this._hasPushState&&o&&r.hash&&(this.fragment=this.getHash().replace(j,""),this.history.replaceState({},document.title,this.root+this.fragment+r.search))}return this.options.silent?void 0:this.loadUrl()},stop:function(){e.$(window).off("popstate",this.checkUrl).off("hashchange",this.checkUrl),clearInterval(this._checkUrlInterval),E.started=!1},route:function(t,e){this.handlers.unshift({route:t,callback:e})},checkUrl:function(){var t=this.getFragment();return t===this.fragment&&this.iframe&&(t=this.getFragment(this.getHash(this.iframe))),t===this.fragment?!1:(this.iframe&&this.navigate(t),void this.loadUrl())},loadUrl:function(t){return t=this.fragment=this.getFragment(t),n.any(this.handlers,function(e){return e.route.test(t)?(e.callback(t),!0):void 0})},navigate:function(t,e){if(!E.started)return!1;e&&e!==!0||(e={trigger:!!e});var n=this.root+(t=this.getFragment(t||""));if(t=t.replace($,""),this.fragment!==t){if(this.fragment=t,""===t&&"/"!==n&&(n=n.slice(0,-1)),this._hasPushState)this.history[e.replace?"replaceState":"pushState"]({},document.title,n);else{if(!this._wantsHashChange)return this.location.assign(n);this._updateHash(this.location,t,e.replace),this.iframe&&t!==this.getFragment(this.getHash(this.iframe))&&(e.replace||this.iframe.document.open().close(),this._updateHash(this.iframe.location,t,e.replace))}return e.trigger?this.loadUrl(t):void 0}},_updateHash:function(t,e,n){if(n){var i=t.href.replace(/(javascript:|#).*$/,"");t.replace(i+"#"+e)}else t.hash="#"+e}}),e.history=new E;var R=function(t,e){var i,s=this;i=t&&n.has(t,"constructor")?t.constructor:function(){return s.apply(this,arguments)},n.extend(i,s,e);var a=function(){this.constructor=i};return a.prototype=s.prototype,i.prototype=new a,t&&n.extend(i.prototype,t),i.__super__=s.prototype,i};d.extend=f.extend=M.extend=_.extend=E.extend=R;var H=function(){throw new Error('A "url" property or function must be specified')},L=function(t,e){var n=e.error;e.error=function(i){n&&n(t,i,e),t.trigger("error",t,i,e)}};return e}),function(t,e){if("object"==typeof exports){var n=a("underscore"),i=a("backbone");module.exports=e(n,i)}else"function"==typeof r&&r.amd&&r("backbone.wreqr",["underscore","backbone"],e)}(this,function(t,e){"use strict";return e.Wreqr=function(t,e,n){var i={};return i.Handlers=function(t,e){var n=function(t){this.options=t,this._wreqrHandlers={},e.isFunction(this.initialize)&&this.initialize(t)};return n.extend=t.Model.extend,e.extend(n.prototype,t.Events,{setHandlers:function(t){e.each(t,function(t,n){var i=null;e.isObject(t)&&!e.isFunction(t)&&(i=t.context,t=t.callback),this.setHandler(n,t,i)},this)},setHandler:function(t,e,n){var i={callback:e,context:n};this._wreqrHandlers[t]=i,this.trigger("handler:add",t,e,n)},hasHandler:function(t){return!!this._wreqrHandlers[t]},getHandler:function(t){var e=this._wreqrHandlers[t];if(!e)throw new Error("Handler not found for '"+t+"'");return function(){var t=Array.prototype.slice.apply(arguments);return e.callback.apply(e.context,t)}},removeHandler:function(t){delete this._wreqrHandlers[t]},removeAllHandlers:function(){this._wreqrHandlers={}}}),n}(t,n),i.CommandStorage=function(){var e=function(t){this.options=t,this._commands={},n.isFunction(this.initialize)&&this.initialize(t)};return n.extend(e.prototype,t.Events,{getCommands:function(t){var e=this._commands[t];return e||(e={command:t,instances:[]},this._commands[t]=e),e},addCommand:function(t,e){var n=this.getCommands(t);n.instances.push(e)},clearCommands:function(t){var e=this.getCommands(t);e.instances=[]}}),e}(),i.Commands=function(t){return t.Handlers.extend({storageType:t.CommandStorage,constructor:function(e){this.options=e||{},this._initializeStorage(this.options),this.on("handler:add",this._executeCommands,this);var n=Array.prototype.slice.call(arguments);t.Handlers.prototype.constructor.apply(this,n)},execute:function(t,e){t=arguments[0],e=Array.prototype.slice.call(arguments,1),this.hasHandler(t)?this.getHandler(t).apply(this,e):this.storage.addCommand(t,e)},_executeCommands:function(t,e,i){var s=this.storage.getCommands(t);n.each(s.instances,function(t){e.apply(i,t)}),this.storage.clearCommands(t)},_initializeStorage:function(t){var e,i=t.storageType||this.storageType;e=n.isFunction(i)?new i:i,this.storage=e}})}(i),i.RequestResponse=function(t){return t.Handlers.extend({request:function(){var t=arguments[0],e=Array.prototype.slice.call(arguments,1);return this.getHandler(t).apply(this,e)}})}(i),i.EventAggregator=function(t,e){var n=function(){};return n.extend=t.Model.extend,e.extend(n.prototype,t.Events),n}(t,n),i}(e,e.Marionette,t),e.Wreqr}),function(t,e){if("object"==typeof exports){var n=a("underscore"),i=a("backbone");module.exports=e(n,i)}else"function"==typeof r&&r.amd&&r("backbone.babysitter",["underscore","backbone"],e)}(this,function(t,e){"option strict";return e.ChildViewContainer=function(t,e){var n=function(t){this._views={},this._indexByModel={},this._indexByCustom={},this._updateLength(),e.each(t,this.add,this)};e.extend(n.prototype,{add:function(t,e){var n=t.cid;return this._views[n]=t,t.model&&(this._indexByModel[t.model.cid]=n),e&&(this._indexByCustom[e]=n),this._updateLength(),this},findByModel:function(t){return this.findByModelCid(t.cid)},findByModelCid:function(t){var e=this._indexByModel[t];return this.findByCid(e)},findByCustom:function(t){var e=this._indexByCustom[t];return this.findByCid(e)},findByIndex:function(t){return e.values(this._views)[t]},findByCid:function(t){return this._views[t]},remove:function(t){var n=t.cid;return t.model&&delete this._indexByModel[t.model.cid],e.any(this._indexByCustom,function(t,e){return t===n?(delete this._indexByCustom[e],!0):void 0},this),delete this._views[n],this._updateLength(),this},call:function(t){this.apply(t,e.tail(arguments))},apply:function(t,n){e.each(this._views,function(i){e.isFunction(i[t])&&i[t].apply(i,n||[])})},_updateLength:function(){this.length=e.size(this._views)}});var i=["forEach","each","map","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","toArray","first","initial","rest","last","without","isEmpty","pluck"];return e.each(i,function(t){n.prototype[t]=function(){var n=e.values(this._views),i=[n].concat(e.toArray(arguments));return e[t].apply(e,i)}}),n}(e,t),e.ChildViewContainer}),function(t,e){if("object"==typeof exports){var n=a("underscore"),i=a("backbone"),s=a("backbone.wreqr"),o=a("backbone.babysitter");module.exports=e(n,i,s,o)}else"function"==typeof r&&r.amd&&r("marionette",["underscore","backbone","backbone.wreqr","backbone.babysitter"],e)}(this,function(t,e){!function(t,e,n){"use strict";function i(t){return r.call(t)}function s(t,e){var n=new Error(t);throw n.name=e||"Error",n}var a={};e.Marionette=a,a.$=e.$;var r=Array.prototype.slice;return a.extend=e.Model.extend,a.getOption=function(t,e){if(t&&e){var n;return n=t.options&&e in t.options&&void 0!==t.options[e]?t.options[e]:t[e]}},a.normalizeMethods=function(t){var e,i={};return n.each(t,function(t,s){e=t,n.isFunction(e)||(e=this[e]),e&&(i[s]=e)},this),i},a.triggerMethod=function(){function t(t,e,n){return n.toUpperCase()}var e=/(^|:)(\w)/gi,i=function(i){var s="on"+i.replace(e,t),a=this[s];return n.isFunction(this.trigger)&&this.trigger.apply(this,arguments),n.isFunction(a)?a.apply(this,n.tail(arguments)):void 0};return i}(),a.MonitorDOMRefresh=function(t){function e(t){t._isShown=!0,s(t)}function i(t){t._isRendered=!0,s(t)}function s(t){t._isShown&&t._isRendered&&a(t)&&n.isFunction(t.triggerMethod)&&t.triggerMethod("dom:refresh")}function a(e){return t.contains(e.el)}return function(t){t.listenTo(t,"show",function(){e(t)}),t.listenTo(t,"render",function(){i(t)})}}(document.documentElement),function(t){function e(t,e,i,a){var r=a.split(/\s+/);n.each(r,function(n){var a=t[n];a||s("Method '"+n+"' was configured as an event handler, but does not exist."),t.listenTo(e,i,a,t)})}function i(t,e,n,i){t.listenTo(e,n,i,t)}function a(t,e,i,s){var a=s.split(/\s+/);n.each(a,function(n){var s=t[n];t.stopListening(e,i,s,t)})}function r(t,e,n,i){t.stopListening(e,n,i,t)}function o(t,e,i,s,a){e&&i&&(n.isFunction(i)&&(i=i.call(t)),n.each(i,function(i,r){n.isFunction(i)?s(t,e,r,i):a(t,e,r,i)}))}t.bindEntityEvents=function(t,n,s){o(t,n,s,i,e)},t.unbindEntityEvents=function(t,e,n){o(t,e,n,r,a)}}(a),a.Callbacks=function(){this._deferred=a.$.Deferred(),this._callbacks=[]},n.extend(a.Callbacks.prototype,{add:function(t,e){this._callbacks.push({cb:t,ctx:e}),this._deferred.done(function(n,i){e&&(n=e),t.call(n,i)})},run:function(t,e){this._deferred.resolve(e,t)},reset:function(){var t=this._callbacks;this._deferred=a.$.Deferred(),this._callbacks=[],n.each(t,function(t){this.add(t.cb,t.ctx)},this)}}),a.Controller=function(t){this.triggerMethod=a.triggerMethod,this.options=t||{},n.isFunction(this.initialize)&&this.initialize(this.options)},a.Controller.extend=a.extend,n.extend(a.Controller.prototype,e.Events,{close:function(){this.stopListening(),this.triggerMethod("close"),this.unbind()}}),a.Region=function(t){if(this.options=t||{},this.el=a.getOption(this,"el"),!this.el){var e=new Error("An 'el' must be specified for a region.");throw e.name="NoElError",e}if(this.initialize){var n=Array.prototype.slice.apply(arguments);this.initialize.apply(this,n)}},n.extend(a.Region,{buildRegion:function(t,e){var i="string"==typeof t,s="string"==typeof t.selector,a="undefined"==typeof t.regionType,r="function"==typeof t;if(!r&&!i&&!s)throw new Error("Region must be specified as a Region type, a selector string or an object with selector property");var o,l;i&&(o=t),t.selector&&(o=t.selector,delete t.selector),r&&(l=t),!r&&a&&(l=e),t.regionType&&(l=t.regionType,delete t.regionType),(i||r)&&(t={}),t.el=o;var p=new l(t);return t.parentEl&&(p.getEl=function(e){var i=t.parentEl;return n.isFunction(i)&&(i=i()),i.find(e)}),p}}),n.extend(a.Region.prototype,e.Events,{show:function(t){this.ensureEl();var e=t.isClosed||n.isUndefined(t.$el),i=t!==this.currentView;i&&this.close(),t.render(),(i||e)&&this.open(t),this.currentView=t,a.triggerMethod.call(this,"show",t),a.triggerMethod.call(t,"show")},ensureEl:function(){this.$el&&0!==this.$el.length||(this.$el=this.getEl(this.el))},getEl:function(t){return a.$(t)},open:function(t){this.$el.empty().append(t.el)},close:function(){var t=this.currentView;t&&!t.isClosed&&(t.close?t.close():t.remove&&t.remove(),a.triggerMethod.call(this,"close",t),delete this.currentView)},attachView:function(t){this.currentView=t},reset:function(){this.close(),delete this.$el}}),a.Region.extend=a.extend,a.RegionManager=function(t){var e=t.Controller.extend({constructor:function(e){this._regions={},t.Controller.prototype.constructor.call(this,e)},addRegions:function(t,e){var i={};return n.each(t,function(t,s){"string"==typeof t&&(t={selector:t}),t.selector&&(t=n.defaults({},t,e));var a=this.addRegion(s,t);i[s]=a},this),i},addRegion:function(e,i){var s,a=n.isObject(i),r=n.isString(i),o=!!i.selector;return s=r||a&&o?t.Region.buildRegion(i,t.Region):n.isFunction(i)?t.Region.buildRegion(i,t.Region):i,this._store(e,s),this.triggerMethod("region:add",e,s),s},get:function(t){return this._regions[t]},removeRegion:function(t){var e=this._regions[t];this._remove(t,e)},removeRegions:function(){n.each(this._regions,function(t,e){this._remove(e,t)},this)},closeRegions:function(){n.each(this._regions,function(t){t.close()},this)},close:function(){this.removeRegions();var e=Array.prototype.slice.call(arguments);t.Controller.prototype.close.apply(this,e)},_store:function(t,e){this._regions[t]=e,this._setLength()},_remove:function(t,e){e.close(),delete this._regions[t],this._setLength(),this.triggerMethod("region:remove",t,e)},_setLength:function(){this.length=n.size(this._regions)}}),i=["forEach","each","map","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","toArray","first","initial","rest","last","without","isEmpty","pluck"];return n.each(i,function(t){e.prototype[t]=function(){var e=n.values(this._regions),i=[e].concat(n.toArray(arguments));return n[t].apply(n,i)}}),e}(a),a.TemplateCache=function(t){this.templateId=t},n.extend(a.TemplateCache,{templateCaches:{},get:function(t){var e=this.templateCaches[t];return e||(e=new a.TemplateCache(t),this.templateCaches[t]=e),e.load()},clear:function(){var t,e=i(arguments),n=e.length;if(n>0)for(t=0;n>t;t++)delete this.templateCaches[e[t]];else this.templateCaches={}}}),n.extend(a.TemplateCache.prototype,{load:function(){if(this.compiledTemplate)return this.compiledTemplate;var t=this.loadTemplate(this.templateId);return this.compiledTemplate=this.compileTemplate(t),this.compiledTemplate},loadTemplate:function(t){var e=a.$(t).html();return e&&0!==e.length||s("Could not find template: '"+t+"'","NoTemplateError"),e},compileTemplate:function(t){return n.template(t)}}),a.Renderer={render:function(t,e){if(!t){var n=new Error("Cannot render the template since it's false, null or undefined.");throw n.name="TemplateNotFoundError",n}var i;return(i="function"==typeof t?t:a.TemplateCache.get(t))(e)}},a.View=e.View.extend({constructor:function(t){n.bindAll(this,"render");var i=Array.prototype.slice.apply(arguments);this.options=n.extend({},n.result(this,"options"),n.isFunction(t)?t.call(this):t),this.events=this.normalizeUIKeys(n.result(this,"events")),e.View.prototype.constructor.apply(this,i),a.MonitorDOMRefresh(this),this.listenTo(this,"show",this.onShowCalled,this)},triggerMethod:a.triggerMethod,normalizeMethods:a.normalizeMethods,getTemplate:function(){return a.getOption(this,"template")},mixinTemplateHelpers:function(t){t=t||{};var e=a.getOption(this,"templateHelpers");return n.isFunction(e)&&(e=e.call(this)),n.extend(t,e)},normalizeUIKeys:function(t){return"undefined"!=typeof t?(n.each(n.keys(t),function(e){var n=e.split("@ui.");2===n.length&&(t[n[0]+this.ui[n[1]]]=t[e],delete t[e])},this),t):void 0},configureTriggers:function(){if(this.triggers){var t={},e=this.normalizeUIKeys(n.result(this,"triggers"));return n.each(e,function(e,i){var s=n.isObject(e),a=s?e.event:e;t[i]=function(t){if(t){var n=t.preventDefault,i=t.stopPropagation,r=s?e.preventDefault:n,o=s?e.stopPropagation:i;r&&n&&n.apply(t),o&&i&&i.apply(t)}var l={view:this,model:this.model,collection:this.collection};this.triggerMethod(a,l)}},this),t}},delegateEvents:function(t){this._delegateDOMEvents(t),a.bindEntityEvents(this,this.model,a.getOption(this,"modelEvents")),a.bindEntityEvents(this,this.collection,a.getOption(this,"collectionEvents"))},_delegateDOMEvents:function(t){t=t||this.events,n.isFunction(t)&&(t=t.call(this));var i={},s=this.configureTriggers();n.extend(i,t,s),e.View.prototype.delegateEvents.call(this,i)},undelegateEvents:function(){var t=Array.prototype.slice.call(arguments);e.View.prototype.undelegateEvents.apply(this,t),a.unbindEntityEvents(this,this.model,a.getOption(this,"modelEvents")),a.unbindEntityEvents(this,this.collection,a.getOption(this,"collectionEvents"))},onShowCalled:function(){},close:function(){if(!this.isClosed){var t=this.triggerMethod("before:close");t!==!1&&(this.isClosed=!0,this.triggerMethod("close"),this.unbindUIElements(),this.remove())}},bindUIElements:function(){if(this.ui){this._uiBindings||(this._uiBindings=this.ui);var t=n.result(this,"_uiBindings");this.ui={},n.each(n.keys(t),function(e){var n=t[e];this.ui[e]=this.$(n)},this)}},unbindUIElements:function(){this.ui&&this._uiBindings&&(n.each(this.ui,function(t,e){delete this.ui[e]},this),this.ui=this._uiBindings,delete this._uiBindings)}}),a.ItemView=a.View.extend({constructor:function(){a.View.prototype.constructor.apply(this,i(arguments))},serializeData:function(){var t={};return this.model?t=this.model.toJSON():this.collection&&(t={items:this.collection.toJSON()}),t},render:function(){this.isClosed=!1,this.triggerMethod("before:render",this),this.triggerMethod("item:before:render",this);var t=this.serializeData();t=this.mixinTemplateHelpers(t);var e=this.getTemplate(),n=a.Renderer.render(e,t);return this.$el.html(n),this.bindUIElements(),this.triggerMethod("render",this),this.triggerMethod("item:rendered",this),this},close:function(){this.isClosed||(this.triggerMethod("item:before:close"),a.View.prototype.close.apply(this,i(arguments)),this.triggerMethod("item:closed"))}}),a.CollectionView=a.View.extend({itemViewEventPrefix:"itemview",constructor:function(){this._initChildViewStorage(),a.View.prototype.constructor.apply(this,i(arguments)),this._initialEvents(),this.initRenderBuffer()},initRenderBuffer:function(){this.elBuffer=document.createDocumentFragment(),this._bufferedChildren=[]},startBuffering:function(){this.initRenderBuffer(),this.isBuffering=!0},endBuffering:function(){this.isBuffering=!1,this.appendBuffer(this,this.elBuffer),this._triggerShowBufferedChildren(),this.initRenderBuffer()},_triggerShowBufferedChildren:function(){this._isShown&&(n.each(this._bufferedChildren,function(t){a.triggerMethod.call(t,"show")}),this._bufferedChildren=[])},_initialEvents:function(){this.collection&&(this.listenTo(this.collection,"add",this.addChildView,this),this.listenTo(this.collection,"remove",this.removeItemView,this),this.listenTo(this.collection,"reset",this.render,this))},addChildView:function(t){this.closeEmptyView();var e=this.getItemView(t),n=this.collection.indexOf(t);this.addItemView(t,e,n)},onShowCalled:function(){this.children.each(function(t){a.triggerMethod.call(t,"show")})},triggerBeforeRender:function(){this.triggerMethod("before:render",this),this.triggerMethod("collection:before:render",this)},triggerRendered:function(){this.triggerMethod("render",this),this.triggerMethod("collection:rendered",this)},render:function(){return this.isClosed=!1,this.triggerBeforeRender(),this._renderChildren(),this.triggerRendered(),this},_renderChildren:function(){this.startBuffering(),this.closeEmptyView(),this.closeChildren(),this.isEmpty(this.collection)?this.showEmptyView():this.showCollection(),this.endBuffering()},showCollection:function(){var t;this.collection.each(function(e,n){t=this.getItemView(e),this.addItemView(e,t,n)},this)},showEmptyView:function(){var t=this.getEmptyView();if(t&&!this._showingEmptyView){this._showingEmptyView=!0;var n=new e.Model;this.addItemView(n,t,0)}},closeEmptyView:function(){this._showingEmptyView&&(this.closeChildren(),delete this._showingEmptyView)},getEmptyView:function(){return a.getOption(this,"emptyView")},getItemView:function(){var t=a.getOption(this,"itemView");return t||s("An `itemView` must be specified","NoItemViewError"),t},addItemView:function(t,e,i){var s=a.getOption(this,"itemViewOptions");n.isFunction(s)&&(s=s.call(this,t,i));var r=this.buildItemView(t,e,s);return this.addChildViewEventForwarding(r),this.triggerMethod("before:item:added",r),this.children.add(r),this.renderItemView(r,i),this._isShown&&!this.isBuffering&&a.triggerMethod.call(r,"show"),this.triggerMethod("after:item:added",r),r},addChildViewEventForwarding:function(t){var e=a.getOption(this,"itemViewEventPrefix");this.listenTo(t,"all",function(){var s=i(arguments),r=s[0],o=this.normalizeMethods(this.getItemEvents());s[0]=e+":"+r,s.splice(1,0,t),"undefined"!=typeof o&&n.isFunction(o[r])&&o[r].apply(this,s),a.triggerMethod.apply(this,s)},this)},getItemEvents:function(){return n.isFunction(this.itemEvents)?this.itemEvents.call(this):this.itemEvents},renderItemView:function(t,e){t.render(),this.appendHtml(this,t,e)},buildItemView:function(t,e,i){var s=n.extend({model:t},i);return new e(s)},removeItemView:function(t){var e=this.children.findByModel(t);this.removeChildView(e),this.checkEmpty()},removeChildView:function(t){t&&(this.stopListening(t),t.close?t.close():t.remove&&t.remove(),this.children.remove(t)),this.triggerMethod("item:removed",t)},isEmpty:function(){return!this.collection||0===this.collection.length},checkEmpty:function(){this.isEmpty(this.collection)&&this.showEmptyView()},appendBuffer:function(t,e){t.$el.append(e)},appendHtml:function(t,e){t.isBuffering?(t.elBuffer.appendChild(e.el),t._bufferedChildren.push(e)):t.$el.append(e.el)},_initChildViewStorage:function(){this.children=new e.ChildViewContainer},close:function(){this.isClosed||(this.triggerMethod("collection:before:close"),this.closeChildren(),this.triggerMethod("collection:closed"),a.View.prototype.close.apply(this,i(arguments)))},closeChildren:function(){this.children.each(function(t){this.removeChildView(t)},this),this.checkEmpty()}}),a.CompositeView=a.CollectionView.extend({constructor:function(){a.CollectionView.prototype.constructor.apply(this,i(arguments))},_initialEvents:function(){this.once("render",function(){this.collection&&(this.listenTo(this.collection,"add",this.addChildView,this),this.listenTo(this.collection,"remove",this.removeItemView,this),this.listenTo(this.collection,"reset",this._renderChildren,this))})},getItemView:function(){var t=a.getOption(this,"itemView")||this.constructor;return t||s("An `itemView` must be specified","NoItemViewError"),t},serializeData:function(){var t={};return this.model&&(t=this.model.toJSON()),t},render:function(){this.isRendered=!0,this.isClosed=!1,this.resetItemViewContainer(),this.triggerBeforeRender();var t=this.renderModel();return this.$el.html(t),this.bindUIElements(),this.triggerMethod("composite:model:rendered"),this._renderChildren(),this.triggerMethod("composite:rendered"),this.triggerRendered(),this},_renderChildren:function(){this.isRendered&&(this.triggerMethod("composite:collection:before:render"),a.CollectionView.prototype._renderChildren.call(this),this.triggerMethod("composite:collection:rendered"))},renderModel:function(){var t={};t=this.serializeData(),t=this.mixinTemplateHelpers(t);var e=this.getTemplate();return a.Renderer.render(e,t)},appendBuffer:function(t,e){var n=this.getItemViewContainer(t);n.append(e)},appendHtml:function(t,e){if(t.isBuffering)t.elBuffer.appendChild(e.el),t._bufferedChildren.push(e);else{var n=this.getItemViewContainer(t);n.append(e.el)}},getItemViewContainer:function(t){if("$itemViewContainer"in t)return t.$itemViewContainer;var e,i=a.getOption(t,"itemViewContainer");if(i){var r=n.isFunction(i)?i.call(this):i;e=t.$(r),e.length<=0&&s("The specified `itemViewContainer` was not found: "+t.itemViewContainer,"ItemViewContainerMissingError")}else e=t.$el;return t.$itemViewContainer=e,e},resetItemViewContainer:function(){this.$itemViewContainer&&delete this.$itemViewContainer}}),a.Layout=a.ItemView.extend({regionType:a.Region,constructor:function(t){t=t||{},this._firstRender=!0,this._initializeRegions(t),a.ItemView.prototype.constructor.call(this,t)},render:function(){this.isClosed&&this._initializeRegions(),this._firstRender?this._firstRender=!1:this.isClosed||this._reInitializeRegions();var t=Array.prototype.slice.apply(arguments),e=a.ItemView.prototype.render.apply(this,t);return e},close:function(){if(!this.isClosed){this.regionManager.close();var t=Array.prototype.slice.apply(arguments);a.ItemView.prototype.close.apply(this,t)}},addRegion:function(t,e){var n={};return n[t]=e,this._buildRegions(n)[t]},addRegions:function(t){return this.regions=n.extend({},this.regions,t),this._buildRegions(t)},removeRegion:function(t){return delete this.regions[t],this.regionManager.removeRegion(t)},_buildRegions:function(t){var e=this,n={regionType:a.getOption(this,"regionType"),parentEl:function(){return e.$el}};return this.regionManager.addRegions(t,n)},_initializeRegions:function(t){var e;this._initRegionManager(),e=n.isFunction(this.regions)?this.regions(t):this.regions||{},this.addRegions(e)},_reInitializeRegions:function(){this.regionManager.closeRegions(),this.regionManager.each(function(t){t.reset()})},_initRegionManager:function(){this.regionManager=new a.RegionManager,this.listenTo(this.regionManager,"region:add",function(t,e){this[t]=e,this.trigger("region:add",t,e)}),this.listenTo(this.regionManager,"region:remove",function(t,e){delete this[t],this.trigger("region:remove",t,e)})}}),a.AppRouter=e.Router.extend({constructor:function(t){e.Router.prototype.constructor.apply(this,i(arguments)),this.options=t||{};var n=a.getOption(this,"appRoutes"),s=this._getController();this.processAppRoutes(s,n)},appRoute:function(t,e){var n=this._getController();this._addAppRoute(n,t,e)},processAppRoutes:function(t,e){if(e){var i=n.keys(e).reverse();n.each(i,function(n){this._addAppRoute(t,n,e[n])},this)}},_getController:function(){return a.getOption(this,"controller")},_addAppRoute:function(t,e,i){var s=t[i];if(!s)throw new Error("Method '"+i+"' was not found on the controller");this.route(e,i,n.bind(s,t))}}),a.Application=function(t){this._initRegionManager(),this._initCallbacks=new a.Callbacks,this.vent=new e.Wreqr.EventAggregator,this.commands=new e.Wreqr.Commands,this.reqres=new e.Wreqr.RequestResponse,this.submodules={},n.extend(this,t),this.triggerMethod=a.triggerMethod},n.extend(a.Application.prototype,e.Events,{execute:function(){var t=Array.prototype.slice.apply(arguments);this.commands.execute.apply(this.commands,t)},request:function(){var t=Array.prototype.slice.apply(arguments);return this.reqres.request.apply(this.reqres,t)},addInitializer:function(t){this._initCallbacks.add(t)},start:function(t){this.triggerMethod("initialize:before",t),this._initCallbacks.run(t,this),this.triggerMethod("initialize:after",t),this.triggerMethod("start",t)},addRegions:function(t){return this._regionManager.addRegions(t)},closeRegions:function(){this._regionManager.closeRegions()},removeRegion:function(t){this._regionManager.removeRegion(t)},getRegion:function(t){return this._regionManager.get(t)},module:function(t,e){var n=a.Module;e&&(n=e.moduleClass||n);var s=i(arguments);return s.unshift(this),n.create.apply(n,s)},_initRegionManager:function(){this._regionManager=new a.RegionManager,this.listenTo(this._regionManager,"region:add",function(t,e){this[t]=e}),this.listenTo(this._regionManager,"region:remove",function(t){delete this[t]})}}),a.Application.extend=a.extend,a.Module=function(t,e,i){this.moduleName=t,this.options=n.extend({},this.options,i),this.initialize=i.initialize||this.initialize,this.submodules={},this._setupInitializersAndFinalizers(),this.app=e,this.startWithParent=!0,this.triggerMethod=a.triggerMethod,n.isFunction(this.initialize)&&this.initialize(this.options,t,e)},a.Module.extend=a.extend,n.extend(a.Module.prototype,e.Events,{initialize:function(){},addInitializer:function(t){this._initializerCallbacks.add(t)},addFinalizer:function(t){this._finalizerCallbacks.add(t)},start:function(t){this._isInitialized||(n.each(this.submodules,function(e){e.startWithParent&&e.start(t)}),this.triggerMethod("before:start",t),this._initializerCallbacks.run(t,this),this._isInitialized=!0,this.triggerMethod("start",t))},stop:function(){this._isInitialized&&(this._isInitialized=!1,a.triggerMethod.call(this,"before:stop"),n.each(this.submodules,function(t){t.stop()}),this._finalizerCallbacks.run(void 0,this),this._initializerCallbacks.reset(),this._finalizerCallbacks.reset(),a.triggerMethod.call(this,"stop"))},addDefinition:function(t,e){this._runModuleDefinition(t,e)},_runModuleDefinition:function(t,i){if(t){var s=n.flatten([this,this.app,e,a,a.$,n,i]);t.apply(this,s)}},_setupInitializersAndFinalizers:function(){this._initializerCallbacks=new a.Callbacks,this._finalizerCallbacks=new a.Callbacks}}),n.extend(a.Module,{create:function(t,e,s){var a=t,r=i(arguments);r.splice(0,3),e=e.split(".");var o=e.length,l=[];return l[o-1]=s,n.each(e,function(e,n){var i=a;a=this._getModule(i,e,t,s),this._addModuleDefinition(i,a,l[n],r)},this),a},_getModule:function(t,e,i,s){var r=a.Module,o=n.extend({},s);s&&(r=s.moduleClass||r);var l=t[e];return l||(l=new r(e,i,o),t[e]=l,t.submodules[e]=l),l},_addModuleDefinition:function(t,e,i,s){var a,r;n.isFunction(i)?(a=i,r=!0):n.isObject(i)?(a=i.define,r="undefined"!=typeof i.startWithParent?i.startWithParent:!0):r=!0,a&&e.addDefinition(a,s),e.startWithParent=e.startWithParent&&r,e.startWithParent&&!e.startWithParentIsConfigured&&(e.startWithParentIsConfigured=!0,t.addInitializer(function(t){e.startWithParent&&e.start(t)}))}}),a}(this,e,t);return e.Marionette}),function(t,e){function n(n,i){function s(t){return pe.preferFlash&&ie&&!pe.ignoreFlash&&pe.flash[t]!==e&&pe.flash[t]}function a(t){return function(e){var n=this._s;return n&&n._a?t.call(this,e):null}}this.setupOptions={url:n||null,flashVersion:8,debugMode:!0,debugFlash:!1,useConsole:!0,consoleOnly:!0,waitForWindowLoad:!1,bgColor:"#ffffff",useHighPerformance:!1,flashPollingInterval:null,html5PollingInterval:null,flashLoadTimeout:1e3,wmode:null,allowScriptAccess:"always",useFlashBlock:!1,useHTML5Audio:!0,forceUseGlobalHTML5Audio:!1,ignoreMobileRestrictions:!1,html5Test:/^(probably|maybe)$/i,preferFlash:!1,noSWFCache:!1,idPrefix:"sound"},this.defaultOptions={autoLoad:!1,autoPlay:!1,from:null,loops:1,onid3:null,onload:null,whileloading:null,onplay:null,onpause:null,onresume:null,whileplaying:null,onposition:null,onstop:null,onfailure:null,onfinish:null,multiShot:!0,multiShotEvents:!1,position:null,pan:0,stream:!0,to:null,type:null,usePolicyFile:!1,volume:100},this.flash9Options={isMovieStar:null,usePeakData:!1,useWaveformData:!1,useEQData:!1,onbufferchange:null,ondataerror:null},this.movieStarOptions={bufferTime:3,serverURL:null,onconnect:null,duration:null},this.audioFormats={mp3:{type:['audio/mpeg; codecs="mp3"',"audio/mpeg","audio/mp3","audio/MPA","audio/mpa-robust"],required:!0},mp4:{related:["aac","m4a","m4b"],type:['audio/mp4; codecs="mp4a.40.2"',"audio/aac","audio/x-m4a","audio/MP4A-LATM","audio/mpeg4-generic"],required:!1},ogg:{type:["audio/ogg; codecs=vorbis"],required:!1},opus:{type:["audio/ogg; codecs=opus","audio/opus"],required:!1},wav:{type:['audio/wav; codecs="1"',"audio/wav","audio/wave","audio/x-wav"],required:!1}},this.movieID="sm2-container",this.id=i||"sm2movie",this.debugID="soundmanager-debug",this.debugURLParam=/([#?&])debug=1/i,this.versionNumber="V2.97a.20150601",this.altURL=this.movieURL=this.version=null,this.enabled=this.swfLoaded=!1,this.oMC=null,this.sounds={},this.soundIDs=[],this.didFlashBlock=this.muted=!1,this.filePattern=null,this.filePatterns={flash8:/\.mp3(\?.*)?$/i,flash9:/\.mp3(\?.*)?$/i},this.features={buffering:!1,peakData:!1,waveformData:!1,eqData:!1,movieStar:!1},this.sandbox={},this.html5={usingFlash:null},this.flash={},this.ignoreFlash=this.html5Only=!1;
var r,o,l,p,u,c,d,h,f,m,g,v,y,_,w,b,k,C,M,x,P,T,O,E,j,S,A,I,$,R,H,L,D,B,F,q,V,z,N,U,X,W,Y,Q,G,J,K,Z,te,ee,ne,ie,se,ae,re,oe,le,pe=this,ue=null,ce=null,de=navigator.userAgent,he=t.location.href.toString(),fe=document,me=[],ge=!1,ve=!1,ye=!1,_e=!1,we=!1,be=null,ke=null,Ce=!1,Me=!1,xe=0,Pe=null,Te=[],Oe=null,Ee=Array.prototype.slice,je=!1,Se=0,Ae=de.match(/(ipad|iphone|ipod)/i),Ie=de.match(/android/i),$e=de.match(/msie/i),Re=de.match(/webkit/i),He=de.match(/safari/i)&&!de.match(/chrome/i),Le=de.match(/opera/i),De=de.match(/(mobile|pre\/|xoom)/i)||Ae||Ie,Be=!he.match(/usehtml5audio/i)&&!he.match(/sm2\-ignorebadua/i)&&He&&!de.match(/silk/i)&&de.match(/OS X 10_6_([3-7])/i),Fe=fe.hasFocus!==e?fe.hasFocus():null,qe=He&&(fe.hasFocus===e||!fe.hasFocus()),Ve=!qe,ze=/(mp3|mp4|mpa|m4a|m4b)/i,Ne=fe.location?fe.location.protocol.match(/http/i):null,Ue=Ne?"":"http://",Xe=/^\s*audio\/(?:x-)?(?:mpeg4|aac|flv|mov|mp4||m4v|m4a|m4b|mp4v|3gp|3g2)\s*(?:$|;)/i,We="mpeg4 aac flv mov mp4 m4v f4v m4a m4b mp4v 3gp 3g2".split(" "),Ye=new RegExp("\\.("+We.join("|")+")(\\?.*)?$","i");this.mimePattern=/^\s*audio\/(?:x-)?(?:mp(?:eg|3))\s*(?:$|;)/i,this.useAltURL=!Ne;var Qe;try{Qe=Audio!==e&&(Le&&opera!==e&&10>opera.version()?new Audio(null):new Audio).canPlayType!==e}catch(Ge){Qe=!1}this.hasHTML5=Qe,this.setup=function(t){var n=!pe.url;return t!==e&&ye&&Oe&&pe.ok(),f(t),je||(De?(!pe.setupOptions.ignoreMobileRestrictions||pe.setupOptions.forceUseGlobalHTML5Audio)&&(Te.push(M.globalHTML5),je=!0):pe.setupOptions.forceUseGlobalHTML5Audio&&(Te.push(M.globalHTML5),je=!0)),!le&&De&&(pe.setupOptions.ignoreMobileRestrictions?Te.push(M.ignoreMobile):(pe.setupOptions.useHTML5Audio=!0,pe.setupOptions.preferFlash=!1,Ae?pe.ignoreFlash=!0:(Ie&&!de.match(/android\s2\.3/i)||!Ie)&&(je=!0))),t&&(n&&O&&t.url!==e&&pe.beginDelayedInit(),O||t.url===e||"complete"!==fe.readyState||setTimeout(P,1)),le=!0,pe},this.supported=this.ok=function(){return Oe?ye&&!_e:pe.useHTML5Audio&&pe.hasHTML5},this.getMovie=function(e){return o(e)||fe[e]||t[e]},this.createSound=function(t,n){function i(){return s=F(s),pe.sounds[s.id]=new r(s),pe.soundIDs.push(s.id),pe.sounds[s.id]}var s,a=null;if(!ye||!pe.ok())return!1;if(n!==e&&(t={id:t,url:n}),s=h(t),s.url=X(s.url),s.id===e&&(s.id=pe.setupOptions.idPrefix+Se++),V(s.id,!0))return pe.sounds[s.id];if(Q(s))a=i(),a._setup_html5(s);else{if(pe.html5Only||pe.html5.usingFlash&&s.url&&s.url.match(/data\:/i))return i();c>8&&null===s.isMovieStar&&(s.isMovieStar=!!(s.serverURL||s.type&&s.type.match(Xe)||s.url&&s.url.match(Ye))),s=q(s,void 0),a=i(),8===c?ce._createSound(s.id,s.loops||1,s.usePolicyFile):(ce._createSound(s.id,s.url,s.usePeakData,s.useWaveformData,s.useEQData,s.isMovieStar,s.isMovieStar?s.bufferTime:!1,s.loops||1,s.serverURL,s.duration||null,s.autoPlay,!0,s.autoLoad,s.usePolicyFile),s.serverURL||(a.connected=!0,s.onconnect&&s.onconnect.apply(a))),s.serverURL||!s.autoLoad&&!s.autoPlay||a.load(s)}return!s.serverURL&&s.autoPlay&&a.play(),a},this.destroySound=function(t,e){if(!V(t))return!1;var n,i=pe.sounds[t];for(i.stop(),i._iO={},i.unload(),n=0;n<pe.soundIDs.length;n++)if(pe.soundIDs[n]===t){pe.soundIDs.splice(n,1);break}return e||i.destruct(!0),delete pe.sounds[t],!0},this.load=function(t,e){return V(t)?pe.sounds[t].load(e):!1},this.unload=function(t){return V(t)?pe.sounds[t].unload():!1},this.onposition=this.onPosition=function(t,e,n,i){return V(t)?pe.sounds[t].onposition(e,n,i):!1},this.clearOnPosition=function(t,e,n){return V(t)?pe.sounds[t].clearOnPosition(e,n):!1},this.start=this.play=function(t,e){var n=null,i=e&&!(e instanceof Object);if(!ye||!pe.ok())return!1;if(V(t,i))i&&(e={url:e});else{if(!i)return!1;i&&(e={url:e}),e&&e.url&&(e.id=t,n=pe.createSound(e).play())}return null===n&&(n=pe.sounds[t].play(e)),n},this.setPosition=function(t,e){return V(t)?pe.sounds[t].setPosition(e):!1},this.stop=function(t){return V(t)?pe.sounds[t].stop():!1},this.stopAll=function(){for(var t in pe.sounds)pe.sounds.hasOwnProperty(t)&&pe.sounds[t].stop()},this.pause=function(t){return V(t)?pe.sounds[t].pause():!1},this.pauseAll=function(){var t;for(t=pe.soundIDs.length-1;t>=0;t--)pe.sounds[pe.soundIDs[t]].pause()},this.resume=function(t){return V(t)?pe.sounds[t].resume():!1},this.resumeAll=function(){var t;for(t=pe.soundIDs.length-1;t>=0;t--)pe.sounds[pe.soundIDs[t]].resume()},this.togglePause=function(t){return V(t)?pe.sounds[t].togglePause():!1},this.setPan=function(t,e){return V(t)?pe.sounds[t].setPan(e):!1},this.setVolume=function(t,n){var i,s;if(t===e||isNaN(t)||n!==e)return V(t)?pe.sounds[t].setVolume(n):!1;for(i=0,s=pe.soundIDs.length;s>i;i++)pe.sounds[pe.soundIDs[i]].setVolume(t)},this.mute=function(t){var e=0;if(t instanceof String&&(t=null),t)return V(t)?pe.sounds[t].mute():!1;for(e=pe.soundIDs.length-1;e>=0;e--)pe.sounds[pe.soundIDs[e]].mute();return pe.muted=!0},this.muteAll=function(){pe.mute()},this.unmute=function(t){if(t instanceof String&&(t=null),t)return V(t)?pe.sounds[t].unmute():!1;for(t=pe.soundIDs.length-1;t>=0;t--)pe.sounds[pe.soundIDs[t]].unmute();return pe.muted=!1,!0},this.unmuteAll=function(){pe.unmute()},this.toggleMute=function(t){return V(t)?pe.sounds[t].toggleMute():!1},this.getMemoryUse=function(){var t=0;return ce&&8!==c&&(t=parseInt(ce._getMemoryUse(),10)),t},this.disable=function(n){var i;if(n===e&&(n=!1),_e)return!1;for(_e=!0,i=pe.soundIDs.length-1;i>=0;i--)$(pe.sounds[pe.soundIDs[i]]);return d(n),ee.remove(t,"load",y),!0},this.canPlayMIME=function(t){var e;return pe.hasHTML5&&(e=G({type:t})),!e&&Oe&&(e=t&&pe.ok()?!!(c>8&&t.match(Xe)||t.match(pe.mimePattern)):null),e},this.canPlayURL=function(t){var e;return pe.hasHTML5&&(e=G({url:t})),!e&&Oe&&(e=t&&pe.ok()?!!t.match(pe.filePattern):null),e},this.canPlayLink=function(t){return t.type!==e&&t.type&&pe.canPlayMIME(t.type)?!0:pe.canPlayURL(t.href)},this.getSoundById=function(t){return t?pe.sounds[t]:null},this.onready=function(e,n){if("function"!=typeof e)throw L("needFunction","onready");return n||(n=t),g("onready",e,n),v(),!0},this.ontimeout=function(e,n){if("function"!=typeof e)throw L("needFunction","ontimeout");return n||(n=t),g("ontimeout",e,n),v({type:"ontimeout"}),!0},this._wD=this._writeDebug=function(){return!0},this._debug=function(){},this.reboot=function(e,n){var i,s,a;for(i=pe.soundIDs.length-1;i>=0;i--)pe.sounds[pe.soundIDs[i]].destruct();if(ce)try{$e&&(ke=ce.innerHTML),be=ce.parentNode.removeChild(ce)}catch(r){}if(ke=be=Oe=ce=null,pe.enabled=O=ye=Ce=Me=ge=ve=_e=je=pe.swfLoaded=!1,pe.soundIDs=[],pe.sounds={},Se=0,le=!1,e)me=[];else for(i in me)if(me.hasOwnProperty(i))for(s=0,a=me[i].length;a>s;s++)me[i][s].fired=!1;return pe.html5={usingFlash:null},pe.flash={},pe.html5Only=!1,pe.ignoreFlash=!1,t.setTimeout(function(){n||pe.beginDelayedInit()},20),pe},this.reset=function(){return pe.reboot(!0,!0)},this.getMoviePercent=function(){return ce&&"PercentLoaded"in ce?ce.PercentLoaded():null},this.beginDelayedInit=function(){we=!0,P(),setTimeout(function(){return Me?!1:(j(),x(),Me=!0)},20),_()},this.destruct=function(){pe.disable(!0)},r=function(t){var n,i,s,a,r,o,l,p,u,d,f,m=this,g=!1,v=[],y=0,_=null;i=n=null,this.sID=this.id=t.id,this.url=t.url,this._iO=this.instanceOptions=this.options=h(t),this.pan=this.options.pan,this.volume=this.options.volume,this.isHTML5=!1,this._a=null,f=this.url?!1:!0,this.id3={},this._debug=function(){},this.load=function(t){var n,i=null;if(t!==e?m._iO=h(t,m.options):(t=m.options,m._iO=t,_&&_!==m.url&&(m._iO.url=m.url,m.url=null)),m._iO.url||(m._iO.url=m.url),m._iO.url=X(m._iO.url),n=m.instanceOptions=m._iO,!n.url&&!m.url)return m;if(n.url===m.url&&0!==m.readyState&&2!==m.readyState)return 3===m.readyState&&n.onload&&oe(m,function(){n.onload.apply(m,[!!m.duration])}),m;if(m.loaded=!1,m.readyState=1,m.playState=0,m.id3={},Q(n))i=m._setup_html5(n),i._called_load||(m._html5_canplay=!1,m.url!==n.url&&(m._a.src=n.url,m.setPosition(0)),m._a.autobuffer="auto",m._a.preload="auto",m._a._called_load=!0);else{if(pe.html5Only||m._iO.url&&m._iO.url.match(/data\:/i))return m;try{m.isHTML5=!1,m._iO=q(F(n)),m._iO.autoPlay&&(m._iO.position||m._iO.from)&&(m._iO.autoPlay=!1),n=m._iO,8===c?ce._load(m.id,n.url,n.stream,n.autoPlay,n.usePolicyFile):ce._load(m.id,n.url,!!n.stream,!!n.autoPlay,n.loops||1,!!n.autoLoad,n.usePolicyFile)}catch(s){S({type:"SMSOUND_LOAD_JS_EXCEPTION",fatal:!0})}}return m.url=n.url,m},this.unload=function(){return 0!==m.readyState&&(m.isHTML5?(o(),m._a&&(m._a.pause(),_=K(m._a))):8===c?ce._unload(m.id,"about:blank"):ce._unload(m.id),s()),m},this.destruct=function(t){m.isHTML5?(o(),m._a&&(m._a.pause(),K(m._a),je||r(),m._a._s=null,m._a=null)):(m._iO.onfailure=null,ce._destroySound(m.id)),t||pe.destroySound(m.id,!0)},this.start=this.play=function(t,n){var i,s,a,r,o;if(s=!0,s=null,n=n===e?!0:n,t||(t={}),m.url&&(m._iO.url=m.url),m._iO=h(m._iO,m.options),m._iO=h(t,m._iO),m._iO.url=X(m._iO.url),m.instanceOptions=m._iO,!m.isHTML5&&m._iO.serverURL&&!m.connected)return m.getAutoPlay()||m.setAutoPlay(!0),m;if(Q(m._iO)&&(m._setup_html5(m._iO),l()),1!==m.playState||m.paused||(i=m._iO.multiShot,i||(m.isHTML5&&m.setPosition(m._iO.position),s=m)),null!==s)return s;if(t.url&&t.url!==m.url&&(m.readyState||m.isHTML5||8!==c||!f?m.load(m._iO):f=!1),m.loaded||(0===m.readyState?(m.isHTML5||pe.html5Only?m.isHTML5?m.load(m._iO):s=m:(m._iO.autoPlay=!0,m.load(m._iO)),m.instanceOptions=m._iO):2===m.readyState&&(s=m)),null!==s)return s;if(!m.isHTML5&&9===c&&0<m.position&&m.position===m.duration&&(t.position=0),m.paused&&0<=m.position&&(!m._iO.serverURL||0<m.position))m.resume();else{if(m._iO=h(t,m._iO),(!m.isHTML5&&null!==m._iO.position&&0<m._iO.position||null!==m._iO.from&&0<m._iO.from||null!==m._iO.to)&&0===m.instanceCount&&0===m.playState&&!m._iO.serverURL){if(i=function(){m._iO=h(t,m._iO),m.play(m._iO)},m.isHTML5&&!m._html5_canplay?(m.load({_oncanplay:i}),s=!1):m.isHTML5||m.loaded||m.readyState&&2===m.readyState||(m.load({onload:i}),s=!1),null!==s)return s;m._iO=d()}(!m.instanceCount||m._iO.multiShotEvents||m.isHTML5&&m._iO.multiShot&&!je||!m.isHTML5&&c>8&&!m.getAutoPlay())&&m.instanceCount++,m._iO.onposition&&0===m.playState&&p(m),m.playState=1,m.paused=!1,m.position=m._iO.position===e||isNaN(m._iO.position)?0:m._iO.position,m.isHTML5||(m._iO=q(F(m._iO))),m._iO.onplay&&n&&(m._iO.onplay.apply(m),g=!0),m.setVolume(m._iO.volume,!0),m.setPan(m._iO.pan,!0),m.isHTML5?2>m.instanceCount?(l(),s=m._setup_html5(),m.setPosition(m._iO.position),s.play()):(a=new Audio(m._iO.url),r=function(){ee.remove(a,"ended",r),m._onfinish(m),K(a),a=null},o=function(){ee.remove(a,"canplay",o);try{a.currentTime=m._iO.position/1e3}catch(t){}a.play()},ee.add(a,"ended",r),m._iO.volume!==e&&(a.volume=Math.max(0,Math.min(1,m._iO.volume/100))),m.muted&&(a.muted=!0),m._iO.position?ee.add(a,"canplay",o):a.play()):(s=ce._start(m.id,m._iO.loops||1,9===c?m.position:m.position/1e3,m._iO.multiShot||!1),9!==c||s||m._iO.onplayerror&&m._iO.onplayerror.apply(m))}return m},this.stop=function(t){var e=m._iO;return 1===m.playState&&(m._onbufferchange(0),m._resetOnPosition(0),m.paused=!1,m.isHTML5||(m.playState=0),u(),e.to&&m.clearOnPosition(e.to),m.isHTML5?m._a&&(t=m.position,m.setPosition(0),m.position=t,m._a.pause(),m.playState=0,m._onTimer(),o()):(ce._stop(m.id,t),e.serverURL&&m.unload()),m.instanceCount=0,m._iO={},e.onstop&&e.onstop.apply(m)),m},this.setAutoPlay=function(t){m._iO.autoPlay=t,m.isHTML5||(ce._setAutoPlay(m.id,t),t&&(m.instanceCount||1!==m.readyState||m.instanceCount++))},this.getAutoPlay=function(){return m._iO.autoPlay},this.setPosition=function(t){t===e&&(t=0);var n=m.isHTML5?Math.max(t,0):Math.min(m.duration||m._iO.duration,Math.max(t,0));if(m.position=n,t=m.position/1e3,m._resetOnPosition(m.position),m._iO.position=n,m.isHTML5){if(m._a){if(m._html5_canplay){if(m._a.currentTime!==t)try{m._a.currentTime=t,(0===m.playState||m.paused)&&m._a.pause()}catch(i){}}else if(t)return m;m.paused&&m._onTimer(!0)}}else t=9===c?m.position:t,m.readyState&&2!==m.readyState&&ce._setPosition(m.id,t,m.paused||!m.playState,m._iO.multiShot);return m},this.pause=function(t){return m.paused||0===m.playState&&1!==m.readyState?m:(m.paused=!0,m.isHTML5?(m._setup_html5().pause(),o()):(t||t===e)&&ce._pause(m.id,m._iO.multiShot),m._iO.onpause&&m._iO.onpause.apply(m),m)},this.resume=function(){var t=m._iO;return m.paused?(m.paused=!1,m.playState=1,m.isHTML5?(m._setup_html5().play(),l()):(t.isMovieStar&&!t.serverURL&&m.setPosition(m.position),ce._pause(m.id,t.multiShot)),!g&&t.onplay?(t.onplay.apply(m),g=!0):t.onresume&&t.onresume.apply(m),m):m},this.togglePause=function(){return 0===m.playState?(m.play({position:9!==c||m.isHTML5?m.position/1e3:m.position}),m):(m.paused?m.resume():m.pause(),m)},this.setPan=function(t,n){return t===e&&(t=0),n===e&&(n=!1),m.isHTML5||ce._setPan(m.id,t),m._iO.pan=t,n||(m.pan=t,m.options.pan=t),m},this.setVolume=function(t,n){return t===e&&(t=100),n===e&&(n=!1),m.isHTML5?m._a&&(pe.muted&&!m.muted&&(m.muted=!0,m._a.muted=!0),m._a.volume=Math.max(0,Math.min(1,t/100))):ce._setVolume(m.id,pe.muted&&!m.muted||m.muted?0:t),m._iO.volume=t,n||(m.volume=t,m.options.volume=t),m},this.mute=function(){return m.muted=!0,m.isHTML5?m._a&&(m._a.muted=!0):ce._setVolume(m.id,0),m},this.unmute=function(){m.muted=!1;var t=m._iO.volume!==e;return m.isHTML5?m._a&&(m._a.muted=!1):ce._setVolume(m.id,t?m._iO.volume:m.options.volume),m},this.toggleMute=function(){return m.muted?m.unmute():m.mute()},this.onposition=this.onPosition=function(t,n,i){return v.push({position:parseInt(t,10),method:n,scope:i!==e?i:m,fired:!1}),m},this.clearOnPosition=function(t,e){var n;if(t=parseInt(t,10),isNaN(t))return!1;for(n=0;n<v.length;n++)t!==v[n].position||e&&e!==v[n].method||(v[n].fired&&y--,v.splice(n,1))},this._processOnPosition=function(){var t,e;if(t=v.length,!t||!m.playState||y>=t)return!1;for(--t;t>=0;t--)e=v[t],!e.fired&&m.position>=e.position&&(e.fired=!0,y++,e.method.apply(e.scope,[e.position]));return!0},this._resetOnPosition=function(t){var e,n;if(e=v.length,!e)return!1;for(--e;e>=0;e--)n=v[e],n.fired&&t<=n.position&&(n.fired=!1,y--);return!0},d=function(){var t,e,n=m._iO,i=n.from,s=n.to;return e=function(){m.clearOnPosition(s,e),m.stop()},t=function(){null===s||isNaN(s)||m.onPosition(s,e)},null===i||isNaN(i)||(n.position=i,n.multiShot=!1,t()),n},p=function(){var t,e=m._iO.onposition;if(e)for(t in e)e.hasOwnProperty(t)&&m.onPosition(parseInt(t,10),e[t])},u=function(){var t,e=m._iO.onposition;if(e)for(t in e)e.hasOwnProperty(t)&&m.clearOnPosition(parseInt(t,10))},l=function(){m.isHTML5&&z(m)},o=function(){m.isHTML5&&N(m)},s=function(t){t||(v=[],y=0),g=!1,m._hasTimer=null,m._a=null,m._html5_canplay=!1,m.bytesLoaded=null,m.bytesTotal=null,m.duration=m._iO&&m._iO.duration?m._iO.duration:null,m.durationEstimate=null,m.buffered=[],m.eqData=[],m.eqData.left=[],m.eqData.right=[],m.failures=0,m.isBuffering=!1,m.instanceOptions={},m.instanceCount=0,m.loaded=!1,m.metadata={},m.readyState=0,m.muted=!1,m.paused=!1,m.peakData={left:0,right:0},m.waveformData={left:[],right:[]},m.playState=0,m.position=null,m.id3={}},s(),this._onTimer=function(t){var e,s=!1,a={};return m._hasTimer||t?(m._a&&(t||(0<m.playState||1===m.readyState)&&!m.paused)&&(e=m._get_html5_duration(),e!==n&&(n=e,m.duration=e,s=!0),m.durationEstimate=m.duration,e=1e3*m._a.currentTime||0,e!==i&&(i=e,s=!0),(s||t)&&m._whileplaying(e,a,a,a,a)),s):void 0},this._get_html5_duration=function(){var t=m._iO;return(t=m._a&&m._a.duration?1e3*m._a.duration:t&&t.duration?t.duration:null)&&!isNaN(t)&&1/0!==t?t:null},this._apply_loop=function(t,e){t.loop=e>1?"loop":""},this._setup_html5=function(t){t=h(m._iO,t);var e,n=je?ue:m._a,i=decodeURI(t.url);if(je?i===decodeURI(ne)&&(e=!0):i===decodeURI(_)&&(e=!0),n){if(n._s)if(je)n._s&&n._s.playState&&!e&&n._s.stop();else if(!je&&i===decodeURI(_))return m._apply_loop(n,t.loops),n;e||(_&&s(!1),n.src=t.url,ne=_=m.url=t.url,n._called_load=!1)}else t.autoLoad||t.autoPlay?(m._a=new Audio(t.url),m._a.load()):m._a=Le&&10>opera.version()?new Audio(null):new Audio,n=m._a,n._called_load=!1,je&&(ue=n);return m.isHTML5=!0,m._a=n,n._s=m,a(),m._apply_loop(n,t.loops),t.autoLoad||t.autoPlay?m.load():(n.autobuffer=!1,n.preload="auto"),n},a=function(){if(m._a._added_events)return!1;var t;m._a._added_events=!0;for(t in re)re.hasOwnProperty(t)&&m._a&&m._a.addEventListener(t,re[t],!1);return!0},r=function(){var t;m._a._added_events=!1;for(t in re)re.hasOwnProperty(t)&&m._a&&m._a.removeEventListener(t,re[t],!1)},this._onload=function(t){var e=!!t||!m.isHTML5&&8===c&&m.duration;return m.loaded=e,m.readyState=e?3:2,m._onbufferchange(0),m._iO.onload&&oe(m,function(){m._iO.onload.apply(m,[e])}),!0},this._onbufferchange=function(t){return 0===m.playState||t&&m.isBuffering||!t&&!m.isBuffering?!1:(m.isBuffering=1===t,m._iO.onbufferchange&&m._iO.onbufferchange.apply(m,[t]),!0)},this._onsuspend=function(){return m._iO.onsuspend&&m._iO.onsuspend.apply(m),!0},this._onfailure=function(t,e,n){m.failures++,m._iO.onfailure&&1===m.failures&&m._iO.onfailure(t,e,n)},this._onwarning=function(t,e,n){m._iO.onwarning&&m._iO.onwarning(t,e,n)},this._onfinish=function(){var t=m._iO.onfinish;m._onbufferchange(0),m._resetOnPosition(0),m.instanceCount&&(m.instanceCount--,m.instanceCount||(u(),m.playState=0,m.paused=!1,m.instanceCount=0,m.instanceOptions={},m._iO={},o(),m.isHTML5&&(m.position=0)),(!m.instanceCount||m._iO.multiShotEvents)&&t&&oe(m,function(){t.apply(m)}))},this._whileloading=function(t,e,n,i){var s=m._iO;m.bytesLoaded=t,m.bytesTotal=e,m.duration=Math.floor(n),m.bufferLength=i,m.durationEstimate=m.isHTML5||s.isMovieStar?m.duration:s.duration?m.duration>s.duration?m.duration:s.duration:parseInt(m.bytesTotal/m.bytesLoaded*m.duration,10),m.isHTML5||(m.buffered=[{start:0,end:m.duration}]),(3!==m.readyState||m.isHTML5)&&s.whileloading&&s.whileloading.apply(m)},this._whileplaying=function(t,n,i,s,a){var r=m._iO;return isNaN(t)||null===t?!1:(m.position=Math.max(0,t),m._processOnPosition(),!m.isHTML5&&c>8&&(r.usePeakData&&n!==e&&n&&(m.peakData={left:n.leftPeak,right:n.rightPeak}),r.useWaveformData&&i!==e&&i&&(m.waveformData={left:i.split(","),right:s.split(",")}),r.useEQData&&a!==e&&a&&a.leftEQ&&(t=a.leftEQ.split(","),m.eqData=t,m.eqData.left=t,a.rightEQ!==e&&a.rightEQ&&(m.eqData.right=a.rightEQ.split(",")))),1===m.playState&&(m.isHTML5||8!==c||m.position||!m.isBuffering||m._onbufferchange(0),r.whileplaying&&r.whileplaying.apply(m)),!0)},this._oncaptiondata=function(t){m.captiondata=t,m._iO.oncaptiondata&&m._iO.oncaptiondata.apply(m,[t])},this._onmetadata=function(t,e){var n,i,s={};for(n=0,i=t.length;i>n;n++)s[t[n]]=e[n];m.metadata=s,m._iO.onmetadata&&m._iO.onmetadata.call(m,m.metadata)},this._onid3=function(t,e){var n,i,s=[];for(n=0,i=t.length;i>n;n++)s[t[n]]=e[n];m.id3=h(m.id3,s),m._iO.onid3&&m._iO.onid3.apply(m)},this._onconnect=function(t){t=1===t,(m.connected=t)&&(m.failures=0,V(m.id)&&(m.getAutoPlay()?m.play(e,m.getAutoPlay()):m._iO.autoLoad&&m.load()),m._iO.onconnect&&m._iO.onconnect.apply(m,[t]))},this._ondataerror=function(){0<m.playState&&m._iO.ondataerror&&m._iO.ondataerror.apply(m)}},E=function(){return fe.body||fe.getElementsByTagName("div")[0]},o=function(t){return fe.getElementById(t)},h=function(t,n){var i,s,a=t||{};i=n===e?pe.defaultOptions:n;for(s in i)i.hasOwnProperty(s)&&a[s]===e&&(a[s]="object"!=typeof i[s]||null===i[s]?i[s]:h(a[s],i[s]));return a},oe=function(e,n){e.isHTML5||8!==c?n():t.setTimeout(n,0)},m={onready:1,ontimeout:1,defaultOptions:1,flash9Options:1,movieStarOptions:1},f=function(t,n){var i,s=!0,a=n!==e,r=pe.setupOptions;for(i in t)if(t.hasOwnProperty(i))if("object"!=typeof t[i]||null===t[i]||t[i]instanceof Array||t[i]instanceof RegExp)a&&m[n]!==e?pe[n][i]=t[i]:r[i]!==e?(pe.setupOptions[i]=t[i],pe[i]=t[i]):m[i]===e?s=!1:pe[i]instanceof Function?pe[i].apply(pe,t[i]instanceof Array?t[i]:[t[i]]):pe[i]=t[i];else{if(m[i]!==e)return f(t[i],i);s=!1}return s},ee=function(){function e(t){t=Ee.call(t);var e=t.length;return i?(t[1]="on"+t[1],e>3&&t.pop()):3===e&&t.push(!1),t}function n(t,e){var n=t.shift(),a=[s[e]];i?n[a](t[0],t[1]):n[a].apply(n,t)}var i=t.attachEvent,s={add:i?"attachEvent":"addEventListener",remove:i?"detachEvent":"removeEventListener"};return{add:function(){n(e(arguments),"add")},remove:function(){n(e(arguments),"remove")}}}(),re={abort:a(function(){}),canplay:a(function(){var t,n=this._s;if(n._html5_canplay)return!0;if(n._html5_canplay=!0,n._onbufferchange(0),t=n._iO.position===e||isNaN(n._iO.position)?null:n._iO.position/1e3,this.currentTime!==t)try{this.currentTime=t}catch(i){}n._iO._oncanplay&&n._iO._oncanplay()}),canplaythrough:a(function(){var t=this._s;t.loaded||(t._onbufferchange(0),t._whileloading(t.bytesLoaded,t.bytesTotal,t._get_html5_duration()),t._onload(!0))}),durationchange:a(function(){var t,e=this._s;t=e._get_html5_duration(),isNaN(t)||t===e.duration||(e.durationEstimate=e.duration=t)}),ended:a(function(){this._s._onfinish()}),error:a(function(){this._s._onload(!1)}),loadeddata:a(function(){var t=this._s;t._loaded||He||(t.duration=t._get_html5_duration())}),loadedmetadata:a(function(){}),loadstart:a(function(){this._s._onbufferchange(1)}),play:a(function(){this._s._onbufferchange(0)}),playing:a(function(){this._s._onbufferchange(0)}),progress:a(function(t){var e,n,i=this._s,s=0,s=t.target.buffered;e=t.loaded||0;var a=t.total||1;if(i.buffered=[],s&&s.length){for(e=0,n=s.length;n>e;e++)i.buffered.push({start:1e3*s.start(e),end:1e3*s.end(e)});s=1e3*(s.end(0)-s.start(0)),e=Math.min(1,s/(1e3*t.target.duration))}isNaN(e)||(i._whileloading(e,a,i._get_html5_duration()),e&&a&&e===a&&re.canplaythrough.call(this,t))}),ratechange:a(function(){}),suspend:a(function(t){var e=this._s;re.progress.call(this,t),e._onsuspend()}),stalled:a(function(){}),timeupdate:a(function(){this._s._onTimer()}),waiting:a(function(){this._s._onbufferchange(1)})},Q=function(t){return t&&(t.type||t.url||t.serverURL)?t.serverURL||t.type&&s(t.type)?!1:t.type?G({type:t.type}):G({url:t.url})||pe.html5Only||t.url.match(/data\:/i):!1},K=function(t){var n;return t&&(n=He?"about:blank":pe.html5.canPlayType("audio/wav")?"data:audio/wave;base64,/UklGRiYAAABXQVZFZm10IBAAAAABAAEARKwAAIhYAQACABAAZGF0YQIAAAD//w==":"about:blank",t.src=n,t._called_unload!==e&&(t._called_load=!1)),je&&(ne=null),n},G=function(t){if(!pe.useHTML5Audio||!pe.hasHTML5)return!1;var n=t.url||null;t=t.type||null;var i,a=pe.audioFormats;if(t&&pe.html5[t]!==e)return pe.html5[t]&&!s(t);if(!J){J=[];for(i in a)a.hasOwnProperty(i)&&(J.push(i),a[i].related&&(J=J.concat(a[i].related)));J=new RegExp("\\.("+J.join("|")+")(\\?.*)?$","i")}return(i=n?n.toLowerCase().match(J):null)&&i.length?i=i[1]:t&&(n=t.indexOf(";"),i=(-1!==n?t.substr(0,n):t).substr(6)),i&&pe.html5[i]!==e?n=pe.html5[i]&&!s(i):(t="audio/"+i,n=pe.html5.canPlayType({type:t}),n=(pe.html5[i]=n)&&pe.html5[t]&&!s(t)),n},te=function(){function t(t){var e,n=e=!1;if(!r||"function"!=typeof r.canPlayType)return e;if(t instanceof Array){for(a=0,e=t.length;e>a;a++)(pe.html5[t[a]]||r.canPlayType(t[a]).match(pe.html5Test))&&(n=!0,pe.html5[t[a]]=!0,pe.flash[t[a]]=!!t[a].match(ze));e=n}else t=r&&"function"==typeof r.canPlayType?r.canPlayType(t):!1,e=!(!t||!t.match(pe.html5Test));return e}if(!pe.useHTML5Audio||!pe.hasHTML5)return Oe=pe.html5.usingFlash=!0,!1;var n,i,s,a,r=Audio!==e?Le&&10>opera.version()?new Audio(null):new Audio:null,o={};s=pe.audioFormats;for(n in s)if(s.hasOwnProperty(n)&&(i="audio/"+n,o[n]=t(s[n].type),o[i]=o[n],n.match(ze)?(pe.flash[n]=!0,pe.flash[i]=!0):(pe.flash[n]=!1,pe.flash[i]=!1),s[n]&&s[n].related))for(a=s[n].related.length-1;a>=0;a--)o["audio/"+s[n].related[a]]=o[n],pe.html5[s[n].related[a]]=o[n],pe.flash[s[n].related[a]]=o[n];return o.canPlayType=r?t:null,pe.html5=h(pe.html5,o),pe.html5.usingFlash=Y(),Oe=pe.html5.usingFlash,!0},M={},L=function(){},F=function(t){return 8===c&&1<t.loops&&t.stream&&(t.stream=!1),t},q=function(t){return t&&!t.usePolicyFile&&(t.onid3||t.usePeakData||t.useWaveformData||t.useEQData)&&(t.usePolicyFile=!0),t},l=function(){return!1},$=function(t){for(var e in t)t.hasOwnProperty(e)&&"function"==typeof t[e]&&(t[e]=l)},R=function(t){t===e&&(t=!1),(_e||t)&&pe.disable(t)},H=function(t){var e=null;if(t)if(t.match(/\.swf(\?.*)?$/i)){if(e=t.substr(t.toLowerCase().lastIndexOf(".swf?")+4))return t}else t.lastIndexOf("/")!==t.length-1&&(t+="/");return t=(t&&-1!==t.lastIndexOf("/")?t.substr(0,t.lastIndexOf("/")+1):"./")+pe.movieURL,pe.noSWFCache&&(t+="?ts="+(new Date).getTime()),t},k=function(){c=parseInt(pe.flashVersion,10),8!==c&&9!==c&&(pe.flashVersion=c=8);var t=pe.debugMode||pe.debugFlash?"_debug.swf":".swf";pe.useHTML5Audio&&!pe.html5Only&&pe.audioFormats.mp4.required&&9>c&&(pe.flashVersion=c=9),pe.version=pe.versionNumber+(pe.html5Only?" (HTML5-only mode)":9===c?" (AS3/Flash 9)":" (AS2/Flash 8)"),c>8?(pe.defaultOptions=h(pe.defaultOptions,pe.flash9Options),pe.features.buffering=!0,pe.defaultOptions=h(pe.defaultOptions,pe.movieStarOptions),pe.filePatterns.flash9=new RegExp("\\.(mp3|"+We.join("|")+")(\\?.*)?$","i"),pe.features.movieStar=!0):pe.features.movieStar=!1,pe.filePattern=pe.filePatterns[8!==c?"flash9":"flash8"],pe.movieURL=(8===c?"soundmanager2.swf":"soundmanager2_flash9.swf").replace(".swf",t),pe.features.peakData=pe.features.waveformData=pe.features.eqData=c>8},A=function(t,e){return ce?void ce._setPolling(t,e):!1},I=function(){},V=this.getSoundById,B=function(){var t=[];return pe.debugMode&&t.push("sm2_debug"),pe.debugFlash&&t.push("flash_debug"),pe.useHighPerformance&&t.push("high_performance"),t.join(" ")},D=function(){L("fbHandler");var t=pe.getMoviePercent(),e={type:"FLASHBLOCK"};return pe.html5Only?!1:void(pe.ok()?pe.oMC&&(pe.oMC.className=[B(),"movieContainer","swf_loaded"+(pe.didFlashBlock?" swf_unblocked":"")].join(" ")):(Oe&&(pe.oMC.className=B()+" movieContainer "+(null===t?"swf_timedout":"swf_error")),pe.didFlashBlock=!0,v({type:"ontimeout",ignoreInit:!0,error:e}),S(e)))},g=function(t,n,i){me[t]===e&&(me[t]=[]),me[t].push({method:n,scope:i||null,fired:!1})},v=function(t){if(t||(t={type:pe.ok()?"onready":"ontimeout"}),!ye&&t&&!t.ignoreInit||"ontimeout"===t.type&&(pe.ok()||_e&&!t.ignoreInit))return!1;var e,n={success:t&&t.ignoreInit?pe.ok():!_e},i=t&&t.type?me[t.type]||[]:[],s=[],n=[n],a=Oe&&!pe.ok();for(t.error&&(n[0].error=t.error),t=0,e=i.length;e>t;t++)!0!==i[t].fired&&s.push(i[t]);if(s.length)for(t=0,e=s.length;e>t;t++)s[t].scope?s[t].method.apply(s[t].scope,n):s[t].method.apply(this,n),a||(s[t].fired=!0);return!0},y=function(){t.setTimeout(function(){pe.useFlashBlock&&D(),v(),"function"==typeof pe.onload&&pe.onload.apply(t),pe.waitForWindowLoad&&ee.add(t,"load",y)},1)},se=function(){if(ie!==e)return ie;var n,i=!1,s=navigator,a=s.plugins,r=t.ActiveXObject;if(a&&a.length)(s=s.mimeTypes)&&s["application/x-shockwave-flash"]&&s["application/x-shockwave-flash"].enabledPlugin&&s["application/x-shockwave-flash"].enabledPlugin.description&&(i=!0);else if(r!==e&&!de.match(/MSAppHost/i)){try{n=new r("ShockwaveFlash.ShockwaveFlash")}catch(o){n=null}i=!!n}return ie=i},Y=function(){var t,e,n=pe.audioFormats;if(Ae&&de.match(/os (1|2|3_0|3_1)\s/i)?(pe.hasHTML5=!1,pe.html5Only=!0,pe.oMC&&(pe.oMC.style.display="none")):!pe.useHTML5Audio||pe.html5&&pe.html5.canPlayType||(pe.hasHTML5=!1),pe.useHTML5Audio&&pe.hasHTML5)for(e in W=!0,n)n.hasOwnProperty(e)&&n[e].required&&(pe.html5.canPlayType(n[e].type)?pe.preferFlash&&(pe.flash[e]||pe.flash[n[e].type])&&(t=!0):(W=!1,t=!0));return pe.ignoreFlash&&(t=!1,W=!0),pe.html5Only=pe.hasHTML5&&pe.useHTML5Audio&&!t,!pe.html5Only},X=function(t){var e,n,i=0;if(t instanceof Array){for(e=0,n=t.length;n>e;e++)if(t[e]instanceof Object){if(pe.canPlayMIME(t[e].type)){i=e;break}}else if(pe.canPlayURL(t[e])){i=e;break}t[i].url&&(t[i]=t[i].url),t=t[i]}return t},z=function(t){t._hasTimer||(t._hasTimer=!0,!De&&pe.html5PollingInterval&&(null===Pe&&0===xe&&(Pe=setInterval(U,pe.html5PollingInterval)),xe++))},N=function(t){t._hasTimer&&(t._hasTimer=!1,!De&&pe.html5PollingInterval&&xe--)},U=function(){var t;if(null!==Pe&&!xe)return clearInterval(Pe),Pe=null,!1;for(t=pe.soundIDs.length-1;t>=0;t--)pe.sounds[pe.soundIDs[t]].isHTML5&&pe.sounds[pe.soundIDs[t]]._hasTimer&&pe.sounds[pe.soundIDs[t]]._onTimer()},S=function(n){n=n!==e?n:{},"function"==typeof pe.onerror&&pe.onerror.apply(t,[{type:n.type!==e?n.type:null}]),n.fatal!==e&&n.fatal&&pe.disable()},ae=function(){if(!Be||!se())return!1;var t,e,n=pe.audioFormats;for(e in n)if(n.hasOwnProperty(e)&&("mp3"===e||"mp4"===e)&&(pe.html5[e]=!1,n[e]&&n[e].related))for(t=n[e].related.length-1;t>=0;t--)pe.html5[n[e].related[t]]=!1},this._setSandboxType=function(){},this._externalInterfaceOK=function(){return pe.swfLoaded?!1:(pe.swfLoaded=!0,qe=!1,Be&&ae(),void setTimeout(u,$e?100:1))},j=function(t,n){function i(t,e){return'<param name="'+t+'" value="'+e+'" />'}if(ge&&ve)return!1;if(pe.html5Only)return k(),pe.oMC=o(pe.movieID),u(),ve=ge=!0,!1;var s,a,r,l=n||pe.url,p=pe.altURL||l,c=E(),d=B(),h=null,h=fe.getElementsByTagName("html")[0],h=h&&h.dir&&h.dir.match(/rtl/i);if(t=t===e?pe.id:t,k(),pe.url=H(Ne?l:p),n=pe.url,pe.wmode=!pe.wmode&&pe.useHighPerformance?"transparent":pe.wmode,null!==pe.wmode&&(de.match(/msie 8/i)||!$e&&!pe.useHighPerformance)&&navigator.platform.match(/win32|win64/i)&&(Te.push(M.spcWmode),pe.wmode=null),c={name:t,id:t,src:n,quality:"high",allowScriptAccess:pe.allowScriptAccess,bgcolor:pe.bgColor,pluginspage:Ue+"www.macromedia.com/go/getflashplayer",title:"JS/Flash audio component (SoundManager 2)",type:"application/x-shockwave-flash",wmode:pe.wmode,hasPriority:"true"},pe.debugFlash&&(c.FlashVars="debug=1"),pe.wmode||delete c.wmode,$e)l=fe.createElement("div"),a=['<object id="'+t+'" data="'+n+'" type="'+c.type+'" title="'+c.title+'" classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" codebase="http://download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=6,0,40,0">',i("movie",n),i("AllowScriptAccess",pe.allowScriptAccess),i("quality",c.quality),pe.wmode?i("wmode",pe.wmode):"",i("bgcolor",pe.bgColor),i("hasPriority","true"),pe.debugFlash?i("FlashVars",c.FlashVars):"","</object>"].join("");else for(s in l=fe.createElement("embed"),c)c.hasOwnProperty(s)&&l.setAttribute(s,c[s]);if(I(),d=B(),c=E())if(pe.oMC=o(pe.movieID)||fe.createElement("div"),pe.oMC.id)r=pe.oMC.className,pe.oMC.className=(r?r+" ":"movieContainer")+(d?" "+d:""),pe.oMC.appendChild(l),$e&&(s=pe.oMC.appendChild(fe.createElement("div")),s.className="sm2-object-box",s.innerHTML=a),ve=!0;else{if(pe.oMC.id=pe.movieID,pe.oMC.className="movieContainer "+d,s=d=null,pe.useFlashBlock||(pe.useHighPerformance?d={position:"fixed",width:"8px",height:"8px",bottom:"0px",left:"0px",overflow:"hidden"}:(d={position:"absolute",width:"6px",height:"6px",top:"-9999px",left:"-9999px"},h&&(d.left=Math.abs(parseInt(d.left,10))+"px"))),Re&&(pe.oMC.style.zIndex=1e4),!pe.debugFlash)for(r in d)d.hasOwnProperty(r)&&(pe.oMC.style[r]=d[r]);try{$e||pe.oMC.appendChild(l),c.appendChild(pe.oMC),$e&&(s=pe.oMC.appendChild(fe.createElement("div")),s.className="sm2-object-box",s.innerHTML=a),ve=!0}catch(f){throw Error(L("domError")+" \n"+f.toString())}}return ge=!0},x=function(){return pe.html5Only?(j(),!1):ce||!pe.url?!1:(ce=pe.getMovie(pe.id),ce||(be?($e?pe.oMC.innerHTML=ke:pe.oMC.appendChild(be),be=null,ge=!0):j(pe.id,pe.url),ce=pe.getMovie(pe.id)),"function"==typeof pe.oninitmovie&&setTimeout(pe.oninitmovie,1),!0)},_=function(){setTimeout(w,1e3)},b=function(){t.setTimeout(function(){pe.setup({preferFlash:!1}).reboot(),pe.didFlashBlock=!0,pe.beginDelayedInit()},1)},w=function(){var e,n=!1;return!pe.url||Ce?!1:(Ce=!0,ee.remove(t,"load",_),ie&&qe&&!Fe?!1:(ye||(e=pe.getMoviePercent(),e>0&&100>e&&(n=!0)),void setTimeout(function(){return e=pe.getMoviePercent(),n?(Ce=!1,t.setTimeout(_,1),!1):void(!ye&&Ve&&(null===e?pe.useFlashBlock||0===pe.flashLoadTimeout?pe.useFlashBlock&&D():!pe.useFlashBlock&&W?b():v({type:"ontimeout",ignoreInit:!0,error:{type:"INIT_FLASHBLOCK"}}):0!==pe.flashLoadTimeout&&(!pe.useFlashBlock&&W?b():R(!0))))},pe.flashLoadTimeout)))},C=function(){return Fe||!qe?(ee.remove(t,"focus",C),!0):(Fe=Ve=!0,Ce=!1,_(),ee.remove(t,"focus",C),!0)},d=function(e){if(ye)return!1;
if(pe.html5Only)return ye=!0,y(),!0;var n,i=!0;return pe.useFlashBlock&&pe.flashLoadTimeout&&!pe.getMoviePercent()||(ye=!0),n={type:!ie&&Oe?"NO_FLASH":"INIT_TIMEOUT"},(_e||e)&&(pe.useFlashBlock&&pe.oMC&&(pe.oMC.className=B()+" "+(null===pe.getMoviePercent()?"swf_timedout":"swf_error")),v({type:"ontimeout",error:n,ignoreInit:!0}),S(n),i=!1),_e||(pe.waitForWindowLoad&&!we?ee.add(t,"load",y):y()),i},p=function(){var t,n=pe.setupOptions;for(t in n)n.hasOwnProperty(t)&&(pe[t]===e?pe[t]=n[t]:pe[t]!==n[t]&&(pe.setupOptions[t]=pe[t]))},u=function(){if(ye)return!1;if(pe.html5Only)return ye||(ee.remove(t,"load",pe.beginDelayedInit),pe.enabled=!0,d()),!0;x();try{ce._externalInterfaceTest(!1),A(!0,pe.flashPollingInterval||(pe.useHighPerformance?10:50)),pe.debugMode||ce._disableDebug(),pe.enabled=!0,pe.html5Only||ee.add(t,"unload",l)}catch(e){return S({type:"JS_TO_FLASH_EXCEPTION",fatal:!0}),R(!0),d(),!1}return d(),ee.remove(t,"load",pe.beginDelayedInit),!0},P=function(){return O?!1:(O=!0,p(),I(),!ie&&pe.hasHTML5&&pe.setup({useHTML5Audio:!0,preferFlash:!1}),te(),!ie&&Oe&&(Te.push(M.needFlash),pe.setup({flashLoadTimeout:1})),fe.removeEventListener&&fe.removeEventListener("DOMContentLoaded",P,!1),x(),!0)},Z=function(){return"complete"===fe.readyState&&(P(),fe.detachEvent("onreadystatechange",Z)),!0},T=function(){we=!0,P(),ee.remove(t,"load",T)},se(),ee.add(t,"focus",C),ee.add(t,"load",_),ee.add(t,"load",T),fe.addEventListener?fe.addEventListener("DOMContentLoaded",P,!1):fe.attachEvent?fe.attachEvent("onreadystatechange",Z):S({type:"NO_DOM2_EVENTS",fatal:!0})}if(!t||!t.document)throw Error("SoundManager requires a browser with window and document objects.");var i=null;t.SM2_DEFER!==e&&SM2_DEFER||(i=new n),"object"==typeof module&&module&&"object"==typeof module.exports?(module.exports.SoundManager=n,module.exports.soundManager=i):"function"==typeof r&&r.amd&&r("soundmanager2",[],function(){return{constructor:n,getInstance:function(e){return!t.soundManager&&e instanceof Function&&(e=e(n),e instanceof n&&(t.soundManager=e)),t.soundManager}}}),t.SoundManager=n,t.soundManager=i}(window),r("text",["module"],function(t){"use strict";var e,n,i,s,r,o=["Msxml2.XMLHTTP","Microsoft.XMLHTTP","Msxml2.XMLHTTP.4.0"],l=/^\s*<\?xml(\s)+version=[\'\"](\d)*.(\d)*[\'\"](\s)*\?>/im,p=/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im,u="undefined"!=typeof location&&location.href,c=u&&location.protocol&&location.protocol.replace(/\:/,""),d=u&&location.hostname,h=u&&(location.port||void 0),f={},m=t.config&&t.config()||{};return e={version:"2.0.10",strip:function(t){if(t){t=t.replace(l,"");var e=t.match(p);e&&(t=e[1])}else t="";return t},jsEscape:function(t){return t.replace(/(['\\])/g,"\\$1").replace(/[\f]/g,"\\f").replace(/[\b]/g,"\\b").replace(/[\n]/g,"\\n").replace(/[\t]/g,"\\t").replace(/[\r]/g,"\\r").replace(/[\u2028]/g,"\\u2028").replace(/[\u2029]/g,"\\u2029")},createXhr:m.createXhr||function(){var t,e,n;if("undefined"!=typeof XMLHttpRequest)return new XMLHttpRequest;if("undefined"!=typeof ActiveXObject)for(e=0;3>e;e+=1){n=o[e];try{t=new ActiveXObject(n)}catch(i){}if(t){o=[n];break}}return t},parseName:function(t){var e,n,i,s=!1,a=t.indexOf("."),r=0===t.indexOf("./")||0===t.indexOf("../");return-1!==a&&(!r||a>1)?(e=t.substring(0,a),n=t.substring(a+1,t.length)):e=t,i=n||e,a=i.indexOf("!"),-1!==a&&(s="strip"===i.substring(a+1),i=i.substring(0,a),n?n=i:e=i),{moduleName:e,ext:n,strip:s}},xdRegExp:/^((\w+)\:)?\/\/([^\/\\]+)/,useXhr:function(t,n,i,s){var a,r,o,l=e.xdRegExp.exec(t);return l?(a=l[2],r=l[3],r=r.split(":"),o=r[1],r=r[0],!(a&&a!==n||r&&r.toLowerCase()!==i.toLowerCase()||(o||r)&&o!==s)):!0},finishLoad:function(t,n,i,s){i=n?e.strip(i):i,m.isBuild&&(f[t]=i),s(i)},load:function(t,n,i,s){if(s.isBuild&&!s.inlineText)return void i();m.isBuild=s.isBuild;var a=e.parseName(t),r=a.moduleName+(a.ext?"."+a.ext:""),o=n.toUrl(r),l=m.useXhr||e.useXhr;return 0===o.indexOf("empty:")?void i():void(!u||l(o,c,d,h)?e.get(o,function(n){e.finishLoad(t,a.strip,n,i)},function(t){i.error&&i.error(t)}):n([r],function(t){e.finishLoad(a.moduleName+"."+a.ext,a.strip,t,i)}))},write:function(t,n,i){if(f.hasOwnProperty(n)){var s=e.jsEscape(f[n]);i.asModule(t+"!"+n,"define(function () { return '"+s+"';});\n")}},writeFile:function(t,n,i,s,a){var r=e.parseName(n),o=r.ext?"."+r.ext:"",l=r.moduleName+o,p=i.toUrl(r.moduleName+o)+".js";e.load(l,i,function(){var n=function(t){return s(p,t)};n.asModule=function(t,e){return s.asModule(t,p,e)},e.write(t,l,n,a)},a)}},"node"===m.env||!m.env&&"undefined"!=typeof process&&process.versions&&process.versions.node&&!process.versions["node-webkit"]?(n=a.nodeRequire("fs"),e.get=function(t,e,i){try{var s=n.readFileSync(t,"utf8");0===s.indexOf("")&&(s=s.substring(1)),e(s)}catch(a){i(a)}}):"xhr"===m.env||!m.env&&e.createXhr()?e.get=function(t,n,i,s){var a,r=e.createXhr();if(r.open("GET",t,!0),s)for(a in s)s.hasOwnProperty(a)&&r.setRequestHeader(a.toLowerCase(),s[a]);m.onXhr&&m.onXhr(r,t),r.onreadystatechange=function(){var e,s;4===r.readyState&&(e=r.status,e>399&&600>e?(s=new Error(t+" HTTP status: "+e),s.xhr=r,i(s)):n(r.responseText),m.onXhrComplete&&m.onXhrComplete(r,t))},r.send(null)}:"rhino"===m.env||!m.env&&"undefined"!=typeof Packages&&"undefined"!=typeof java?e.get=function(t,e){var n,i,s="utf-8",a=new java.io.File(t),r=java.lang.System.getProperty("line.separator"),o=new java.io.BufferedReader(new java.io.InputStreamReader(new java.io.FileInputStream(a),s)),l="";try{for(n=new java.lang.StringBuffer,i=o.readLine(),i&&i.length()&&65279===i.charAt(0)&&(i=i.substring(1)),null!==i&&n.append(i);null!==(i=o.readLine());)n.append(r),n.append(i);l=String(n.toString())}finally{o.close()}e(l)}:("xpconnect"===m.env||!m.env&&"undefined"!=typeof Components&&Components.classes&&Components.interfaces)&&(i=Components.classes,s=Components.interfaces,Components.utils["import"]("resource://gre/modules/FileUtils.jsm"),r="@mozilla.org/windows-registry-key;1"in i,e.get=function(t,e){var n,a,o,l={};r&&(t=t.replace(/\//g,"\\")),o=new FileUtils.File(t);try{n=i["@mozilla.org/network/file-input-stream;1"].createInstance(s.nsIFileInputStream),n.init(o,1,0,!1),a=i["@mozilla.org/intl/converter-input-stream;1"].createInstance(s.nsIConverterInputStream),a.init(n,"utf-8",n.available(),s.nsIConverterInputStream.DEFAULT_REPLACEMENT_CHARACTER),a.readString(n.available(),l),a.close(),n.close(),e(l.value)}catch(p){throw new Error((o&&o.path||"")+": "+p)}}),e}),r("text!templates/spp-template.html",[],function(){return'<div class="spp-player-container"></div>\r\n<div class="spp-player-body">\r\n	<div class="spp-track-details-container"></div>\r\n	<div class="spp-playlist-container"></div>\r\n</div>\r\n<div style="clear: both;"></div>\r\n'}),r("text!templates/player-template.html",[],function(){return'<% if ( data.show_logo != undefined && data.show_logo != null ) { %>\r\n	<div class="spp-show-logo">\r\n		<img src="<%= data.show_logo %>" alt="<%= data.show_name %>" />\r\n	</div>\r\n<% } %>\r\n\r\n<div class="spp-track" data-track-id="<%= \'track_\' + data.cid %>">\r\n	<p class="spp-show-title"><%= data.show_name %><span class="spp-show-count"></span></p>\r\n	<h3 class="spp-track-title"><%= data.title %></h3>\r\n	<p class="spp-duration"></p>\r\n	\r\n	<div class="spp-progress">\r\n		<div class="spp-current-time"></div>\r\n		<div class="spp-position"></div>\r\n		<div class="spp-seek-time"></div>\r\n	</div>\r\n\r\n	<div class="spp-loaded-container">\r\n		<div class="spp-loaded"></div>\r\n	</div>\r\n	\r\n	<div class="spp-controls">\r\n		<% if ( data.paid == true ) { %>\r\n			<% if ( data.speedcontrol == true ) { %>\r\n				<span class="spp-speed"></span>\r\n			<% } %>\r\n		<% } %>\r\n		<span class="spp-previous"></span>\r\n		<span class="spp-play"></span>\r\n		<span class="spp-next"></span>\r\n	</div>\r\n\r\n	<a href="" class="spp-button spp-show-notes-button">Show Notes</a>\r\n	\r\n</div>'}),r("text!templates/podcast-track-template.html",[],function(){return'<div class="spp-track-row">\r\n	<div class="spp-episode">\r\n		<% if ( data.show_episode_numbers == true ) { %>\r\n			<span class="spp-number"><%= parseInt( data.episode_number, 10) %></span>\r\n			<span class="spp-play"></span>\r\n		<% } else { %>\r\n			<span class="spp-play-hidden-numbers"></span>\r\n			<span class="spp-play"></span>\r\n		<% } %>\r\n	</div>\r\n	<div class="spp-track-title">\r\n		<h3 class="spp-playlist-track-title"><%= data.title_without_episode_number %></h3>\r\n	</div>\r\n</div>'}),r("text!templates/playlist-template.html",[],function(){return'<div class="spp-playlist-header"></div>\r\n<div class="spp-playlist-tracks"></div>\r\n<div class="spp-playlist-footer"></div>'}),r("text!templates/playlist-header-template.html",[],function(){return""}),r("text!templates/playlist-footer-template.html",[],function(){return'<div class="spp-sort-footer">\r\n	<div class="spp-sort"></div>\r\n</div>\r\n<% if ( AP_Player.licensed == true ) { %>\r\n	<div class="spp-playlist-pagination">\r\n		<a href="" class="spp-playlist-prev-page">&lt;</a> <%= data.current_page %> of <%= data.num_pages %> <a href="" class="spp-playlist-next-page">&gt;</a> \r\n	</div>\r\n<% } else { %>\r\n	<div class="spp-logo"></div>\r\n<% } %>\r\n'}),r("text!templates/current-track-template.html",[],function(){return'<div class="spp-current-track-header">\r\n  <div class="spp-track-title-row">\r\n    <h3 class="spp-track-title"><%= title %></h3>\r\n  </div>\r\n\r\n  <div class="spp-progress-row">\r\n    <div class="current-time"><%= current_time %></div>\r\n    <div class="progress-container">\r\n      <div class="progress-icon"></div>\r\n      <div class="progress-bar"></div>\r\n    </div>\r\n    <div class="total-time"><%= duration_time %></div>\r\n  </div>\r\n\r\n  <div class="player-action-row">\r\n    <div class="player-controls">\r\n      <span class="previous-btn"></span>\r\n      <span class="play-pause-btn"></span>\r\n      <span class="next-btn"></span>\r\n    </div>\r\n    <div class="player-download">\r\n      <a href="<%= download_url %>" class="download-btn">Download</a>\r\n      <a href="" class="details-btn">More Details</a>\r\n    </div>\r\n  </div>\r\n</div>\r\n<div class="current-track-body">\r\n  <div class="track-show-notes">\r\n    <h4 class="show-notes-header">Show Notes</h4>\r\n    <%= show_notes %>\r\n  </div>\r\n  <div class="track-tags">\r\n    <h4 class="tags-header">Tags</h4>\r\n    <ul class="tag-list"></ul>\r\n  </div>\r\n  <div class="track-share">\r\n    <h4 class="share-header">Share This Episode</h4>\r\n    <a href="" class="share-btn twitter-btn">Twitter</a>\r\n    <a href="" class="share-btn fb-btn">Facebook</a>\r\n    <a href="" class="share-btn gplus-btn">Google+</a>\r\n    <a href="mailto:?subject=<%= show_title %>: <%= encodeURIComponent( title ) %>&amp;body=Hi,%0D%0A%0D%0AI thought you might enjoy this episode of <%= show_title %>:%0D%0A%0D%0A <%= permalink_url %> %0D%0A%0D%0AEnjoy!" class="share-btn email-btn" target="_blank">Email</a>\r\n  </div>\r\n  <div class="track-actions">\r\n    <h4 class="action-header">Actions</h4>\r\n    <a href="<%= download_url %>" class="download-btn">Download</a>\r\n  </div>\r\n</div>\r\n<span id="ap-player-logo"></span>'}),r("apps/smart-podcast-player/core/view",["app","text!templates/spp-template.html","text!templates/player-template.html","text!templates/podcast-track-template.html","text!templates/playlist-template.html","text!templates/playlist-header-template.html","text!templates/playlist-footer-template.html","text!templates/current-track-template.html"],function(t,e){return t.module("AskPatPlayerApp.Core.View",function(t,n,i,s,a,r){t.AP_Player=s.Layout.extend({template:r.template(e),regions:{playerRegion:".spp-player-container",trackDetailsRegion:".spp-track-details-container",playlistRegion:".spp-playlist-container"},onRender:function(){this.$(".spp-player-container").show()}})}),t.AskPatPlayerApp.Core.View}),r("entities/podcast-track",["app"],function(t){t.module("Entities",function(t,e,s,a,r,o){var l=[],p=[],u=[],c=[];t.Player=s.Model.extend({defaults:{data:{}}}),t.Track=s.Model.extend({defaults:{data:{active:!1,artwork_url:"",attachments_uri:"",bpm:null,comment_count:0,commentable:!0,created_at:"",current_time:"0:00:00",description:"",download_count:0,download_url:"",downloadable:!0,download:!0,duration:0,duration_time:"0:00:00",episode_number:0,embeddable_by:"all",email:"",fallback_permalink:"",favoritings_count:0,genre:"",id:0,isrc:"",key_signature:"",kind:"track",label_id:null,label_name:"",license:"",method:"file",original_content_size:0,original_format:"mp3",paid:!1,permalink:"",permalink_url:"",playing:!1,playback_count:0,purchase_title:null,purchase_url:null,release:"",release_day:null,release_month:null,release_year:null,sharing:"",show_name:"",state:"",stream_url:"",streamable:!0,subscription:"",tag_list:"",tags:"",tag_string:"",title:"",track_type:"",uri:"",user:{avatar_url:"",id:0,kind:"user",permalink:"",permalink_url:"",uri:"",username:""},user_id:0,video_url:null,waveform_url:"",show_notes:""}}}),t.Tracks=s.Collection.extend({model:t.Track,comparators:{newest:function(t){return-t.get("id")},oldest:function(t){return t.get("id")},mostPopular:function(t){return-t.get("playback_count")},leastPopular:function(t){return t.get("playback_count")}},setComparator:function(t){return this.comparator=this.comparators[t],this},totalPlaybackCount:function(){return this.reduce(function(t,e){var n=e.get("data");return n.playback_count},0)}});var d=function(s,a,o){var p,u=s.model.get("options"),d=s.model.get("region"),h=u.stream,f=new Array,m={action:"get_spplayer_tracks",stream:h,episode_limit:u.episode_limit};r.ajax({url:AP_Player.ajaxurl,dataType:"json",type:"POST",async:!0,data:m,success:function(h){if(p=h,void 0!=p&&null!=p){var m=p.length;r.each(p,function(e,a){var r=/(?:[^\s"]+|"[^"]*")+/g;if(void 0!==a.tag_list&&""!=a.tag_list.trim()){var o=a.tag_list.match(r);o=o.join(",").replace(/\"|\"|\"|\"/g,"").toLowerCase(),a.tag_string=o,o=o.split(","),a.tags=o}else a.tags=new Array;var l=Math.ceil(a.duration/1e3),p=Math.floor(l/60),c=Math.floor(p/60),d=c,h=p%60,g=l%60;if(a.duration_time=d+":"+i(h,2)+":"+i(g,2),a.playing=!1,a.paid=u.paid,void 0!=u.numbering){var v=u.numbering,y=(v.split("#").length-1,new RegExp("[#]{1,10}")),_=v.replace(y,"([0-9]{0,4})"),w=a.title.match(_);w&&(a.episode_number=w[1]);var b=new RegExp(_,"g");a.title_without_episode_number=a.title.replace(b,"")}else a.title_without_episode_number=a.title,a.episode_number=m;a.show_episode_numbers=u.show_episode_numbers,a.download=u.download,a.social=u.social,a.social_twitter=u.social_twitter,a.social_facebook=u.social_facebook,a.social_gplus=u.social_gplus,a.social_linkedin=u.social_linkedin,a.social_stumble=u.social_stumble,a.social_pinterest=u.social_pinterest,a.social_email=u.social_email,a.poweredby=u.poweredby,a.speedcontrol=u.speedcontrol,a.episode_timer=u.episode_timer,a.show_logo=void 0!==u.show_image?u.show_image:a.artwork_url,a.show_name=u.show_name,a.hashtag=u.hashtag,a.fallback_permalink=void 0!=u.permalink?u.permalink:"",a.email="?subject="+encodeURIComponent(a.title.replace(/&amp;/g,"&")),a.email+="&amp;body=Hi,%0D%0A%0D%0AI thought you might enjoy this ",a.email+=void 0!==a.show_name?"episode of "+encodeURIComponent(a.show_name.replace(/&amp;/g,"&"))+":%0D%0A%0D%0A":"podcast:%0D%0A%0D%0A",a.email+=encodeURIComponent(a.title.replace(/&amp;/g,"&"))+"%0D%0A",a.email+=u.permalink?u.permalink+"%0D%0A%0D%0AEnjoy!":a.permalink_url+"%0D%0A%0D%0AEnjoy!",a.method=a.permalink_url.indexOf("soundcloud.com")>0?"soundcloud":"file";var k=/\n/g;if("soundcloud"==a.method){a.show_notes="<p>"+a.description+"</p>",a.show_notes=n(a.show_notes),a.show_notes=a.show_notes.replace(k,"</p><p>");var C=/<p>\s*<\/p>/g;a.show_notes=a.show_notes.replace(C,"")}else a.show_notes=a.description;void 0!=s.model.attributes.options.subscription&&(a.subscription=s.model.attributes.options.subscription),a.stream_url=a.stream_url.indexOf("&")>-1?a.stream_url.slice(0,a.stream_url.indexOf("&")):a.stream_url;var M={data:a},x=new t.Track(M),P=x.get("data");P.cid=x.cid,x.set({data:P}),f.push(x),m--})}"oldest"==s.model.attributes.options.sort&&f.reverse(),l[d]=new t.Tracks(f),c[d]=f[0],e.trigger("ajaxReturned",s,l[d],a,o)}})},h=function(e,n,i){var s=e.model.get("region");if(""==i)u[s]=l[s];else{var a=n.filter(function(t){{var e=t.get("data");e.tags}return o.indexOf(e.tags,i)>-1});u[s]=new t.Tracks(a)}return u[s]},f=function(e,n,i,s){var a=e.model.get("region"),o=new Array,l=(i-1)*s,p=i*s;return r.each(n.models,function(t,e){t>=l&&p>t&&o.push(e)}),u[a]=new t.Tracks(o),u[a]},m=function(t){var e=t.model.get("region");void 0===p[e]&&v(t);var n=p[e].find(function(t){var e=t.attributes.data;return e.playing===!0});if(n)return n;var i,s=t.model.get("options"),a=s.featured_episode,r=p[e].length;return"number"==typeof a&&a>0?(a>r&&(a=r),i="oldest"==s.sort?a-1:r-a):i=0,p[e].models[i]},g=function(t,e){var n=t.find(function(t){var n=t.attributes.data;return n.id===e});return n?n:-1},v=function(t){var e=t.model.get("region");return void 0===p[e]&&(void 0===l[e],p[e]=l[e]),p[e]},y={initializeTheTracks:function(t,e,n){d(t,e,n)},getTrackEntities:function(t){var e=t.model.get("region");return void 0===l[e],l[e]},getCurrentTrack:function(t){return m(t)},getPagedTracks:function(t,e,n,i){return f(t,e,n,i)},getCurrentTracks:function(t){return v(t)},getTracksByTag:function(t,e,n){var i=t.model.get("region");return u[i]=h(t,e,n),p[i]=u[i],u[i]},setValueAll:function(t,e,n){var i=t.model.get("region");void 0===p[i]&&v(t),l[i].each(function(t){var i=t.get("data");i[e]=n,t.set({data:i})}),p[i].each(function(t){var i=t.get("data");i[e]=n,t.set({data:i})})},setValue:function(t,e,n,i){var s=t.model.get("region");void 0===p[s]&&v(t);var a=g(l[s],e.attributes.data.id),r=g(p[s],e.attributes.data.id),o=p[s].at(p[s].indexOf(r)),u=o.get("data");u[n]=i;var c=(l[s].at(l[s].indexOf(a)),o.get("data"));c[n]=i},setPreviewedTrack:function(t,e){var n=t.model.get("region");c[n]=e},getPreviewedTrack:function(t){var e=t.model.get("region");return c[e]}};e.reqres.setHandler("tracks:initialize",function(t,e,n){return y.initializeTheTracks(t,e,n)}),e.reqres.setHandler("track:entities",function(t){return y.getTrackEntities(t)}),e.reqres.setHandler("track:entity:current",function(t){return y.getCurrentTrack(t)}),e.reqres.setHandler("track:entities:current",function(t){return y.getCurrentTracks(t)}),e.reqres.setHandler("track:entities:paged",function(t,e,n,i){return y.getPagedTracks(t,e,n,i)}),e.reqres.setHandler("track:entities:tagged",function(t,e,n){return y.getTracksByTag(t,e,n)}),e.reqres.setHandler("track:entities:set",function(t,e,n){y.setValueAll(t,e,n)}),e.reqres.setHandler("track:entity:set",function(t,e,n,i){y.setValue(t,e,n,i)}),e.reqres.setHandler("track:entity:set-previewed",function(t,e){y.setPreviewedTrack(t,e)}),e.reqres.setHandler("track:entity:get-previewed",function(t){return y.getPreviewedTrack(t)})})}),r("entities/podcast-player",["app","entities/podcast-track"],function(t){return t.module("Entities",function(t,e){var n=[],i=function(t){var i=t.model.get("region");n[i]=e.request("track:entity:current",t)},s={getPlayerEntities:function(t){var e=t.model.get("region");return void 0===n[e]&&i(t),n[e]}};e.reqres.setHandler("player:entity",function(t){return s.getPlayerEntities(t)})}),t.Entities}),r("apps/smart-podcast-player/core/controller",["app","apps/smart-podcast-player/core/view","entities/podcast-track","entities/podcast-player","soundmanager2"],function(t,e){return t.module("AskPatPlayerApp.Core",function(t,n,i,s,a){t.Controller={init:function(){a(".smart-podcast-player").each(function(t,s){var r="SPP_"+t,o=new e.AP_Player({model:new i.Model({region:r,options:{stream:a(s).data("stream"),sort:a(s).data("sort"),show_name:a(s).data("showName"),color:a(s).data("color"),link_color:a(s).data("link_color"),numbering:a(s).data("numbering"),show_episode_numbers:a(s).data("show_episode_numbers"),episode_limit:a(s).data("episode_limit"),featured_episode:a(s).data("featured_episode"),download:a(s).data("download"),subscription:a(s).data("subscription"),hide_listens:a(s).data("hide_listens"),show_image:a(s).data("image"),player_uid:a(s).data("uid"),hashtag:a(s).data("hashtag"),social:a(s).data("social"),social_twitter:a(s).data("social_twitter"),social_facebook:a(s).data("social_facebook"),social_gplus:a(s).data("social_gplus"),social_linkedin:a(s).data("social_linkedin"),social_stumble:a(s).data("social_stumble"),social_pinterest:a(s).data("social_pinterest"),social_email:a(s).data("social_email"),poweredby:a(s).data("poweredby"),speedcontrol:a(s).data("speedcontrol"),episode_timer:a(s).data("episode_timer"),hover_timestamp:a(s).data("hover_timestamp"),permalink:a(s).data("permalink"),current_page:1,tracks_per_page:10,paid:a(s).data("paid"),consumer_key:AP_Player.soundcloudConsumerKey}})});0!=o.model.get("options").hover_timestamp&&(o.model.get("options").hover_timestamp=!0);var l=new i.Marionette.Region({el:a(s)});n.request("tracks:initialize",o,l,r)})}},n.on("ajaxReturned",function(t,e,i,s){n.regions=n.regions?n.regions:{},n[s]=i,n.trigger("playlist:init",t),n.trigger("track-details:init",t),n.trigger("player:init",t),n[s].show(t)})}),t.AskPatPlayerApp.Core.Controller}),r("apps/smart-podcast-player/playlist/view",["app","text!templates/podcast-track-template.html","text!templates/playlist-template.html","text!templates/playlist-header-template.html","text!templates/playlist-footer-template.html"],function(t,e,n,s,a){return t.module("AskPatPlayerApp.Playlist.View",function(t,r,o,l,p,u){t.Track=l.ItemView.extend({template:u.template(e),className:"spp-track",triggers:{"click .spp-play":"track:play","click .spp-track-title":"track:preview"},modelEvents:{change:"render"},events:{},initialize:function(){this.spp_elements={spp:null,loaded_container:null,loaded:null,duration:null,position:null,current_time:null}},createSound:function(){var t=this,e=this.model.get("data"),n="track_"+this.model.cid,s=e.stream_url+"?consumer_key="+AP_Player.soundcloudConsumerKey;soundManager.createSound({id:n,url:s,hover:!1,onplay:function(){t.spp_elements.spp=null!==t.spp_elements.spp?t.spp_elements.spp:p(t.$el).parents(".smart-podcast-player"),p(t.spp_elements.spp).addClass("spp-playing")},onresume:function(){t.spp_elements.spp=null!==t.spp_elements.spp?t.spp_elements.spp:p(t.$el).parents(".smart-podcast-player"),p(t.spp_elements.spp).addClass("spp-playing")},onpause:function(){t.spp_elements.spp=null!==t.spp_elements.spp?t.spp_elements.spp:p(t.$el).parents(".smart-podcast-player"),p(t.spp_elements.spp).removeClass("spp-playing")},onfinish:function(){t.trigger("track:next")},whileloading:function(){var e=this.bytesLoaded/this.bytesTotal*100+"%";t.spp_elements.spp=null!==t.spp_elements.spp?t.spp_elements.spp:p(t.$el).parents(".smart-podcast-player"),t.spp_elements.loaded_container=null!==t.spp_elements.loaded_container?t.spp_elements.loaded_container:p(t.spp_elements.spp).find(".spp-loaded-container"),t.spp_elements.loaded=null!==t.spp_elements.loaded?t.spp_elements.loaded:p(t.spp_elements.loaded_container).find(".spp-loaded"),p(t.spp_elements.loaded).cssExtended("width",e,"important")},whileplaying:function(){var n,s,a,r,o=this.durationEstimate,l=this.position,u=o-l;n=l/1e3,s=n/60,a=s/60,r=i(Math.floor(s%60),2)+":"+i(Math.floor(n%60),2),Math.floor(a)>0&&(r=Math.floor(a)+":"+r),n=u/1e3,s=n/60,a=s/60,remaining_time=i(Math.floor(s),2)+":"+i(Math.floor(n%60),2),t.spp_elements.spp=null!==t.spp_elements.spp?t.spp_elements.spp:p(t.$el).parents(".smart-podcast-player"),t.spp_elements.duration=null!==t.spp_elements.duration?t.spp_elements.duration:p(t.spp_elements.spp).find(".spp-duration"),t.spp_elements.current_time=null!==t.spp_elements.current_time?t.spp_elements.current_time:p(t.spp_elements.spp).find(".spp-current-time"),t.spp_elements.position=null!==t.spp_elements.position?t.spp_elements.position:p(t.spp_elements.spp).find(".spp-position"),"none"==e.episode_timer||p(t.spp_elements.duration).text("up"==e.episode_timer?r:"-"+remaining_time);var c=l/o*100;t.trigger("track:progress:update",c),p(t.spp_elements.current_time).cssExtended("width",c+"%","important");var d=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),h=t.spp_elements.spp.find(".spp-player");(!h.hasClass("spp-hover")||d)&&p(t.spp_elements.position).cssExtended("left",c+"%","important")}})},onRender:function(){var t=this.model.get("data"),e="track_"+this.model.cid;t.active===!0&&this.$el.addClass("active"),this.$el.attr("data-tid",e)}}),t.Tracks=l.CollectionView.extend({itemView:t.Track,className:"spp-track-list",initialize:function(){var t=this;p(window).on("spp_resize",function(){t.resize()})},resize:function(){this.trigger("resize")}}),t.PlaylistRegion=l.Layout.extend({template:u.template(n),className:"spp-playlist",regions:{headerRegion:".spp-playlist-header",tracksRegion:".spp-playlist-tracks",footerRegion:".spp-playlist-footer"}}),t.PlaylistHeader=l.ItemView.extend({template:u.template(s),className:"spp-playlist-header",initialize:function(){this.render()},triggers:{"click h3 span":"tracks:filter","change .spp-playlist-sorter":"tracks:sort"},events:{"click .spp-playlist-tag":"filterTag"},filterTag:function(t){this.trigger("playlist:filter",p(t.currentTarget).text())}}),t.PlaylistFooter=l.ItemView.extend({template:u.template(a),className:"spp-playlist-footer",triggers:{"click .spp-playlist-next-page":"nav:next-page","click .spp-playlist-prev-page":"nav:prev-page","click .spp-sort":"playlist:sort"},initialize:function(){this.render()}})}),t.AskPatPlayerApp.Playlist.View}),r("entities/playlist",["app","entities/podcast-track"],function(t){return t.module("Entities",function(t,e,n){var i=[],s=[];t.PlaylistHeader=n.Model.extend({defaults:{data:{}}}),t.PlaylistFooter=n.Model.extend({defaults:{data:{}}});var a=function(e){var n=e.model.get("region");i[n]=new t.PlaylistHeader({})},r=function(n){var i=e.request("track:entities",n),a=n.model.get("region"),r=n.model.get("options"),o={current_page:r.current_page,num_pages:Math.ceil(i.length/r.tracks_per_page)};s[a]=new t.PlaylistFooter({data:o})},o={getPlaylistHeader:function(t){var e=t.model.get("region");return void 0===i[e]&&a(t),i[e]},getPlaylistFooter:function(t){var e=t.model.get("region");return void 0===s[e]&&r(t),s[e]}};e.reqres.setHandler("playlist:header",function(t){return o.getPlaylistHeader(t)}),e.reqres.setHandler("playlist:footer",function(t){return o.getPlaylistFooter(t)})}),t.Entities}),function(t){function e(){this===s.elem&&(s.pos=[-260,-260],s.elem=!1,a=3)}var n,i,s={pos:[-260,-260]},a=3,r=document,o=r.documentElement,l=r.body;t.event.special.mwheelIntent={setup:function(){var n=t(this).bind("mousewheel",t.event.special.mwheelIntent.handler);return this!==r&&this!==o&&this!==l&&n.bind("mouseleave",e),n=null,!0},teardown:function(){return t(this).unbind("mousewheel",t.event.special.mwheelIntent.handler).unbind("mouseleave",e),!0},handler:function(e){var r=[e.clientX,e.clientY];return this===s.elem||Math.abs(s.pos[0]-r[0])>a||Math.abs(s.pos[1]-r[1])>a?(s.elem=this,s.pos=r,a=250,clearTimeout(i),i=setTimeout(function(){a=10},200),clearTimeout(n),n=setTimeout(function(){a=3},1500),e=t.extend({},e,{type:"mwheelIntent"}),(t.event.dispatch||t.event.handle).apply(this,arguments)):void 0}},t.fn.extend({mwheelIntent:function(t){return t?this.bind("mwheelIntent",t):this.trigger("mwheelIntent")},unmwheelIntent:function(t){return this.unbind("mwheelIntent",t)}}),t(function(){l=r.body,t(r).bind("mwheelIntent.mwheelIntentDefault",t.noop)})}(jQuery),r("mwheel-intent",function(){}),function(t){"function"==typeof r&&r.amd?r("vendor/jquery.mousewheel",["jquery"],t):"object"==typeof exports?module.exports=t:t(jQuery)}(function(t){function e(e){var r=e||window.event,o=l.call(arguments,1),p=0,u=0,c=0,d=0;if(e=t.event.fix(r),e.type="mousewheel","detail"in r&&(c=-1*r.detail),"wheelDelta"in r&&(c=r.wheelDelta),"wheelDeltaY"in r&&(c=r.wheelDeltaY),"wheelDeltaX"in r&&(u=-1*r.wheelDeltaX),"axis"in r&&r.axis===r.HORIZONTAL_AXIS&&(u=-1*c,c=0),p=0===c?u:c,"deltaY"in r&&(c=-1*r.deltaY,p=c),"deltaX"in r&&(u=r.deltaX,0===c&&(p=-1*u)),0!==c||0!==u){if(1===r.deltaMode){var h=t.data(this,"mousewheel-line-height");p*=h,c*=h,u*=h}else if(2===r.deltaMode){var f=t.data(this,"mousewheel-page-height");p*=f,c*=f,u*=f}return d=Math.max(Math.abs(c),Math.abs(u)),(!a||a>d)&&(a=d,i(r,d)&&(a/=40)),i(r,d)&&(p/=40,u/=40,c/=40),p=Math[p>=1?"floor":"ceil"](p/a),u=Math[u>=1?"floor":"ceil"](u/a),c=Math[c>=1?"floor":"ceil"](c/a),e.deltaX=u,e.deltaY=c,e.deltaFactor=a,e.deltaMode=0,o.unshift(e,p,u,c),s&&clearTimeout(s),s=setTimeout(n,200),(t.event.dispatch||t.event.handle).apply(this,o)}}function n(){a=null}function i(t,e){return u.settings.adjustOldDeltas&&"mousewheel"===t.type&&e%120===0}var s,a,r=["wheel","mousewheel","DOMMouseScroll","MozMousePixelScroll"],o="onwheel"in document||document.documentMode>=9?["wheel"]:["mousewheel","DomMouseScroll","MozMousePixelScroll"],l=Array.prototype.slice;if(t.event.fixHooks)for(var p=r.length;p;)t.event.fixHooks[r[--p]]=t.event.mouseHooks;var u=t.event.special.mousewheel={version:"3.1.9",setup:function(){if(this.addEventListener)for(var n=o.length;n;)this.addEventListener(o[--n],e,!1);else this.onmousewheel=e;t.data(this,"mousewheel-line-height",u.getLineHeight(this)),t.data(this,"mousewheel-page-height",u.getPageHeight(this))},teardown:function(){if(this.removeEventListener)for(var t=o.length;t;)this.removeEventListener(o[--t],e,!1);else this.onmousewheel=null},getLineHeight:function(e){return parseInt(t(e)["offsetParent"in t.fn?"offsetParent":"parent"]().css("fontSize"),10)},getPageHeight:function(e){return t(e).height()},settings:{adjustOldDeltas:!0}};t.fn.extend({mousewheel:function(t){return t?this.bind("mousewheel",t):this.trigger("mousewheel")},unmousewheel:function(t){return this.unbind("mousewheel",t)}})}),t(jQuery,this),r("vendor/jquery.jscrollpane",function(){}),r("apps/smart-podcast-player/playlist/controller",["app","apps/smart-podcast-player/playlist/view","entities/podcast-track","entities/playlist","vendor/jquery.jscrollpane","vendor/jquery.mousewheel"],function(t,e){return t.module("AskPatPlayerApp.Playlist",function(t,n,i,s,a){var r=[],o=[],l=[],p=[],u=[],c=[],d=[],h=[],f=[];t.Controller={init:function(t){var i=t.model.get("region"),s=t.model.get("options");s.current_page=1,r[i]=void 0===r[i]?n.request("track:entities",t):r[i],o[i]=void 0===o[i]?n.request("track:entities:current",t):o[i],l[i]=void 0===l[i]?n.request("track:entities:paged",t,o[i],s.current_page,s.tracks_per_page):l[i],p[i]=void 0===p[i]?[]:p[i],u[i]=n.request("playlist:header",t),c[i]=n.request("playlist:footer",t);var m=new e.PlaylistRegion({}),g=new e.Tracks({collection:l[i]}),v=new e.PlaylistHeader({model:u[i]}),y=new e.PlaylistFooter({model:c[i]});m.on("show",function(){m.headerRegion.show(v),m.tracksRegion.show(g),m.footerRegion.show(y)}),v.on("playlist:filter",function(e){e=e.replace("",""),n.trigger("playlist:filter",t,e)}),v.on("show",function(){this.$el.addClass("spp-empty")}),g.on("resize",function(){g.$el.removeData("jsp").removeClass("jspScrollable"),g.$(".jspContainer").remove(),g.$el.attr("style",""),this.render()}),g.on("show",function(){window.innerWidth>768&&this.$el.jScrollPane()}),g.on("playlist:sort",function(){var e=o[i].models;o[i].models=e.reverse();var a=n.request("track:entity:get-previewed",t),r=o[i].indexOf(a),p=Math.floor(r/s.tracks_per_page)+1,u=Math.ceil(o[i].length/s.tracks_per_page);s.current_page=1>p||p>u?1:p,l[i]=n.request("track:entities:paged",t,o[i],s.current_page,s.tracks_per_page),g.collection=l[i],g.render(),y.model.attributes.data.current_page=s.current_page,y.render()}),g.on("render",function(){var t=v.$el.outerHeight();window.innerWidth>768?(this.$el.height(449-t),this.$el.jScrollPane()):this.$el.height("auto")}),g.on("itemview:track:next",function(){o[i]=n.request("track:entities:current",t);var e=n.request("track:entity:current",t);e||(e=o[i].first());var s=o[i].indexOf(e),a=s<o[i].length-1?s+1:0;n.trigger("player:track:play",t,o[i].at(a))
}),g.on("itemview:track:play",function(e){n.trigger("player:track:play",t,e.model)}),g.on("itemview:track:preview",function(e){n.trigger("track-details:show",t,e.model),n.request("track:entity:set-previewed",t,e.model)}),g.on("before:render",function(){g.$el.removeData("jsp").removeClass("jspScrollable"),g.$(".jspContainer").remove()}),g.on("paging:next",function(){o[i]=n.request("track:entities:current",t);var e=Math.ceil(o[i].length/s.tracks_per_page);n.request("track:entities:current",t),s.current_page<e&&(s.current_page=s.current_page+1,l[i]=n.request("track:entities:paged",t,o[i],s.current_page,s.tracks_per_page),g.collection=l[i],g.render()),y.model.attributes.data.current_page=s.current_page,y.render()}),g.on("paging:prev",function(){o[i]=n.request("track:entities:current",t);Math.ceil(o[i].length/s.tracks_per_page);s.current_page>1&&(s.current_page=s.current_page-1,l[i]=n.request("track:entities:paged",t,o[i],s.current_page,s.tracks_per_page),g.collection=l[i],g.render()),y.model.attributes.data.current_page=s.current_page,y.render()}),g.on("paging:goto:track",function(e){o[i]=n.request("track:entities:current",t);var a=(Math.ceil(o[i].length/s.tracks_per_page),o[i].indexOf(e)),r=a+1<o[i].length?a+1:0,p=Math.ceil(r/s.tracks_per_page);s.current_page!=p&&(s.current_page=p,l[i]=n.request("track:entities:paged",t,o[i],s.current_page,s.tracks_per_page),g.collection=l[i],g.render()),y.model.attributes.data.current_page=s.current_page,y.render(),n.trigger("player:track:play",t,e)}),g.on("paging:update",function(){r[i].invoke("set",{playing:!1}),o[i]=n.request("track:entities:current",t);var e=s.current_page,a=s.tracks_per_page,p=n.request("track:entity:current",t);p||(p=o[i].first());var u=o[i].indexOf(p),c=Math.ceil((u+1)/a);c!=e&&(s.current_page=c>0?c:1,l[i]=n.request("track:entities:paged",t,o[i],s.current_page,s.tracks_per_page),g.collection=l[i],g.render(),y.model.attributes.data.current_page=s.current_page,y.render())}),y.on("playlist:sort",function(){var t=this.$(".spp-sort");g.trigger("playlist:sort"),t.hasClass("spp-sort-reverse")||this.$(".spp-sort").addClass("spp-sort-reverse")}),y.on("nav:next-page",function(){g.trigger("paging:next")}),y.on("nav:prev-page",function(){g.trigger("paging:prev")}),y.on("render",function(){var e=t.model.get("options");o[i]=n.request("track:entities:current",t);var s=Math.ceil(o[i].length/e.tracks_per_page);1==e.current_page?a(".spp-playlist-prev-page").addClass("spp-disabled"):a(".spp-playlist-prev-page").removeClass("spp-disabled"),e.current_page==s?a(".spp-playlist-next-page").addClass("spp-disabled"):a(".spp-playlist-next-page").removeClass("spp-disabled")}),y.on("show",function(){var e=t.model.get("options");o[i]=n.request("track:entities:current",t);var s=Math.ceil(o[i].length/e.tracks_per_page);1==e.current_page?this.$(".spp-playlist-prev-page").addClass("spp-disabled"):this.$(".spp-playlist-prev-page").removeClass("spp-disabled"),e.current_page==s?this.$(".spp-playlist-next-page").addClass("spp-disabled"):this.$(".spp-playlist-next-page").removeClass("spp-disabled")}),d[i]=g,h[i]=v,f[i]=y,t.playlistRegion.show(m)},gotoPlaylistTrackPage:function(t,e){var n=t.model.get("region");d[n].trigger("paging:goto:track",e)},updatePaging:function(t){var e=t.model.get("region");d[e].trigger("paging:update")},filter:function(t,e){var i=t.model.get("region"),s=t.model.get("options"),r=a.inArray(e,p[i]);if("-1"==r?p[i].push(e):p[i].splice(r,1),p[i].length<1){h[i].$el.html("").addClass("spp-empty"),o[i]=n.request("track:entities",t),o[i]=n.request("track:entities:tagged",t,o[i],"");{Math.ceil(o[i].length/s.tracks_per_page)}l[i]=n.request("track:entities:paged",t,o[i],1,s.tracks_per_page);var u=Math.ceil(o[i].length/s.tracks_per_page);d[i].collection=l[i],d[i].render(),s.current_page=f[i].model.attributes.data.current_page=1,f[i].model.attributes.data.num_pages=u,f[i].render()}else{var c="";a.each(p[i],function(t,e){c+='<span class="spp-playlist-tag">'+e+'<span class="spp-remove-tag">&times;</span></span>'}),h[i].$el.html(c).removeClass("spp-empty"),o[i]=n.request("track:entities",t),a.each(p[i],function(e,s){o[i]=n.request("track:entities:tagged",t,o[i],s)});{Math.ceil(o[i].length/s.tracks_per_page)}l[i]=n.request("track:entities:paged",t,o[i],1,s.tracks_per_page),o[i]=n.request("track:entities:current",t);var u=Math.ceil(o[i].length/s.tracks_per_page);d[i].collection=l[i],d[i].render(),s.current_page=f[i].model.attributes.data.current_page=1,f[i].model.attributes.data.num_pages=u,f[i].render()}}}}),t.AskPatPlayerApp.Playlist.Controller}),r("text!templates/track-details-template.html",[],function(){return'<div class="spp-track-details-header">\r\n  <a href="" class="spp-currently-playing"><span>&lt;</span> Currently Playing</a>\r\n  <h3 class="spp-track-details-title"><%= data.title %></h3>\r\n  <% var adl = document.createElement(\'a\'); %>\r\n  <% var adloff = /Firefox/i.test(navigator.userAgent); %>\r\n  <% if ( data.download == true && (typeof adl.download != "undefined") && (!adloff) && data.method != \'soundcloud\' ) { %><a class="spp-button spp-button-downloada" href="<%= data.download_url %>" download="<%= data.filename %>">Download</a><% } %>\r\n     <% if ( data.download == true && (typeof adl.download == "undefined" || (adloff) || data.method == \'soundcloud\' ) ) { %><a class="spp-button spp-button-download" href="<%= data.download_url %>" target="_blank">Download</a><% } %>\r\n  <% if ( data.subscription != \'\' ) { %><a class="spp-button spp-button-subscribe" href="<%= data.subscription %>" target="_blank">Subscribe</a><% } %>\r\n</div>\r\n\r\n<div class="spp-track-details-body">\r\n  \r\n  <% if ( data.social == true ) { %>\r\n    <div class="spp-track-details-share">\r\n      <% if ( data.social_twitter == true ) { %>\r\n          <a href="" id="spp-share-btn" class="spp-share-btn spp-twitter">Twitter</a>\r\n      <% } %>    \r\n      <% if ( data.social_facebook == true ) { %>\r\n          <a href="" id="spp-share-btn" class="spp-share-btn spp-facebook">Facebook</a>\r\n      <% } %>    \r\n      <% if ( data.social_gplus == true ) { %>\r\n          <a href="" id="spp-share-btn" class="spp-share-btn spp-gplus">Google+</a>\r\n      <% } %>    \r\n      <% if ( data.social_linkedin == true ) { %>\r\n          <a href="" id="spp-share-btn" class="spp-share-btn spp-linkedin">LinkedIn</a>\r\n      <% } %>    \r\n      <% if ( data.social_stumble == true ) { %>\r\n          <a href="" id="spp-share-btn" class="spp-share-btn spp-stumble">StumbleUpon</a>\r\n      <% } %>    \r\n      <% if ( data.social_pinterest == true ) { %>\r\n          <a href="" id="spp-share-btn" class="spp-share-btn spp-pinterest">Pinterest</a>\r\n      <% } %>    \r\n      <% if ( data.social_email == true ) { %>\r\n          <a href="mailto:<%= data.email %>" id="spp-share-btn" class="spp-share-btn spp-email" target="_blank">Email</a>\r\n      <% } %> \r\n    </div>\r\n  <% } %>    \r\n  \r\n  <div class="spp-track-details-show-notes">\r\n    <%= data.show_notes %>\r\n  </div>\r\n\r\n  <div class="spp-track-details-tags">\r\n    <ul class="spp-tag-list"></ul>\r\n  </div>\r\n\r\n<% if ( data.poweredby == true ) { %>\r\n  <div class="spp-track-details-footer">\r\n    <span class="spp-brand-mark">Powered by the <strong><a href="https://smartpodcastplayer.com/" target="_blank">Smart Podcast Player</a></strong></span>  \r\n  </div>\r\n<% } %>\r\n\r\n  <iframe class="spp-downloader" style="display:none"></iframe>\r\n  \r\n</div>\r\n'}),r("apps/smart-podcast-player/track-details/view",["app","text!templates/track-details-template.html"],function(t,e){return t.module("AskPatPlayerApp.TrackDetails.View",function(t,n,i,s,a,r){t.TrackDetails=s.Layout.extend({template:r.template(e),className:"spp-track-details",triggers:{"click .spp-play-pause-btn":"play","click .spp-button-download":"track:download","click .spp-previous-btn":"track:previous","click .spp-next-btn":"track:next","click .spp-currently-playing":"track:current","click .details-btn":"content:toggle"},events:{"click .spp-player-tag":"filterTag","click .spp-progress-container":"seek","click .spp-share-btn":"share"},initialize:function(){var t=this;a(window).on("spp_resize",function(){t.resize()})},resize:function(){this.trigger("resize")},socialPopup:function(t,e){window.open(e,"pinterest","screenX=100,screenY=100,height=360,width=730"),t.preventDefault(),t.stopPropagation()},share:function(t){var e=this,n=e.model.get("data"),i=a(t.currentTarget),s=""!=n.fallback_permalink&&null!=n.fallback_permalink&&void 0!=n.fallback_permalink?n.fallback_permalink:""!=n.permalink_url?n.permalink_url:"";if(i.hasClass("spp-facebook")&&this.socialPopup(t,"http://www.facebook.com/sharer/sharer.php?m2w&s=100&p[url]="+encodeURIComponent(s)+"&p[images][0]=&p[title]="+encodeURIComponent(n.title)),i.hasClass("spp-twitter")){var r="url="+encodeURIComponent(s)+"&text="+encodeURIComponent(n.title);""!=n.hashtag&&void 0!=n.hashtag&&(r=r+" "+encodeURIComponent("#"+n.hashtag)),this.socialPopup(t,"https://twitter.com/intent/tweet?"+r)}i.hasClass("spp-gplus")&&this.socialPopup(t,"https://plus.google.com/share?url="+encodeURIComponent(s)),i.hasClass("spp-stumble")&&this.socialPopup(t,"http://www.stumbleupon.com/submit?url="+encodeURIComponent(s)+"&title="+encodeURIComponent(n.title)),i.hasClass("spp-pinterest")&&this.socialPopup(t,"https://pinterest.com/pin/create/button/?url="+encodeURIComponent(s)),i.hasClass("spp-linkedin")&&this.socialPopup(t,"https://www.linkedin.com/shareArticle?mini=true&url="+encodeURIComponent(s)+"&title="+encodeURIComponent(n.title))},seek:function(t){function e(){n.bytesLoaded/n.bytesTotal>u&&(n.pause(),n.setPosition(u*l),n.spp-play(),clearInterval(p))}var n=soundManager.getSoundById("track_"+this.model.get("id")),i=t.offsetX,s=t.offsetY,r=a(t.currentTarget).width(),o=n.spp-o,l=this.model.get("duration");void 0==i&&(i=t.pageX-this.$(".spp-progress-container").offset().left),void 0==s&&(s=t.pageY-this.$(".spp-progress-container").offset().top);var p,u=i/r;if(n.bytesLoaded/n.bytesTotal>u)n.pause(),n.setPosition(u*l),n.spp-play();else{this.$el.hasClass("playing")||n.spp-play(),n.pause();var c=100*u+"%";a(t.currentTarget).find(".spp-progress-icon").cssExtended("left",c,"important"),p=setInterval(e,250)}},filterTag:function(t){this.trigger("playlist:filter",this,a(t.currentTarget).text())},onRender:function(){var t=this.model.get("data"),e=t.tags,n="";a.each(e,function(t,e){n+='<li class="spp-player-tag">'+e+"</li>"}),this.$(".spp-tag-list").html(n)}})}),t.AskPatPlayerApp.TrackDetails.View}),r("apps/smart-podcast-player/track-details/controller",["app","apps/smart-podcast-player/track-details/view","entities/podcast-track","soundmanager2","vendor/jquery.jscrollpane","vendor/jquery.mousewheel"],function(t,e){return t.module("AskPatPlayerApp.TrackDetails",function(t,n,i,s,a){var r=[];t.Controller={init:function(t){var i=t.model.get("region"),s=(t.model.get("options"),n.request("track:entity:current",t)),o=new e.TrackDetails({model:s});o.on("show",function(){window.innerWidth>768&&o.$el.jScrollPane()}),o.on("playlist:filter",function(e,i){n.trigger("playlist:filter",t,i)}),o.on("resize",function(){window.innerWidth>768&&a(".spp-player .spp-track-details-container").show(),o.$el.removeData("jsp").removeClass("jspScrollable"),o.$el.attr("style","").attr("tabindex",""),o.$(".jspContainer").remove(),o.render(),window.innerWidth>768&&o.$el.jScrollPane()}),o.on("track:download",function(t){var e=t.model.get("data"),n=e.download_url,i=e.download_id;"https:"===location.protocol&&(n=n.replace(/^http:\/\//i,"https://"));var s=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);if(s||"soundcloud"==e.method&&"http:"!==location.protocol)window.location=n+"?consumer_key="+AP_Player.soundcloudConsumerKey;else{if("soundcloud"==e.method)var a=n+"?consumer_key="+AP_Player.soundcloudConsumerKey;else var a=AP_Player.homeUrl+"/?spp_download="+i;t.view.$(".spp-downloader").prop("src",a)}}),o.on("track:current",function(){var e=n.request("track:entity:current",t);o.$el.removeData("jsp").removeClass("jspScrollable"),o.$el.attr("style","").attr("tabindex",""),o.$(".jspContainer").remove(),this.model=e,this.render(),window.innerWidth>768&&this.$el.jScrollPane()}),o.on("render",function(){o.$el.removeClass("spp-current"),window.innerWidth>768?o.$el.jScrollPane():(o.$el.removeData("jsp").removeClass("jspScrollable"),o.$el.attr("style","").attr("tabindex",""),o.$(".jspContainer").remove());var e=n.request("track:entity:current",t);e.attributes.data.id===o.model.attributes.data.id&&o.$el.addClass("spp-current")}),t.trackDetailsRegion.show(o),r[i]=o},show:function(t,e){var n=t.model.get("region"),i=r[n];i.$el.removeData("jsp").removeClass("jspScrollable"),i.$el.attr("style","").attr("tabindex",""),i.$(".jspContainer").remove(),i.model=e,i.render(),window.innerWidth>768&&i.$el.jScrollPane()}}}),t.AskPatPlayerApp.TrackDetails.Controller}),r("apps/smart-podcast-player/player/view",["app","text!templates/player-template.html"],function(t,e){return t.module("AskPatPlayerApp.Player.View",function(t,n,s,a,r,o){t.Player=a.ItemView.extend({template:o.template(e),className:"spp-player",events:{"click .spp-play":"clickPlay","click .spp-next":"clickNext","click .spp-previous":"clickPrevious","click .spp-speed":"clickSpeed","click .spp-show-notes-button":"clickShownotes","mouseout .spp-track":"cursorOut","mousemove .spp-track":"cursorMove","click .spp-position":"positionClick","touchstart .spp-track":"touchStart","touchmove .spp-track":"touchMove","touchend .spp-track":"touchEnd"},initialize:function(){this.hover=!1;var t=this;r(window).on("spp_resize",function(){t.resize()}),this.spp_elements={spp:null,loaded_container:null,loaded:null,duration:null,position:null,current_time:null}},clickPlay:function(){this.isCursorMoving=!1,this.trigger("track:play",this)},clickNext:function(){this.isCursorMoving=!1,this.trigger("track:next",this)},clickPrevious:function(){this.isCursorMoving=!1,this.trigger("track:previous",this)},clickSpeed:function(){this.isCursorMoving=!1;var t=soundManager.getSoundById("track_"+this.model.cid);null!=t&&t.loaded&&this.trigger("track:speed",this)},clickShownotes:function(t){this.isCursorMoving=!1,this.trigger("track:show-notes",this),t.preventDefault()},resize:function(){this.trigger("resize")},cursorMove:function(t){var e=this.isCursorMoving;if(this.isCursorMoving=!0,e){var n=soundManager.getSoundById("track_"+this.model.cid);if(null!=n&&n.loaded){var i=this.$el.find(".spp-track"),s=i.offset();if(!(t.pageY<s.top||t.pageY>s.top+i[0].clientHeight||t.pageX<s.left||t.pageX>s.left+i[0].clientWidth)){var a=t.pageX-s.left;this.showTimestamp(a,this.model)}}}},cursorOut:function(){var t=soundManager.getSoundById("track_"+this.model.cid);null!=t&&t.loaded&&this.hideTimestamp()},positionClick:function(t){this.isCursorMoving=!1;var e=soundManager.getSoundById("track_"+this.model.cid);if(null!=e&&e.loaded){var n=t.pageX-this.$(".spp-track").offset().left;this.trigger("track:seek",n,this.model)}},touchStart:function(t){this.isTouchMoving=!1,this.touchStartX=t.originalEvent.touches[0].clientX,this.touchStartY=t.originalEvent.touches[0].clientY},touchMove:function(t){this.isTouchMoving=!0;var e=soundManager.getSoundById("track_"+this.model.cid);if(null!=e&&e.loaded){var n=t.originalEvent.touches[0];if(!(Math.abs(this.touchStartX-n.clientX)<Math.abs(this.touchStartY-n.clientY))){var i=n.pageX-this.$(".spp-track").offset().left;0>i&&(i=0),this.showTimestamp(i,this.model)}}},touchEnd:function(t){if(this.isTouchMoving){var e=t.originalEvent.changedTouches[t.originalEvent.changedTouches.length-1];if(!(Math.abs(this.touchStartX-e.clientX)<Math.abs(this.touchStartY-e.clientY))){var n=soundManager.getSoundById("track_"+this.model.cid);if(null!=n&&n.loaded){var i=this.$(".spp-track").offset(),s=e.pageX-i.left,a=e.pageY-i.top;0>a||a>this.$(".spp-track").clientHeight||s>this.$(".spp-track").clientWidth||(0>s&&(s=0),this.trigger("track:seek",s,this.model),this.hideTimestamp())}}}},showTimestamp:function(t){this.$el.addClass("spp-hover"),this.$(".spp-position").cssExtended("left",t+"px","important");var e=this.$el.find(".spp-track").outerWidth(),n="track_"+this.model.cid,i=soundManager.getSoundById(n);if(null!=i)var s=null!==i.duration?i.duration:i.durationEstimate;var a=this.options.shortcode_options;if(null!=i&&null!==s&&s>0&&a.hover_timestamp){var r=s*t/e/1e3,o=Math.floor(r%60),l=Math.floor(r/60%60),p=Math.floor(r/3600),u=l+":";u+=o>9?o:"0"+o,p>0&&(u=l>9?p+":"+u:p+":0"+u);var c=this.$(".spp-seek-time");c.text(u);var d=c.width(),h=t-d/2;c.cssExtended("left",h+"px","important"),c.cssExtended("display","block","important")}},hideTimestamp:function(){var t=(this.model.get("data"),"track_"+this.model.cid),e=soundManager.getSoundById(t);if(e){var n=e.position/e.duration*100;this.$(".spp-position").cssExtended("left",n+"%","important")}this.$(".spp-seek-time").cssExtended("display","none","important"),this.$el.removeClass("spp-hover")},onRender:function(){var t="track_"+this.model.cid,e=soundManager.getSoundById(t);if(!e){var n=this.model.get("data"),s=n.stream_url+"?consumer_key="+AP_Player.soundcloudConsumerKey,a=this;soundManager.createSound({id:t,url:s,hover:!1,onplay:function(){a.spp_elements.spp=null!==a.spp_elements.spp?a.spp_elements.spp:r(a.$el).parents(".smart-podcast-player"),r(a.spp_elements.spp).addClass("spp-playing")},onresume:function(){a.spp_elements.spp=null!==a.spp_elements.spp?a.spp_elements.spp:r(a.$el).parents(".smart-podcast-player"),r(a.spp_elements.spp).addClass("spp-playing")},onpause:function(){a.spp_elements.spp=null!==a.spp_elements.spp?a.spp_elements.spp:r(a.$el).parents(".smart-podcast-player"),r(a.spp_elements.spp).removeClass("spp-playing")},whileloading:function(){var t=this.bytesLoaded/this.bytesTotal*100+"%";a.spp_elements.spp=null!==a.spp_elements.spp?a.spp_elements.spp:r(a.$el).parents(".smart-podcast-player"),a.spp_elements.loaded_container=null!==a.spp_elements.loaded_container?a.spp_elements.loaded_container:r(a.spp_elements.spp).find(".spp-loaded-container"),a.spp_elements.loaded=null!==a.spp_elements.loaded?a.spp_elements.loaded:r(a.spp_elements.loaded_container).find(".spp-loaded"),r(a.spp_elements.loaded).cssExtended("width",t,"important")},whileplaying:function(){var t,e,s,o,l=this.durationEstimate,p=this.position,u=l-p;t=p/1e3,e=t/60,s=e/60,o=i(Math.floor(e%60),2)+":"+i(Math.floor(t%60),2),Math.floor(s)>0&&(o=Math.floor(s)+":"+o),t=u/1e3,e=t/60,s=e/60,remaining_time=i(Math.floor(e),2)+":"+i(Math.floor(t%60),2),a.spp_elements.spp=null!==a.spp_elements.spp?a.spp_elements.spp:r(a.$el).parents(".smart-podcast-player"),a.spp_elements.duration=null!==a.spp_elements.duration?a.spp_elements.duration:r(a.spp_elements.spp).find(".spp-duration"),a.spp_elements.current_time=null!==a.spp_elements.current_time?a.spp_elements.current_time:r(a.spp_elements.spp).find(".spp-current-time"),a.spp_elements.position=null!==a.spp_elements.position?a.spp_elements.position:r(a.spp_elements.spp).find(".spp-position"),"none"==n.episode_timer||r(a.spp_elements.duration).text("up"==n.episode_timer?o:"-"+remaining_time);var c=p/l*100;a.trigger("track:progress:update",c),r(a.spp_elements.current_time).cssExtended("width",c+"%","important");var d=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),h=a.spp_elements.spp.find(".spp-player");(!h.hasClass("spp-hover")||d)&&r(a.spp_elements.position).cssExtended("left",c+"%","important")}})}}})}),t.AskPatPlayerApp.Player.View}),r("apps/smart-podcast-player/player/controller",["app","apps/smart-podcast-player/player/view","entities/podcast-player","entities/podcast-track","soundmanager2"],function(t,e){return t.module("AskPatPlayerApp.Player",function(t,n,i,s,a){var r=[],o=[],l=[];t.Controller={init:function(t){var i=t.model.get("region"),s=t.model.get("options"),p=n.request("player:entity",t);l[i]=new e.Player({model:p,shortcode_options:s});var u=0,c=n.request("track:entities",t);c.each(function(t){var e=t.get("data");u+="number"==typeof e.playback_count?e.playback_count:0}),l[i].on("resize",function(){var t=l[i].model.get("data");if(window.innerWidth>768){var e=l[i].$el.outerWidth();null===t.show_logo||void 0===t.show_logo||""===t.show_logo?e=e:e-=100,l[i].$(".spp-track").css({width:e+"px"}),l[i].$(".spp-show-logo").show()}else l[i].$(".spp-track").css({width:"100%"}),l[i].$(".spp-show-logo").hide()}),l[i].on("track:show-notes",function(){var t=this.$el.parents(".smart-podcast-player").find(".spp-track-details-container");t.is(":visible")?(t.cssExtended("display","none","important"),l[i].$(".spp-show-notes-button").text("Show Notes")):(t.cssExtended("display","block","important"),l[i].$(".spp-show-notes-button").text("Hide Notes"))}),l[i].on("show",function(){var t=l[i].model.get("data");if(window.innerWidth>768){var e=l[i].$el.outerWidth();null===t.show_logo||void 0===t.show_logo||""===t.show_logo?e=e:e-=100,l[i].$(".spp-track").css({width:e+"px"}),l[i].$(".spp-show-logo").show()}else l[i].$(".spp-track").css({width:"100%"}),l[i].$(".spp-show-logo").hide();var n=!1;if("undefined"!=typeof s.hide_listens&&1==s.hide_listens&&(n=!0),u&&!n){var a=u.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")+" Listens";""!=t.show_name&&void 0!==t.show_name&&(a="  "+a),l[i].$(".spp-show-count").text(a)}}),l[i].on("render",function(){var t=l[i].model.get("data");if(window.innerWidth>768){var e=l[i].$el.outerWidth();null===t.show_logo||void 0===t.show_logo||""===t.show_logo?e=e:e-=100,l[i].$(".spp-track").css({width:e+"px"}),l[i].$(".spp-show-logo").show()}else l[i].$(".spp-track").css({width:"100%"}),l[i].$(".spp-show-logo").hide();var n=!1;if("undefined"!=typeof s.hide_listens&&1==s.hide_listens&&(n=!0),u&&!n){var a=u.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")+" Listens";""!=t.show_name&&void 0!==t.show_name&&(a="  "+a),l[i].$(".spp-show-count").text(a)}}),l[i].on("track:play",function(e){var i=this.$el.hasClass("spp-playing"),s=(e.model.get("data"),"track_"+e.model.cid);a(".spp-track, .smart-track-player").removeClass("spp-playing"),i?(a(".spp-player").removeClass("spp-playing"),this.$(".spp-player-playlist .spp-track").removeClass("spp-active"),soundManager.pauseAll(),n.request("track:entities:set",t,"playing",!1)):(soundManager.pauseAll(),soundManager.play(s),this.$el.addClass("spp-playing"),n.request("track:entities:set",t,"playing",!1),n.request("track:entity:set",t,e.model,"playing",!0),a('.spp-track[data-tid="'+s+'"]').addClass("spp-playing"))}),l[i].on("track:speed",function(e){var i=this.$el.hasClass("spp-playing"),s=(e.model.get("data"),"track_"+e.model.cid),r=soundManager.getSoundById(s);a(".spp-track, .smart-track-player").removeClass("spp-playing"),i||(soundManager.pauseAll(),soundManager.play(s),this.$el.addClass("spp-playing"),n.request("track:entities:set",t,"playing",!1),n.request("track:entity:set",t,e.model,"playing",!0),a('.spp-track[data-tid="'+s+'"]').addClass("spp-playing")),r.isHTML5&&(.5==r._a.playbackRate?(this.$el.hasClass("spp-speeding-half")&&this.$el.removeClass("spp-speeding-half"),r._a.playbackRate=1):1==r._a.playbackRate?(this.$el.addClass("spp-speeding-onehalf"),r._a.playbackRate=1.5):1.5==r._a.playbackRate?(this.$el.hasClass("spp-speeding-onehalf")&&this.$el.removeClass("spp-speeding-onehalf"),this.$el.addClass("spp-speeding-two"),r._a.playbackRate=2):2==r._a.playbackRate?(this.$el.hasClass("spp-speeding-two")&&this.$el.removeClass("spp-speeding-two"),this.$el.addClass("spp-speeding-three"),r._a.playbackRate=3):3==r._a.playbackRate?(this.$el.hasClass("spp-speeding-three")&&this.$el.removeClass("spp-speeding-three"),this.$el.addClass("spp-speeding-half"),r._a.playbackRate=.5):r._a.playbackRate=1)}),l[i].on("track:seek",function(e,s){var r=this.$el.hasClass("spp-playing"),o=(l[i].model.get("data"),"track_"+l[i].model.cid);r||(soundManager.pauseAll(),soundManager.play(o),this.$el.addClass("spp-playing"),n.request("track:entities:set",t,"playing",!1),n.request("track:entity:set",t,s,"playing",!0),a('.spp-track[data-tid="'+o+'"]').addClass("spp-playing"));var p=soundManager.getSoundById("track_"+l[i].model.cid),u=this.$(".spp-track").outerWidth(),c=e/u;p.setPosition(c*p.durationEstimate)}),l[i].on("track:next",function(e){var p=e.model,u=(p.get("data"),"track_"+p.cid);soundManager.pauseAll(),soundManager.unload(u),a(".spp-player").removeClass("spp-playing"),r[i]=n.request("track:entities:current",t),o[i]=n.request("track:entities:paged",t,r[i],s.current_page,s.tracks_per_page);var c=r[i].indexOf(p),d=c+1,h=r[i].length-1,f=r[i].at(h>d?d:0);n.trigger("playlist:paging:track",t,f),l[i].trigger("track:update",f)}),l[i].on("track:previous",function(e){var a=e.model,p=(a.get("data"),"track_"+a.cid);soundManager.pauseAll(),soundManager.unload(p),r[i]=n.request("track:entities:current",t),o[i]=n.request("track:entities:paged",t,r[i],s.current_page,s.tracks_per_page);var u=r[i].indexOf(a),c=u-1,d=r[i].length-1,h=r[i].at(0>c?d:c);n.trigger("playlist:paging:track",t,h),l[i].trigger("track:update",h)}),l[i].on("track:update",function(e){{var s=(e.get("data"),"track_"+e.cid),r=(l[i].model.get("data"),"track_"+l[i].model.cid);this.$el.hasClass("spp-playing")}a(".spp-player").removeClass("spp-playing"),a(".spp-track").removeClass("spp-active"),r==s?l[i].trigger("track:play",this):(a('.spp-track[data-tid="'+r+'"]').addClass("spp-active"),soundManager.pauseAll(),soundManager.unload(r),l[i].model=e,l[i].render(),l[i].trigger("track:play",this),n.trigger("playlist:paging:update",t),n.trigger("track-details:show",t,e))}),t.playerRegion.show(l[i])},playTrack:function(t,e){var n=t.model.get("region");l[n].trigger("track:update",e)}}}),t.AskPatPlayerApp.Player.Controller}),r("apps/smart-podcast-player/app",["app"],function(t){return t.module("AskPatPlayerApp",function(t,e){var n={initCore:function(t){a(["apps/smart-podcast-player/core/controller"],function(e){e.init(t)})},initPlaylist:function(t){a(["apps/smart-podcast-player/playlist/controller"],function(e){e.init(t)})},updatePlaylistPaging:function(t){a(["apps/smart-podcast-player/playlist/controller"],function(e){e.updatePaging(t)})},gotoPlaylistTrackPage:function(t,e){a(["apps/smart-podcast-player/playlist/controller"],function(n){n.gotoPlaylistTrackPage(t,e)})},filterPlaylist:function(t,e){a(["apps/smart-podcast-player/playlist/controller"],function(n){n.filter(t,e)})},initTrackDetails:function(t){a(["apps/smart-podcast-player/track-details/controller"],function(e){e.init(t)})},showTrack:function(t,e){a(["apps/smart-podcast-player/track-details/controller"],function(n){n.show(t,e)})},initPlayer:function(t){a(["apps/smart-podcast-player/player/controller"],function(e){e.init(t)})},playTrack:function(t,e){a(["apps/smart-podcast-player/player/controller"],function(n){n.playTrack(t,e)})}};e.on("app:core:init",function(){n.initCore()}),e.on("player:track:play",function(t,e){n.playTrack(t,e)}),e.on("player:init",function(t){n.initPlayer(t)}),e.on("playlist:paging:update",function(t){n.updatePlaylistPaging(t)}),e.on("playlist:paging:track",function(t,e){n.gotoPlaylistTrackPage(t,e)}),e.on("playlist:init",function(t){n.initPlaylist(t)}),e.on("playlist:filter",function(t,e){n.filterPlaylist(t,e)}),e.on("track-details:init",function(t){n.initTrackDetails(t)}),e.on("track-details:show",function(t,e){n.showTrack(t,e)})}),t.PlaylistApp}),r("app",["jquery","marionette","soundmanager2"],function(t,e){var n=new e.Application;return n.options={},n.options.current_page=1,n.options.tracks_per_page=10,n.on("initialize:after",function(){(jQuery(".smart-podcast-player").length>0||jQuery(".smart-track-player").length>0)&&a(["apps/smart-podcast-player/app"],function(){soundManager.setup({flashVersion:9,useHighPerformance:!0,wmode:"transparent",useHTML5Audio:!0,preferFlash:!1,onready:function(){n.trigger("app:core:init")}})})}),n}),r("text!templates/stp-track-template.html",[],function(){return'<% if ( data.show_logo != undefined && data.show_logo != null ) { %>\r\n	<div class="spp-show-logo">\r\n		<img src="<%= data.show_logo %>" alt="<%= data.show_name %>" />\r\n	</div>\r\n<% } %>\r\n\r\n<div class="spp-track">\r\n	<% if ( data.artist != undefined && data.artist != null ) { %>\r\n		<h4 class="spp-artist"><div class="spp-artist-box">\r\n			<span class="spp-artist-first-container">\r\n				<span><%= data.artist %></span>\r\n				<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>\r\n			</span>\r\n			<span class="spp-artist-second-container">\r\n				<span><%= data.artist %></span>\r\n				<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>\r\n			</span>\r\n		</div></p>\r\n	<% } %>		\r\n\r\n	<h3 class="spp-track-title"><div class="spp-track-title-box">\r\n		<span class="spp-track-title-first-container">\r\n			<span><%= data.title %></span>\r\n			<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>\r\n		</span>\r\n		<span class="spp-track-title-second-container">\r\n			<span><%= data.title %></span>\r\n			<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>\r\n		</span>\r\n	</div></h3>\r\n	<p class="spp-duration"></p>\r\n	\r\n	<div class="spp-progress">\r\n		<div class="spp-current-time"></div>\r\n		<div class="spp-position"></div>\r\n		<div class="spp-seek-time"></div>\r\n	</div>\r\n\r\n	<div class="spp-loaded-container">\r\n		<div class="spp-loaded"></div>\r\n	</div>\r\n\r\n	<div class="spp-controls">\r\n		<% if ( data.paid == true ) { %>\r\n			<% if ( data.speedcontrol == true ) { %>\r\n				<span class="spp-speed"></span>\r\n			<% } %>\r\n			 <% if ( data.social == true ) { %>\r\n				<span class="spp-share">\r\n					<div class="spp-share-options">\r\n						<% if ( data.social_twitter == true ) { %>\r\n							<a href="" class="spp-share-icon spp-twitter-btn">Share</a>\r\n						<% } %>\r\n						<% if ( data.social_facebook == true ) { %>\r\n							<a href="" class="spp-share-icon spp-fb-btn">Share</a>\r\n						<% } %>\r\n						<% if ( data.social_gplus == true ) { %>\r\n							<a href="" class="spp-share-icon spp-gplus-btn">Share</a>\r\n						<% } %>\r\n						<% if ( data.social_linkedin == true ) { %>\r\n							<a href="" class="spp-share-icon spp-linkedin-btn">Share</a>\r\n						<% } %>\r\n						<% if ( data.social_stumble == true ) { %>\r\n							<a href="" class="spp-share-icon spp-stumble-btn">Share</a>\r\n							<% } %>\r\n						<% if ( data.social_pinterest == true ) { %>\r\n							<a href="" class="spp-share-icon spp-pinterest-btn">Share</a>\r\n						<% } %>\r\n						<% if ( data.social_email == true ) { %>\r\n							<a href="" class="spp-share-icon spp-email-btn">Share</a>\r\n						<% } %>\r\n					</div>\r\n				</span>\r\n			<% } %>\r\n		<% } %>\r\n\r\n	   <% var adl = document.createElement(\'a\'); %>\r\n	   <% var adloff = /Firefox/i.test(navigator.userAgent); %>\r\n\r\n	   <% if ( data.download == true && (typeof adl.download != "undefined")  && (!adloff) && data.method != \'soundcloud\' ) { %><a href="<%= data.url %>" download="<%= data.filename %>"><span class="spp-dloada"></span></a><% } %>\r\n	   <% if ( data.download == true && (typeof adl.download == "undefined" || (adloff) || data.method == \'soundcloud\' ) ) { %><span class="spp-dload"></span><% } %>\r\n		<span class="spp-play"></span>\r\n	</div>\r\n\r\n	<iframe class="spp-downloader" style="display:none"></iframe>\r\n	\r\n</div>\r\n\r\n<%if ( data.paid != true ) { %>\r\n	<div class="spp-logo"></div>\r\n<% } %>\r\n'}),e(jQuery),r("style",function(){}),r("apps/smart-track-player/view",["stp-app","text!templates/stp-track-template.html","style"],function(t,e){return t.module("View",function(t,n,s,a,r,o){t.Player=a.ItemView.extend({template:o.template(e),className:"smart-track-player",events:{"mousemove .spp-track":"cursorMove","mouseout .spp-track":"cursorOut","click .spp-position":"positionClick","click .spp-play":"play","click .spp-button-download":"download","click .spp-dload":"download","click .spp-speed":"speed","hover .spp-play":"shareOut","hover .spp-button-download":"shareOut","hover .spp-dload":"shareOut","hover .spp-dloada":"shareOut","hover .spp-speed":"shareOut","hover .spp-share":"shareOn","hover .spp-share-options":"shareOn","click .spp-share":"shareOn","click .spp-share-icon":"share","mouseleave .spp-controls":"shareOut","touchstart .spp-track":"touchStart","touchmove .spp-track":"touchMove","touchend .spp-track":"touchEnd"},initialize:function(){this.hover=!1;
var t=this.model.get("data");this.track_id="smart_track_"+t.track_uid+"_"+this.model.cid;var e=this;r(window).on("resize",function(){e.resize()})},download:function(t){this.isCursorMoving=!1,t.preventDefault();var e=this.model.get("data"),n=e.download_url,i=e.download_id;"https:"===location.protocol&&(n=n.replace(/^http:\/\//i,"https://"));var s=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);if(s||"soundcloud"==e.method&&"http:"!==location.protocol){if("soundcloud"==e.method)var a=n+"?consumer_key="+AP_Player.soundcloudConsumerKey;else var a=n;window.location=a}else{if("soundcloud"==e.method)var a=n+"?consumer_key="+AP_Player.soundcloudConsumerKey;else var a=AP_Player.homeUrl+"/?spp_download="+i;this.$(".spp-downloader").prop("src",a)}},resize:function(){var t=this.model.get("data");if(window.innerWidth>768){var e=this.$el.parent().width();null===t.show_logo||void 0===t.show_logo||(e-=80),this.$(".spp-track").css({width:e+"px"}),this.$(".spp-track").css({"max-width":e+"px"})}else this.$(".spp-track").css({"max-width":"100%"}),this.$(".spp-track").css({width:"100%"})},socialPopup:function(t,e){window.open(e,"pinterest","screenX=100,screenY=100,height=360,width=730"),t.preventDefault(),t.stopPropagation()},shareOn:function(){this.isCursorMoving=!1,this.$(".spp-share-options").cssExtended("display","block","important")},shareOut:function(){this.$(".spp-share-options").cssExtended("display","none","important")},share:function(t){this.isCursorMoving=!1;var e=this,n=e.model.get("data"),i=r(t.currentTarget),s=window.location.href;if((i.hasClass("spp-facebook")||i.hasClass("spp-fb-btn"))&&this.socialPopup(t,"http://www.facebook.com/sharer/sharer.php?m2w&s=100&p[url]="+encodeURIComponent(s)+"&p[images][0]=&p[title]="+encodeURIComponent(n.title)),i.hasClass("spp-twitter")||i.hasClass("spp-twitter-btn")){var a="url="+encodeURIComponent(s)+"&text="+encodeURIComponent(n.title);""!=n.hashtag&&void 0!=n.hashtag&&(a=a+" "+encodeURIComponent("#"+n.hashtag)),this.socialPopup(t,"https://twitter.com/intent/tweet?"+a)}(i.hasClass("spp-gplus")||i.hasClass("spp-gplus-btn"))&&this.socialPopup(t,"https://plus.google.com/share?url="+encodeURIComponent(s)),(i.hasClass("spp-stumble")||i.hasClass("spp-stumble-btn"))&&this.socialPopup(t,"http://www.stumbleupon.com/submit?url="+encodeURIComponent(s)+"&title="+encodeURIComponent(n.title)),(i.hasClass("spp-pinterest")||i.hasClass("spp-pinterest-btn"))&&this.socialPopup(t,"https://pinterest.com/pin/create/button/?url="+encodeURIComponent(s)),(i.hasClass("spp-linkedin")||i.hasClass("spp-linkedin-btn"))&&this.socialPopup(t,"https://www.linkedin.com/shareArticle?mini=true&url="+encodeURIComponent(s)+"&title="+encodeURIComponent(n.title))},stop:function(){this.$el.removeClass("spp-playing")},positionClick:function(t){this.isCursorMoving=!1,null!=this.sound&&(x=t.pageX-this.$(".spp-track").offset().left,this.seek(x))},touchStart:function(t){this.isTouchMoving=!1,this.horizontalTouchMove=!1,this.touchStartX=t.originalEvent.touches[0].clientX,this.touchStartY=t.originalEvent.touches[0].clientY},touchMove:function(t){if(this.isTouchMoving=!0,null!=this.sound){var e=t.originalEvent.touches[0];if(this.horizontalTouchMove||!(Math.abs(this.touchStartX-e.clientX)<Math.abs(this.touchStartY-e.clientY))){this.horizontalTouchMove=!0;var n=e.pageX-this.$(".spp-track").offset().left;0>n&&(n=0),this.showTimestamp(n)}}},touchEnd:function(t){if(this.isTouchMoving&&null!=this.sound){var e=t.originalEvent.changedTouches[t.originalEvent.changedTouches.length-1];if(this.horizontalTouchMove||!(Math.abs(this.touchStartX-e.clientX)<Math.abs(this.touchStartY-e.clientY))){var n=this.$el.offset(),i=e.pageX-n.left,s=e.pageY-n.top;(this.horizontalTouchMove||!(0>s||s>this.el.clientHeight||i>this.el.clientWidth))&&(0>i&&(i=0),this.seek(i),this.hideTimestamp())}}},cursorMove:function(t){var e=this.isCursorMoving;if(this.isCursorMoving=!0,e&&null!=this.sound){var n=this.$el.find(".spp-track"),i=n.offset(),s=t.pageX-i.left,a=t.pageY-i.top;0>a||a>n[0].clientHeight||0>s||s>n[0].clientWidth||this.showTimestamp(s)}},cursorOut:function(){null!=this.sound&&this.hideTimestamp()},onRender:function(){var t=this.model.get("data");if(window.innerWidth>768){var e=0;this.$el.parent().length>0&&(e=this.$el.parent().width()),0==e&&r(".smart-track-player").each(function(){var n=this.attributes["data-uid"];n&&n.value===t.track_uid&&(e=r(this).parent().width())}),0==e&&(e=r(".smart-track-player").first().parent().width()),null===t.show_logo||void 0===t.show_logo||(e-=80),this.$(".spp-track").css({width:e+"px"}),this.$(".spp-track").css({"max-width":e+"px"})}else this.$(".spp-track").css({"max-width":"100%"}),this.$(".spp-track").css({width:"100%"}),this.$(".spp-track").css({"max-width":"100%"}),this.$(".spp-show-logo").hide();void 0!==t.download&&this.$el.addClass("spp-has-download"),void 0!==t.color&&this.$el.addClass("stp-color-"+t.color),void 0!==t.get&&0!=t.get&&"file"==t.method&&this.fetchTrackData(t.url)},fetchTrackData:function(t){var e=this,n={action:"fetch_track_data",url:t};r.post(AP_Player.ajaxurl,n,function(t){var n=e.model.get("data");t=JSON.parse(t),"0"!=t?(void 0===typeof t.title||void 0!=n.title&&'Getting file data<span class="spp-loading-ellipsis">...</span>'!=n.title||(n.title=t.title),void 0!==typeof t.artist&&void 0==n.artist&&(n.artist=t.artist),n.get=!1,e.model.set({data:n}),void 0!==typeof t.title&&e.$(".spp-track-title").text(n.title),void 0!==typeof t.artist&&(e.$(".spp-artist").length>0?e.$(".spp-artist").text(n.artist):e.$(".spp-track-title").before('<p class="spp-artist">'+n.artist+"</p>")),void 0!=e.loading_timer&&clearInterval(e.loading_timer),e.render()):(n.title="Unable to retrieve track data",n.get=!1,e.model.set({data:n}),e.render())})},pause:function(){var t=soundManager.getSoundById(this.track_id);t.pause(),this.$el.removeClass("spp-playing")},speed:function(){this.isCursorMoving=!1,null!=this.sound&&this.sound.isHTML5&&(.5==this.sound._a.playbackRate?(this.$el.hasClass("spp-speeding-half")&&this.$el.removeClass("spp-speeding-half"),this.sound._a.playbackRate=1):1==this.sound._a.playbackRate?(this.$el.addClass("spp-speeding-onehalf"),this.sound._a.playbackRate=1.5):1.5==this.sound._a.playbackRate?(this.$el.hasClass("spp-speeding-onehalf")&&this.$el.removeClass("spp-speeding-onehalf"),this.$el.addClass("spp-speeding-two"),this.sound._a.playbackRate=2):2==this.sound._a.playbackRate?(this.$el.hasClass("spp-speeding-two")&&this.$el.removeClass("spp-speeding-two"),this.$el.addClass("spp-speeding-three"),this.sound._a.playbackRate=3):3==this.sound._a.playbackRate?(this.$el.hasClass("spp-speeding-three")&&this.$el.removeClass("spp-speeding-three"),this.$el.addClass("spp-speeding-half"),this.sound._a.playbackRate=.5):this.sound._a.playbackRate=1)},play:function(){this.isCursorMoving=!1,(void 0===this.sound||null===this.sound)&&(this.sound=this.createSound());var t=this.$el.hasClass("spp-playing");t?(this.$el.removeClass("spp-playing"),soundManager.pauseAll()):(soundManager.pauseAll(),this.sound.play(),this.$el.addClass("spp-playing"))},createSound:function(){var t=this,e=this.model,n=e.get("data"),s=soundManager.createSound({id:t.track_id,url:n.url,onload:function(){},onresume:function(){},onplay:function(){},onid3:function(){},onfinish:function(){t.stop()},whileloading:function(){var e=this.bytesLoaded/this.bytesTotal*100+"%";t.$(".spp-loaded").cssExtended("width",e,"important")},whileplaying:function(){var e,s,a,r,o=this.durationEstimate,l=this.position,p=o-l;e=l/1e3,s=e/60,a=s/60,r=i(Math.floor(s%60),2)+":"+i(Math.floor(e%60),2),Math.floor(a)>0&&(r=Math.floor(a)+":"+r),e=p/1e3,s=e/60,a=s/60,remaining_time=i(Math.floor(s),2)+":"+i(Math.floor(e%60),2),"none"==n.episode_timer||t.$(".spp-duration").text("up"==n.episode_timer?r:"-"+remaining_time);var u=l/o*100;t.$(".spp-current-time").cssExtended("width",u+"%","important"),t.hover===!1&&t.$(".spp-position").cssExtended("left",u+"%","important")}});return s},showTimestamp:function(t){this.hover=!0,this.$(".spp-position").cssExtended("left",t+"px","important");var e=this.model.get("data"),n=soundManager.getSoundById(this.track_id);if(null!=n)var i=null!==n.duration?n.duration:n.durationEstimate;if(null!=n&&null!==i&&i>0&&e.hover_timestamp){var s=this.$el.find(".spp-track").outerWidth(),a=i*t/s/1e3,r=Math.floor(a%60),o=Math.floor(a/60%60),l=Math.floor(a/3600),p=o+":";p+=r>9?r:"0"+r,l>0&&(p=o>9?l+":"+p:l+":0"+p);var u=this.$(".spp-seek-time");u.text(p);var c=u.width(),d=t-c/2;u.cssExtended("left",d+"px","important"),u.cssExtended("display","block","important")}},hideTimestamp:function(){var t=soundManager.getSoundById(this.track_id);if(t){var e=t.position/t.duration*100;this.$(".spp-position").cssExtended("left",e+"%","important")}this.$(".spp-seek-time").cssExtended("display","none","important"),this.hover=!1},seek:function(t){if(null!=this.sound){if(2==this.sound.readyState)return this.sound.destruct(),this.sound=null,this.$el.removeClass("spp-playing"),this.$(".spp-loaded").cssExtended("width",0,"important"),this.$(".spp-current-time").cssExtended("width",0,"important"),void this.$(".spp-seek-time").cssExtended("display","none","important");var e=this.$(".spp-track").outerWidth(),n=null!==this.sound.duration?this.sound.duration:this.sound.durationEstimate,i=t/e,s=this.$el.hasClass("spp-playing");this.sound.pause(),this.sound.setPosition(i*n),s?this.sound.resume():this.play()}}})}),t.View}),r("apps/smart-track-player/controller",["stp-app","apps/smart-track-player/view","soundmanager2"],function(t,e){return t.module("Controller",function(t,n,i,s,a){t.init=function(){var t=[];a(".smart-track-player").each(function(e,n){var i=a(n).data("url");i&&i.indexOf("soundcloud.com")>-1&&t.push(i)});var n="";if(t.length>0){var s={action:"get_soundcloud_track",streams:t};a.ajax({url:AP_Player.ajaxurl,dataType:"json",async:!1,type:"POST",data:s,success:function(t){n=t}})}a(".smart-track-player").each(function(t,s){var r=a(s),o={track_uid:r.data("uid"),show_logo:r.data("image"),download:r.data("download"),color:r.data("color"),title:r.data("title"),artist:r.data("artist"),filename:"",social:r.data("social"),social_twitter:r.data("social_twitter"),social_facebook:r.data("social_facebook"),social_gplus:r.data("social_gplus"),social_linkedin:r.data("social_linkedin"),social_stumble:r.data("social_stumble"),social_pinterest:r.data("social_pinterest"),social_email:r.data("social_email"),speedcontrol:r.data("speedcontrol"),paid:r.data("paid"),get:r.data("get"),method:"file",sticky:r.data("sticky"),episode_timer:r.data("episode_timer"),hover_timestamp:r.data("hover_timestamp"),download_id:r.data("download_id")};0!=o.hover_timestamp&&(o.hover_timestamp=!0);var l=document.createElement("a");l.href=r.data("url")||r.data("feed_url");var p=l.hostname,u=p.indexOf("soundcloud.com")>-1,c=r.data("feed_url");if(c){var d={action:"get_spplayer_tracks",stream:c,episode_limit:1};a.ajax({url:AP_Player.ajaxurl,dataType:"json",async:!1,type:"POST",data:d,success:function(t){o.url=t[0].stream_url,o.download_url=t[0].download_url,o.title=o.title||t[0].title,o.artist=o.artist||t[0].artist||t[0].album||t[0].show_name,o.download_id=t[0].download_id}})}else if(o.url=r.data("url"),o.download_url=o.url,u){var h=n.shift();o.method="soundcloud",o.url=h.stream_url+"?consumer_key="+AP_Player.soundcloudConsumerKey,o.artist=o.artist?o.artist:h.user.username,o.title=o.title?o.title:h.title,o.download_url=h.download_url,o.filename=h.permalink+".mp3"}else void 0!=o.get&&void 0==o.title&&(o.title='Getting file data<span class="spp-loading-ellipsis">...</span>'),o.filename=o.url.replace(/^.*[\\\/]/,"");var f=new i.Model({data:o}),m=new e.Player({model:f});if(u||m.on("render",function(){if(this.$(".spp-loading-ellipsis").length>0){var t=this,e=0;this.loading_timer=setInterval(function(){e++;var n=new Array(e%5).join(".");t.$(".spp-loading-ellipsis").text("."+n)},300)}}),m.render(),"undefined"!=typeof o.sticky&&(m.$el.attr("id","spp-sticky"),r.wrap('<div id="spp-sticky-container"></div>'),"string"==typeof o.sticky)){var g=o.sticky.match(/^(-?\d+)px$/);if(g&&g.length>1){var v=parseInt(g[1]);m.$el.addClass("number"==typeof v?"spp-sticky-top-"+v:"spp-sticky-top-0")}}r.after(m.$el),r.remove();var y=m.$el[0],_=a(y).find(".spp-artist-first-container").children()[0],w=a(y).find(".spp-artist")[0];_&&_.offsetWidth>w.clientWidth&&(a(y).find(".spp-artist-first-container").addClass("spp-marquee"),a(y).find(".spp-artist-second-container").addClass("spp-marquee"),a(y).find(".spp-artist-second-container").cssExtended("visibility","visible","important"));var b=a(y).find(".spp-track-title-first-container").children()[0],k=a(y).find(".spp-track-title")[0];b&&b.offsetWidth>k.clientWidth&&(a(y).find(".spp-track-title-first-container").addClass("spp-marquee"),a(y).find(".spp-track-title-second-container").addClass("spp-marquee"),a(y).find(".spp-track-title-second-container").cssExtended("visibility","visible","important"))})}}),t.Controller}),r("stp-app",["marionette","soundmanager2"],function(t){var e=new t.Application;return e.on("initialize:after",function(){jQuery(".smart-track-player").length>0&&soundManager.setup({flashVersion:9,wmode:"transparent",useHTML5Audio:!0,preferFlash:!1,onready:function(){a(["apps/smart-track-player/controller"],function(t){t.init()})}})}),e}),"function"==typeof jQuery&&r("jquery",function(){return jQuery}),"function"==typeof _&&r("underscore",function(){return _}),a.config({name:"AP_Player_App",baseUrl:"/wp-content/plugins/smart-podcast-player/assets/js/",urlArgs:"bust="+(new Date).getTime(),paths:{backbone:"vendor/amdjs/backbone","backbone.wreqr":"vendor/amdjs/backbone.wreqr","backbone.babysitter":"vendor/amdjs/backbone.babysitter",marionette:"vendor/amdjs/marionette",soundmanager2:"vendor/soundmanager2-nodebug-jsmin","mwheel-intent":"vendor/mwheelIntent",style:"vendor/style"},shim:{soundmanager2:{exports:"soundManager"},"vendor/jquery.mousewheel":["jquery","mwheel-intent"],"vendor/jquery.jscrollpane":["jquery","vendor/jquery.mousewheel","mwheel-intent"]}}),a(["jquery","app"],function(n,i){function s(){var t=n("#spp-sticky-container");if(0!=t.length){var e=n("#spp-sticky"),i=t.offset().top,a=n(window).scrollTop(),r=e.hasClass("spp-sticking");if("undefined"==typeof s.top_when_sticking){for(var o=e.get(0).className.split(/\s+/),l=0;l<o.length;l++){var p=o[l].match(/spp-sticky-top-(-?\d+)/);p&&p.length>1&&(s.top_when_sticking=parseInt(p[1]))}"number"!=typeof s.top_when_sticking&&(s.top_when_sticking=0)}!r&&a>i-s.top_when_sticking?(e.addClass("spp-sticking"),e.detach(),t.after(e),e.cssExtended("width",t.css("width"),"important"),e.cssExtended("top",s.top_when_sticking+"px","important")):r&&i-s.top_when_sticking>a&&(e.removeClass("spp-sticking"),e.detach(),t.append(e),e.cssExtended("top","0px","important"))}}function a(){var t=n("#spp-sticky-container");if(0!=t.length){var e=n("#spp-sticky");e.cssExtended("width",t.css("width"),"important")}}var r=jQuery(window).width(),o=jQuery(window).height();jQuery(window).on("resize",function(){(r!=jQuery(window).width()||o!=jQuery(window).height())&&(r=jQuery(window).width(),o=jQuery(window).height(),jQuery(window).trigger("spp_resize"))}),n(window).resize(function(){n(".smart-podcast-player").each(function(){var t=n(this).parent(),e=n(t).width(),i=n(window).width();768>e||768>i?t.addClass("spp-player-small"):t.removeClass("spp-player-small")})}),n(".smart-podcast-player").each(function(){var t=n(this).parent(),e=n(t).width(),i=n(window).width();(768>e||768>i)&&t.addClass("spp-player-small")}),n(function(){n(window).scroll(s)}),n(function(){n(window).resize(a)}),e(n),t(jQuery,this),i.start()}),a(["jquery","stp-app"],function(n,i){jQuery(".smart-track-player ").length>0&&(e(n),t(jQuery,this),i.start())}),r("main",function(){})}();